{"version":3,"sources":["webpack:///./actions/integration_actions.jsx","webpack:///./components/backstage/backstage_controller.jsx","webpack:///./components/backstage/components/backstage_category.jsx","webpack:///./components/backstage/components/backstage_header.jsx","webpack:///./components/backstage/components/backstage_list.jsx","webpack:///./components/backstage/components/backstage_navbar.jsx","webpack:///./components/backstage/components/backstage_section.jsx","webpack:///./components/backstage/components/backstage_sidebar.jsx","webpack:///./components/backstage/index.js","webpack:///./components/channel_select/channel_select.jsx","webpack:///./components/channel_select/index.js","webpack:///./components/copy_text.tsx","webpack:///./components/delete_modal_trigger.tsx","webpack:///./components/emoji/add_emoji/add_emoji.tsx","webpack:///./components/emoji/add_emoji/index.ts","webpack:///./components/emoji/delete_emoji_modal.tsx","webpack:///./components/emoji/emoji_list/emoji_list.tsx","webpack:///./components/emoji/emoji_list/index.ts","webpack:///./components/emoji/emoji_list_item/emoji_list_item.tsx","webpack:///./components/emoji/emoji_list_item/index.ts","webpack:///./components/emoji/emoji_page.tsx","webpack:///./components/emoji/index.ts","webpack:///./components/integrations/abstract_command.jsx","webpack:///./components/integrations/abstract_incoming_webhook.jsx","webpack:///./components/integrations/abstract_oauth_app.jsx","webpack:///./components/integrations/abstract_outgoing_webhook.jsx","webpack:///./components/integrations/add_command/add_command.jsx","webpack:///./components/integrations/add_command/index.js","webpack:///./components/integrations/add_incoming_webhook/add_incoming_webhook.jsx","webpack:///./components/integrations/add_incoming_webhook/index.js","webpack:///./components/integrations/add_oauth_app/add_oauth_app.jsx","webpack:///./components/integrations/add_oauth_app/index.js","webpack:///./components/integrations/add_outgoing_webhook/add_outgoing_webhook.jsx","webpack:///./components/integrations/add_outgoing_webhook/index.js","webpack:///./components/integrations/bots/add_bot/add_bot.jsx","webpack:///./components/integrations/bots/add_bot/index.js","webpack:///./components/integrations/bots/bot.jsx","webpack:///./components/integrations/bots/bots.jsx","webpack:///./components/integrations/bots/index.js","webpack:///./components/integrations/commands_container/commands_container.tsx","webpack:///./components/integrations/commands_container/index.ts","webpack:///./components/integrations/confirm_integration/confirm_integration.jsx","webpack:///./components/integrations/confirm_integration/index.js","webpack:///./components/integrations/delete_integration.jsx","webpack:///./components/integrations/edit_command/edit_command.jsx","webpack:///./components/integrations/edit_command/index.js","webpack:///./components/integrations/edit_incoming_webhook/edit_incoming_webhook.tsx","webpack:///./components/integrations/edit_incoming_webhook/index.ts","webpack:///./components/integrations/edit_oauth_app/edit_oauth_app.jsx","webpack:///./components/integrations/edit_oauth_app/index.js","webpack:///./components/integrations/edit_outgoing_webhook/edit_outgoing_webhook.tsx","webpack:///./components/integrations/edit_outgoing_webhook/index.ts","webpack:///./components/integrations/index.js","webpack:///./components/integrations/installed_command.jsx","webpack:///./components/integrations/installed_commands/index.js","webpack:///./components/integrations/installed_commands/installed_commands.jsx","webpack:///./components/integrations/installed_incoming_webhook.jsx","webpack:///./components/integrations/installed_incoming_webhooks/index.ts","webpack:///./components/integrations/installed_incoming_webhooks/installed_incoming_webhooks.tsx","webpack:///./components/integrations/installed_oauth_app/index.ts","webpack:///./components/integrations/installed_oauth_app/installed_oauth_app.tsx","webpack:///./components/integrations/installed_oauth_apps/index.js","webpack:///./components/integrations/installed_oauth_apps/installed_oauth_apps.jsx","webpack:///./components/integrations/installed_outgoing_webhook.jsx","webpack:///./components/integrations/installed_outgoing_webhooks/index.js","webpack:///./components/integrations/installed_outgoing_webhooks/installed_outgoing_webhooks.jsx","webpack:///./components/integrations/integration_option.jsx","webpack:///./components/integrations/integrations.jsx","webpack:///./components/permissions_gates/any_team_permission_gate/any_team_permission_gate.tsx","webpack:///./components/permissions_gates/any_team_permission_gate/index.ts","webpack:///./components/widgets/icons/fa_search_icon.jsx","webpack:///./images/bot_default_icon.png","webpack:///./images/incoming_webhook.jpg","webpack:///./images/oauth_icon.png","webpack:///./images/outgoing_webhook.jpg","webpack:///./images/slash_command_icon.jpg","webpack:///./node_modules/mattermost-redux/actions/bots.js","webpack:///./node_modules/mattermost-redux/selectors/entities/bots.js","webpack:///./node_modules/mattermost-redux/selectors/entities/integrations.js"],"names":["DEFAULT_PAGE_SIZE","loadIncomingHooksAndProfilesForTeam","teamId","page","perPage","dispatch","data","IntegrationActions","loadProfilesForIncomingHooks","hooks","getState","state","profilesToLoad","i","length","hook","getUser","user_id","list","Object","keys","getProfilesByIds","loadOutgoingHooksAndProfilesForTeam","loadProfilesForOutgoingHooks","creator_id","loadCommandsAndProfilesForTeam","loadProfilesForCommands","commands","command","loadOAuthAppsAndProfiles","loadProfilesForOAuthApps","apps","app","getYoutubeVideoInfo","googleKey","videoId","success","error","request","get","query","part","id","key","end","err","res","body","console","BackstageRoute","component","Component","extraProps","rest","props","BackstageController","React","PureComponent","listRef","scrollTop","ref","render","team","user","scrollToTop","siteName","setListRef","enableCustomEmoji","enableIncomingWebhooks","enableOutgoingWebhooks","enableCommands","enableOAuthServiceProvider","canCreateOrDeleteCustomEmoji","canManageIntegrations","Integrations","match","url","InstalledIncomingWebhooks","AddIncomingWehook","EditIncomingWebhook","InstalledOutgoingWebhooks","AddOutgoingWebhook","EditOutgoingWebhook","CommandsContainer","InstalledOauthApps","AddOauthApp","EditOauthApp","ConfirmIntegration","Emoji","AddEmoji","AddBot","Bots","PropTypes","object","shape","string","isRequired","bool","BackstageCategory","propTypes","name","title","node","icon","parentLink","children","arrayOf","element","defaultProps","link","Children","map","child","cloneElement","BackstageHeader","forEach","index","push","t","defaultMessage","BackstageList","constructor","e","setState","filter","target","value","toLowerCase","loading","hasChildren","emptyText","emptyTextSearch","values","searchTerm","addLink","addText","addButtonId","header","searchPlaceholder","updateFilter","style","search","helpText","oneOfType","func","Utils","flexGrow","flexShrink","BackstageNavbar","BackstageSection","subsection","getLink","clonedChildren","className","BackstageSidebar","renderCustomEmoji","renderIntegrations","incomingWebhooks","Permissions","MANAGE_INCOMING_WEBHOOKS","outgoingWebhooks","MANAGE_OUTGOING_WEBHOOKS","MANAGE_SLASH_COMMANDS","oauthApps","MANAGE_OAUTH","botAccounts","mapStateToProps","getCurrentUser","getCurrentTeam","config","getConfig","SiteName","EnableCustomEmoji","EnableIncomingWebhooks","EnableOutgoingWebhooks","EnableCommands","EnableOAuthServiceProvider","haveISystemPermission","permission","CREATE_EMOJIS","DELETE_EMOJIS","getMyTeams","haveITeamPermission","canManageTeamIntegrations","canManageSystemBots","MANAGE_BOTS","MANAGE_OTHERS_BOTS","withRouter","connect","ChannelSelect","channels","array","onChange","selectOpen","selectPrivate","selectDm","options","channel","channelName","display_name","type","Constants","OPEN_CHANNEL","PRIVATE_CHANNEL","DM_CHANNEL","getMyChannelsSorted","createSelector","getMyChannels","getCurrentUserLocale","locale","sort","sortChannelsByTypeAndDisplayName","bind","CopyText","preventDefault","copyToClipboard","document","queryCommandSupported","tooltip","idMessage","OVERLAY_TIME_DELAY","copyText","DeleteModalTrigger","showDeleteModal","onDelete","TypeError","triggerTitle","modalTitle","modalMessage","modalConfirmButton","handleOpenModal","handleConfirm","handleCancel","handleSubmit","actions","emojiMap","image","saving","emoji","trim","startsWith","endsWith","substring","test","hasSystemEmoji","has","maxFileSizeBytes","size","response","createCustomEmoji","savedEmoji","browserHistory","responseError","message","genericError","files","imageUrl","reader","FileReader","onload","result","readAsDataURL","filename","preview","backgroundImage","handleFormSubmit","updateName","updateImage","localizeMessage","handleSaveButtonClick","getEmojiMap","mapDispatchToProps","bindActionCreators","DeleteEmoji","EMOJI_PER_PAGE","EMOJI_SEARCH_DELAY_MILLISECONDS","EmojiList","next","nextLoading","getCustomEmojis","SORT_BY_NAME","then","missingPages","term","clearTimeout","searchTimeout","setTimeout","searchEmojis","searchCustomEmojis","em","emojiId","indexOf","newSearchEmojis","splice","componentDidMount","emojis","nextButton","previousButton","emojiIds","deleteFromSearch","deleteCustomEmoji","pageStart","pageEnd","emojisToDisplay","slice","buttonContents","nextPage","previousPage","onSearchChange","getCustomEmojiIdsSortedByName","EmojiListItem","creatorUsername","creatorDisplayName","deleteButton","currentUserId","handleDelete","DELETE_OTHERS_EMOJIS","Client4","getCustomEmojiImageUrl","ownProps","entities","customEmoji","creator","getDisplayNameByUser","username","getCurrentUserId","currentTeam","EmojiPage","teamDisplayName","updateTitle","loadRolesIfNeeded","componentDidUpdate","prevProps","teamName","general","REQUEST_POST","REQUEST_GET","AbstractCommand","displayName","description","trigger","method","iconUrl","icon_url","autocomplete","auto_complete","autocompleteHint","auto_complete_hint","autocompleteDescription","auto_complete_desc","clientError","triggerWord","substr","team_id","MIN_TRIGGER_LENGTH","MAX_TRIGGER_LENGTH","min","max","action","checked","getStateFromCommand","initialCommand","updateAutocompleteHint","updateAutocompleteDescription","updateDisplayName","updateDescription","updateTrigger","updateUrl","updateMethod","updateUsername","updateIconUrl","updateAutocomplete","serverError","footer","renderExtra","AbstractIncomingWebhook","channelId","channel_id","channelLocked","channel_locked","iconURL","getStateFromHook","initialHook","headerToRender","footerToRender","updateChannelId","updateChannelLocked","enablePostUsernameOverride","enablePostIconOverride","updateIconURL","AbstractOAuthApp","homepage","callbackUrls","callback_urls","join","is_trusted","has_icon","Boolean","current","callbackUrl","split","src","Image","imageLoaded","createRef","getStateFromApp","initialApp","trusted","MANAGE_SYSTEM","updateTrusted","updateHomepage","updateCallbackUrls","AbstractOutgoingWebhook","triggerWords","trigger_words","contentType","content_type","triggerWhen","trigger_when","parseInt","contentTypeOption1","contentTypeOption2","updateContentType","updateTriggerWords","updateTriggerWhen","HEADER","FOOTER","LOADING","AddCommand","addCommand","AddIncomingWebhook","createIncomingHook","addIncomingHook","EnablePostUsernameOverride","EnablePostIconOverride","AddOAuthApp","addOAuthApp","addOAuthAppRequest","createOutgoingHook","addOutgoingHook","roleOptionSystemAdmin","roleOptionMember","role","postAll","postChannels","pictureFile","previewBlob","URL","createObjectURL","e2","orientation","FileUtils","orientationStyles","readAsArrayBuffer","BotDefaultIcon","roles","General","SYSTEM_USER_ROLE","SYSTEM_ADMIN_ROLE","SYSTEM_POST_ALL_ROLE","SYSTEM_POST_ALL_PUBLIC_ROLE","rolesResult","updateUserRoles","adding","AcceptedProfileImageTypes","includes","maxFileSize","bot","patchBot","imageResult","uploadProfileImage","setDefaultProfileImage","updateRoles","usernameError","errObj","ValidationErrors","INVALID_LAST_CHARACTER","createBot","token","tokenResult","createUserAccessToken","UserUtils","subtitle","buttonText","buttonActiveText","imageURL","removeImageIcon","setDefault","imageStyles","last_picture_update","updatePicture","editingUserHasManageSystem","updateRole","updatePostAll","updatePostChannels","number","botId","URLSearchParams","location","bots","getBotAccounts","MaxFileSize","matchesFilter","owner","ownerUsername","Bot","enableBot","disableBot","enableUserAccessToken","disableUserAccessToken","confirmingId","revokeUserAccessToken","closeConfirm","creatingTokenState","assign","tokenList","accessTokens","activeLink","disableClass","disabledText","is_active","confirmRevokeToken","openCreateToken","delete_at","handleCreateToken","handleUpdateDescription","closeCreateToken","revokeTokenConfirmed","owners","users","a","b","localeCompare","enabledBots","botToJSX","disabledBots","sections","loadBots","START_PAGE_NUM","PAGE_SIZE","promises","owner_id","getUserAccessTokensForUser","Promise","all","DisabledSection","hasDisabled","botsToDisplay","EnabledSection","createBots","siteURL","getSiteURL","EnableBotAccountCreation","getExternalBotAccounts","botValues","reduce","UserSelectors","admin","userAccessTokensByUser","CommandRoute","path","InstalledCommands","EditCommand","getCommands","getUsers","incomingHooks","outgoingHooks","window","addEventListener","handleKeyPress","componentWillUnmount","removeEventListener","headerText","tokenText","incomingHook","outgoingHook","oauthApp","COMMAND","commandToken","INCOMING_WEBHOOK","incomingHookToken","OUTGOING_WEBHOOK","outgoingHookToken","OAUTH_APP","oauthAppToken","oauthAppSecret","client_secret","secret","BOT","botToken","botname","replace","ErrorPageTypes","PAGE_NOT_FOUND","getOAuthApps","getIncomingHooks","getOutgoingHooks","DeleteIntegration","messageId","newCommand","originalCommand","handleConfirmModal","submitCommand","showConfirmModal","editCommand","confirmButton","confirmTitle","confirmMessage","confirmModalDismissed","getCustomTeamCommands","commandId","newHook","submitHook","updateIncomingHook","getIncomingHook","hookId","editIncomingHook","integrations","EditOAuthApp","newApp","callbackUrlsSame","every","v","submitOAuthApp","editOAuthApp","getOAuthApp","oauthAppId","triggerWordsSame","updateOutgoingHook","getOutgoingHook","editOutgoingHook","InstalledCommand","onRegenToken","canChange","handleRegenToken","createAt","create_at","canManageOthersSlashCommands","MANAGE_OTHERS_SLASH_COMMANDS","regenCommandToken","deleteCommand","commandCompare","nameA","nameB","buildYourOwn","appDirectory","incomingWebhook","InstalledIncomingWebhook","incomingWebhookId","getCurrentTeamId","canManageOthersWebhooks","MANAGE_OTHERS_INCOMING_WEBHOOKS","getAllChannels","removeIncomingHook","displayNameA","channelA","displayNameB","incomingWebhookCompare","deleteIncomingWebhook","creatorName","InstalledOAuthApp","FAKE_SECRET","clientSecret","onRegenerateSecret","handleShowClientSecret","urls","isTrusted","showHide","handleHideClientSecret","regen","handleRegenerate","clientId","canManageOauth","regenOAuthAppSecret","Actions","deleteOAuthApp","InstalledOAuthApps","oauthAppCompare","integrationsEnabled","oauthApplications","outgoingWebhook","InstalledOutgoingWebhook","makeDisplayName","triggerWordsFull","triggerWordsStartsWith","MANAGE_OTHERS_OUTGOING_WEBHOOKS","removeOutgoingHook","regenOutgoingHookToken","channelB","outgoingWebhookCompare","regenOutgoingWebhookToken","IntegrationOption","currentSiteName","IncomingWebhookIcon","OutgoingWebhookIcon","SlashCommandIcon","OAuthIcon","BotAccountsIcon","AnyTeamPermissionGate","hasPermission","invert","permissions","teams","SearchIcon"],"mappings":"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K;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,0BAA0B,UAAU;AACpC,6BAA6B,iCAAiC;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,gC;;;;;;;;;;;;ACnFa;AACb;AACA;AACA,8CAA8C,cAAc;AAC5D,iBAAiB,mBAAO,CAAC,qDAAU;AACnC,eAAe,mBAAO,CAAC,8EAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD,gC;;;;;;;;;;;;ACrBa;AACb;AACA;AACA,8CAA8C,cAAc;AAC5D,cAAc,mBAAO,CAAC,gDAAO;AAC7B,iBAAiB,mBAAO,CAAC,qDAAU;AACnC,cAAc,mBAAO,CAAC,4EAAS;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,6BAA6B,EAAE;AACpF,CAAC;AACD;AACA,+CAA+C;AAC/C,CAAC;AACD;AACA;AACA;AACA,KAAK,wBAAwB,qDAAqD,EAAE;AACpF,CAAC;AACD,wC","file":"8.afe6135c5f3c893e0e03.js","sourcesContent":["// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport request from 'superagent';\nimport * as IntegrationActions from 'mattermost-redux/actions/integrations';\nimport {getProfilesByIds} from 'mattermost-redux/actions/users';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\n\nconst DEFAULT_PAGE_SIZE = 100;\n\nexport function loadIncomingHooksAndProfilesForTeam(teamId, page = 0, perPage = DEFAULT_PAGE_SIZE) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getIncomingHooks(teamId, page, perPage));\n        if (data) {\n            dispatch(loadProfilesForIncomingHooks(data));\n        }\n    };\n}\n\nexport function loadProfilesForIncomingHooks(hooks) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < hooks.length; i++) {\n            const hook = hooks[i];\n            if (!getUser(state, hook.user_id)) {\n                profilesToLoad[hook.user_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function loadOutgoingHooksAndProfilesForTeam(teamId, page = 0, perPage = DEFAULT_PAGE_SIZE) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getOutgoingHooks('', teamId, page, perPage));\n        if (data) {\n            dispatch(loadProfilesForOutgoingHooks(data));\n        }\n    };\n}\n\nexport function loadProfilesForOutgoingHooks(hooks) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < hooks.length; i++) {\n            const hook = hooks[i];\n            if (!getUser(state, hook.creator_id)) {\n                profilesToLoad[hook.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function loadCommandsAndProfilesForTeam(teamId) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getCustomTeamCommands(teamId));\n        if (data) {\n            dispatch(loadProfilesForCommands(data));\n        }\n    };\n}\n\nexport function loadProfilesForCommands(commands) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < commands.length; i++) {\n            const command = commands[i];\n            if (!getUser(state, command.creator_id)) {\n                profilesToLoad[command.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function loadOAuthAppsAndProfiles(page = 0, perPage = DEFAULT_PAGE_SIZE) {\n    return async (dispatch) => {\n        const {data} = await dispatch(IntegrationActions.getOAuthApps(page, perPage));\n        if (data) {\n            dispatch(loadProfilesForOAuthApps(data));\n        }\n    };\n}\n\nexport function loadProfilesForOAuthApps(apps) {\n    return async (dispatch, getState) => {\n        const state = getState();\n        const profilesToLoad = {};\n        for (let i = 0; i < apps.length; i++) {\n            const app = apps[i];\n            if (!getUser(state, app.creator_id)) {\n                profilesToLoad[app.creator_id] = true;\n            }\n        }\n\n        const list = Object.keys(profilesToLoad);\n        if (list.length === 0) {\n            return;\n        }\n\n        dispatch(getProfilesByIds(list));\n    };\n}\n\nexport function getYoutubeVideoInfo(googleKey, videoId, success, error) {\n    request.get('https://www.googleapis.com/youtube/v3/videos').\n        query({part: 'snippet', id: videoId, key: googleKey}).\n        end((err, res) => {\n            if (err) {\n                return error(err);\n            }\n\n            if (!res.body) {\n                console.error('Missing response body for getYoutubeVideoInfo'); // eslint-disable-line no-console\n            }\n\n            return success(res.body);\n        });\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {Route, Switch} from 'react-router-dom';\n\nimport Bots from 'components/integrations/bots';\nimport AddBot from 'components/integrations/bots/add_bot';\n\nimport Pluggable from 'plugins/pluggable';\nimport AnnouncementBar from 'components/announcement_bar';\nimport SystemNotice from 'components/system_notice';\nimport Integrations from 'components/integrations';\nimport Emoji from 'components/emoji';\nimport AddEmoji from 'components/emoji/add_emoji';\nimport InstalledIncomingWebhooks from 'components/integrations/installed_incoming_webhooks';\nimport AddIncomingWehook from 'components/integrations/add_incoming_webhook';\nimport EditIncomingWebhook from 'components/integrations/edit_incoming_webhook';\nimport InstalledOutgoingWebhooks from 'components/integrations/installed_outgoing_webhooks';\nimport AddOutgoingWebhook from 'components/integrations/add_outgoing_webhook';\nimport EditOutgoingWebhook from 'components/integrations/edit_outgoing_webhook';\nimport InstalledOauthApps from 'components/integrations/installed_oauth_apps';\nimport AddOauthApp from 'components/integrations/add_oauth_app';\nimport EditOauthApp from 'components/integrations/edit_oauth_app';\nimport CommandsContainer from 'components/integrations/commands_container';\nimport ConfirmIntegration from 'components/integrations/confirm_integration';\n\nimport BackstageSidebar from './components/backstage_sidebar.jsx';\nimport BackstageNavbar from './components/backstage_navbar';\n\nconst BackstageRoute = ({component: Component, extraProps, ...rest}) => ( //eslint-disable-line react/prop-types\n    <Route\n        {...rest}\n        render={(props) => (\n            <Component\n                {...extraProps}\n                {...props}\n            />\n        )}\n    />\n);\n\nexport default class BackstageController extends React.PureComponent {\n    static propTypes = {\n\n        /**\n         * Current user.\n         */\n        user: PropTypes.object,\n\n        /**\n         * Current team.\n         */\n        team: PropTypes.object,\n\n        /**\n         * Object from react-router\n         */\n        match: PropTypes.shape({\n            url: PropTypes.string.isRequired,\n        }).isRequired,\n\n        siteName: PropTypes.string,\n        enableCustomEmoji: PropTypes.bool.isRequired,\n        enableIncomingWebhooks: PropTypes.bool.isRequired,\n        enableOutgoingWebhooks: PropTypes.bool.isRequired,\n        enableCommands: PropTypes.bool.isRequired,\n        enableOAuthServiceProvider: PropTypes.bool.isRequired,\n        canCreateOrDeleteCustomEmoji: PropTypes.bool.isRequired,\n        canManageIntegrations: PropTypes.bool.isRequired,\n    }\n\n    scrollToTop = () => {\n        if (this.listRef) {\n            this.listRef.scrollTop = 0;\n        }\n    }\n\n    setListRef = (ref) => {\n        this.listRef = ref;\n    }\n\n    render() {\n        if (this.props.team == null || this.props.user == null) {\n            return <div/>;\n        }\n        const extraProps = {\n            team: this.props.team,\n            user: this.props.user,\n            scrollToTop: this.scrollToTop,\n        };\n        return (\n            <div className='backstage'>\n                <AnnouncementBar/>\n                <SystemNotice/>\n                <BackstageNavbar\n                    team={this.props.team}\n                    siteName={this.props.siteName}\n                />\n                <Pluggable pluggableName='Root'/>\n                <div\n                    className='backstage-body'\n                    ref={this.setListRef}\n                >\n                    <BackstageSidebar\n                        team={this.props.team}\n                        user={this.props.user}\n                        enableCustomEmoji={this.props.enableCustomEmoji}\n                        enableIncomingWebhooks={this.props.enableIncomingWebhooks}\n                        enableOutgoingWebhooks={this.props.enableOutgoingWebhooks}\n                        enableCommands={this.props.enableCommands}\n                        enableOAuthServiceProvider={this.props.enableOAuthServiceProvider}\n                        canCreateOrDeleteCustomEmoji={this.props.canCreateOrDeleteCustomEmoji}\n                        canManageIntegrations={this.props.canManageIntegrations}\n                    />\n                    <Switch>\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={'/:team/integrations'}\n                            component={Integrations}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={`${this.props.match.url}/incoming_webhooks`}\n                            component={InstalledIncomingWebhooks}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/incoming_webhooks/add`}\n                            component={AddIncomingWehook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/incoming_webhooks/edit`}\n                            component={EditIncomingWebhook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={`${this.props.match.url}/outgoing_webhooks`}\n                            component={InstalledOutgoingWebhooks}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/outgoing_webhooks/add`}\n                            component={AddOutgoingWebhook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/outgoing_webhooks/edit`}\n                            component={EditOutgoingWebhook}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/commands`}\n                            component={CommandsContainer}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={`${this.props.match.url}/oauth2-apps`}\n                            component={InstalledOauthApps}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/oauth2-apps/add`}\n                            component={AddOauthApp}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/oauth2-apps/edit`}\n                            component={EditOauthApp}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/confirm`}\n                            component={ConfirmIntegration}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            exact={true}\n                            path={'/:team/emoji'}\n                            component={Emoji}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/add`}\n                            component={AddEmoji}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/bots/add`}\n                            component={AddBot}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/bots/edit`}\n                            component={AddBot}\n                        />\n                        <BackstageRoute\n                            extraProps={extraProps}\n                            path={`${this.props.match.url}/bots`}\n                            component={Bots}\n                        />\n                    </Switch>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Route, NavLink} from 'react-router-dom';\n\nexport default class BackstageCategory extends React.PureComponent {\n    static get propTypes() {\n        return {\n            name: PropTypes.string.isRequired,\n            title: PropTypes.node.isRequired,\n            icon: PropTypes.string.isRequired,\n            parentLink: PropTypes.string,\n            children: PropTypes.arrayOf(PropTypes.element),\n        };\n    }\n\n    static get defaultProps() {\n        return {\n            parentLink: '',\n            children: [],\n        };\n    }\n\n    render() {\n        const {name, title, icon, parentLink, children} = this.props;\n\n        const link = parentLink + '/' + name;\n\n        return (\n            <li className='backstage-sidebar__category'>\n                <NavLink\n                    to={link}\n                    className='category-title'\n                    activeClassName='category-title--active'\n                >\n                    <i className={'fa ' + icon}/>\n                    <span className='category-title__text'>\n                        {title}\n                    </span>\n                </NavLink>\n                {\n                    children && children.length > 0 &&\n                    <Route\n                        path={link}\n                        render={() => (\n                            <ul className='sections'>\n                                {\n                                    React.Children.map(children, (child) => {\n                                        if (!child) {\n                                            return child;\n                                        }\n\n                                        return React.cloneElement(child, {\n                                            parentLink: link,\n                                        });\n                                    })\n                                }\n                            </ul>\n                        )}\n                    />\n                }\n            </li>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport LocalizedIcon from 'components/localized_icon';\n\nimport {t} from 'utils/i18n';\n\nexport default class BackstageHeader extends React.PureComponent {\n    static propTypes = {\n        children: PropTypes.node,\n    };\n\n    render() {\n        const children = [];\n\n        React.Children.forEach(this.props.children, (child, index) => {\n            if (index !== 0) {\n                children.push(\n                    <span\n                        key={'divider' + index}\n                        className='backstage-header__divider'\n                    >\n                        <LocalizedIcon\n                            className='fa fa-angle-right'\n                            title={{id: t('generic_icons.breadcrumb'), defaultMessage: 'Breadcrumb Icon'}}\n                        />\n                    </span>,\n                );\n            }\n\n            children.push(child);\n        });\n\n        return (\n            <div className='backstage-header'>\n                <h1>\n                    {children}\n                </h1>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nimport * as Utils from 'utils/utils.jsx';\nimport LoadingScreen from 'components/loading_screen';\nimport SearchIcon from 'components/widgets/icons/fa_search_icon';\n\nexport default class BackstageList extends React.PureComponent {\n    static propTypes = {\n        children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n        header: PropTypes.node.isRequired,\n        addLink: PropTypes.string,\n        addText: PropTypes.node,\n        addButtonId: PropTypes.string,\n        emptyText: PropTypes.node,\n        emptyTextSearch: PropTypes.node,\n        helpText: PropTypes.node,\n        loading: PropTypes.bool.isRequired,\n        searchPlaceholder: PropTypes.string,\n    }\n\n    static defaultProps = {\n        searchPlaceholder: Utils.localizeMessage('backstage_list.search', 'Search'),\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            filter: '',\n        };\n    }\n\n    updateFilter = (e) => {\n        this.setState({\n            filter: e.target.value,\n        });\n    }\n\n    render() {\n        const filter = this.state.filter.toLowerCase();\n\n        let children;\n        if (this.props.loading) {\n            children = <LoadingScreen/>;\n        } else {\n            children = this.props.children;\n            let hasChildren = true;\n            if (typeof children === 'function') {\n                [children, hasChildren] = children(filter);\n            }\n            children = React.Children.map(children, (child) => {\n                return React.cloneElement(child, {filter});\n            });\n            if (children.length === 0 || !hasChildren) {\n                if (!filter) {\n                    if (this.props.emptyText) {\n                        children = (\n                            <div className='backstage-list__item backstage-list__empty'>\n                                {this.props.emptyText}\n                            </div>\n                        );\n                    }\n                } else if (this.props.emptyTextSearch) {\n                    children = (\n                        <div\n                            className='backstage-list__item backstage-list__empty'\n                            id='emptySearchResultsMessage'\n                        >\n                            {React.cloneElement(this.props.emptyTextSearch, {values: {searchTerm: filter}})}\n                        </div>\n                    );\n                }\n            }\n        }\n\n        let addLink = null;\n\n        if (this.props.addLink && this.props.addText) {\n            addLink = (\n                <Link\n                    className='add-link'\n                    to={this.props.addLink}\n                >\n                    <button\n                        type='button'\n                        className='btn btn-primary'\n                        id={this.props.addButtonId}\n                    >\n                        <span>\n                            {this.props.addText}\n                        </span>\n                    </button>\n                </Link>\n            );\n        }\n\n        return (\n            <div className='backstage-content'>\n                <div className='backstage-header'>\n                    <h1>\n                        {this.props.header}\n                    </h1>\n                    {addLink}\n                </div>\n                <div className='backstage-filters'>\n                    <div className='backstage-filter__search'>\n                        <SearchIcon/>\n                        <input\n                            type='search'\n                            className='form-control'\n                            placeholder={this.props.searchPlaceholder}\n                            value={this.state.filter}\n                            onChange={this.updateFilter}\n                            style={style.search}\n                            id='searchInput'\n                        />\n                    </div>\n                </div>\n                <span className='backstage-list__help'>\n                    {this.props.helpText}\n                </span>\n                <div className='backstage-list'>\n                    {children}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst style = {\n    search: {flexGrow: 0, flexShrink: 0},\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport BackIcon from 'components/widgets/icons/fa_back_icon';\n\nexport default class BackstageNavbar extends React.PureComponent {\n    static get propTypes() {\n        return {\n            team: PropTypes.object.isRequired,\n            siteName: PropTypes.string,\n        };\n    }\n\n    render() {\n        if (!this.props.team) {\n            return null;\n        }\n\n        return (\n            <div className='backstage-navbar'>\n                <Link\n                    className='backstage-navbar__back'\n                    to={`/${this.props.team.name}`}\n                >\n                    <BackIcon/>\n                    <span>\n                        <FormattedMessage\n                            id='backstage_navbar.backToMattermost'\n                            defaultMessage='Back to {siteName}'\n                            values={{\n                                siteName: this.props.siteName,\n                            }}\n                        />\n                    </span>\n                </Link>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {NavLink} from 'react-router-dom';\n\nexport default class BackstageSection extends React.PureComponent {\n    static get propTypes() {\n        return {\n            name: PropTypes.string.isRequired,\n            title: PropTypes.node.isRequired,\n            parentLink: PropTypes.string,\n            subsection: PropTypes.bool,\n            children: PropTypes.arrayOf(PropTypes.element),\n            id: PropTypes.string,\n        };\n    }\n\n    static get defaultProps() {\n        return {\n            parentLink: '',\n            subsection: false,\n            children: [],\n        };\n    }\n\n    getLink() {\n        return this.props.parentLink + '/' + this.props.name;\n    }\n\n    render() {\n        const {title, subsection, children} = this.props;\n\n        const link = this.getLink();\n\n        let clonedChildren = null;\n        if (children.length > 0) {\n            clonedChildren = (\n                <ul className='subsections'>\n                    {\n                        React.Children.map(children, (child) => {\n                            return React.cloneElement(child, {\n                                parentLink: link,\n                                subsection: true,\n                            });\n                        })\n                    }\n                </ul>\n            );\n        }\n\n        let className = 'section';\n        if (subsection) {\n            className = 'subsection';\n        }\n\n        return (\n            <li\n                className={className}\n                id={this.props.id}\n            >\n                <NavLink\n                    className={`${className}-title`}\n                    activeClassName={`${className}-title--active`}\n                    to={link}\n                >\n                    <span className={`${className}-title__text`}>\n                        {title}\n                    </span>\n                </NavLink>\n                {clonedChildren}\n            </li>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport SystemPermissionGate from 'components/permissions_gates/system_permission_gate';\nimport TeamPermissionGate from 'components/permissions_gates/team_permission_gate';\n\nimport BackstageCategory from './backstage_category.jsx';\nimport BackstageSection from './backstage_section.jsx';\n\nexport default class BackstageSidebar extends React.PureComponent {\n    static get propTypes() {\n        return {\n            team: PropTypes.object.isRequired,\n            user: PropTypes.object.isRequired,\n            enableCustomEmoji: PropTypes.bool.isRequired,\n            enableIncomingWebhooks: PropTypes.bool.isRequired,\n            enableOutgoingWebhooks: PropTypes.bool.isRequired,\n            enableCommands: PropTypes.bool.isRequired,\n            enableOAuthServiceProvider: PropTypes.bool.isRequired,\n            canCreateOrDeleteCustomEmoji: PropTypes.bool.isRequired,\n            canManageIntegrations: PropTypes.bool.isRequired,\n        };\n    }\n\n    renderCustomEmoji() {\n        if (!this.props.enableCustomEmoji || !this.props.canCreateOrDeleteCustomEmoji) {\n            return null;\n        }\n\n        return (\n            <BackstageCategory\n                name='emoji'\n                parentLink={'/' + this.props.team.name}\n                icon='fa-smile-o'\n                title={\n                    <FormattedMessage\n                        id='backstage_sidebar.emoji'\n                        defaultMessage='Custom Emoji'\n                    />\n                }\n            />\n        );\n    }\n\n    renderIntegrations() {\n        if (!this.props.canManageIntegrations) {\n            return null;\n        }\n\n        let incomingWebhooks = null;\n        if (this.props.enableIncomingWebhooks) {\n            incomingWebhooks = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_INCOMING_WEBHOOKS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name='incoming_webhooks'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={(\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.incoming_webhooks'\n                                defaultMessage='Incoming Webhooks'\n                            />\n                        )}\n                        id='incomingWebhooks'\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let outgoingWebhooks = null;\n        if (this.props.enableOutgoingWebhooks) {\n            outgoingWebhooks = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_OUTGOING_WEBHOOKS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name='outgoing_webhooks'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={(\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.outgoing_webhooks'\n                                defaultMessage='Outgoing Webhooks'\n                            />\n                        )}\n                        id='outgoingWebhooks'\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let commands = null;\n        if (this.props.enableCommands) {\n            commands = (\n                <TeamPermissionGate\n                    permissions={[Permissions.MANAGE_SLASH_COMMANDS]}\n                    teamId={this.props.team.id}\n                >\n                    <BackstageSection\n                        name='commands'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={(\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.commands'\n                                defaultMessage='Slash Commands'\n                            />\n                        )}\n                        id='slashCommands'\n                    />\n                </TeamPermissionGate>\n            );\n        }\n\n        let oauthApps = null;\n        if (this.props.enableOAuthServiceProvider) {\n            oauthApps = (\n                <SystemPermissionGate permissions={[Permissions.MANAGE_OAUTH]}>\n                    <BackstageSection\n                        name='oauth2-apps'\n                        parentLink={'/' + this.props.team.name + '/integrations'}\n                        title={\n                            <FormattedMessage\n                                id='backstage_sidebar.integrations.oauthApps'\n                                defaultMessage='OAuth 2.0 Applications'\n                            />\n                        }\n                        id='oauthApps'\n                    />\n                </SystemPermissionGate>\n            );\n        }\n\n        // Note that we allow managing bot accounts even if bot account creation is disabled: only\n        // a permissions check is required.\n        const botAccounts = (\n            <SystemPermissionGate permissions={['manage_bots', 'manage_others_bots']}>\n                <BackstageSection\n                    name='bots'\n                    parentLink={'/' + this.props.team.name + '/integrations'}\n                    title={\n                        <FormattedMessage\n                            id='backstage_sidebar.bots'\n                            defaultMessage='Bot Accounts'\n                        />\n                    }\n                    id='botAccounts'\n                />\n            </SystemPermissionGate>\n        );\n\n        return (\n            <BackstageCategory\n                name='integrations'\n                icon='fa-link'\n                parentLink={'/' + this.props.team.name}\n                title={\n                    <FormattedMessage\n                        id='backstage_sidebar.integrations'\n                        defaultMessage='Integrations'\n                    />\n                }\n            >\n                {incomingWebhooks}\n                {outgoingWebhooks}\n                {commands}\n                {oauthApps}\n                {botAccounts}\n            </BackstageCategory>\n        );\n    }\n\n    render() {\n        return (\n            <div className='backstage-sidebar'>\n                <ul>\n                    {this.renderCustomEmoji()}\n                    {this.renderIntegrations()}\n                </ul>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router-dom';\n\nimport {getCurrentUser} from 'mattermost-redux/selectors/entities/users';\nimport {getMyTeams, getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {haveITeamPermission, haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport BackstageController from './backstage_controller.jsx';\n\nfunction mapStateToProps(state) {\n    const user = getCurrentUser(state);\n    const team = getCurrentTeam(state);\n\n    const config = getConfig(state);\n\n    const siteName = config.SiteName;\n    const enableCustomEmoji = config.EnableCustomEmoji === 'true';\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enableCommands = config.EnableCommands === 'true';\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    let canCreateOrDeleteCustomEmoji = (haveISystemPermission(state, {permission: Permissions.CREATE_EMOJIS}) || haveISystemPermission(state, {permission: Permissions.DELETE_EMOJIS}));\n    if (!canCreateOrDeleteCustomEmoji) {\n        for (const t of getMyTeams(state)) {\n            if (haveITeamPermission(state, {team: t.id, permission: Permissions.CREATE_EMOJIS}) || haveITeamPermission(state, {team: t.id, permission: Permissions.DELETE_EMOJIS})) {\n                canCreateOrDeleteCustomEmoji = true;\n                break;\n            }\n        }\n    }\n\n    const canManageTeamIntegrations = (haveITeamPermission(state, {permission: Permissions.MANAGE_SLASH_COMMANDS}) || haveITeamPermission(state, {permission: Permissions.MANAGE_OAUTH}) || haveITeamPermission(state, {permission: Permissions.MANAGE_INCOMING_WEBHOOKS}) || haveITeamPermission(state, {permission: Permissions.MANAGE_OUTGOING_WEBHOOKS}));\n    const canManageSystemBots = (haveISystemPermission(state, {permission: Permissions.MANAGE_BOTS}) || haveISystemPermission(state, {permission: Permissions.MANAGE_OTHERS_BOTS}));\n    const canManageIntegrations = canManageTeamIntegrations || canManageSystemBots;\n\n    return {\n        user,\n        team,\n        siteName,\n        enableCustomEmoji,\n        enableIncomingWebhooks,\n        enableOutgoingWebhooks,\n        enableCommands,\n        enableOAuthServiceProvider,\n        canCreateOrDeleteCustomEmoji,\n        canManageIntegrations,\n    };\n}\n\nexport default withRouter(connect(mapStateToProps)(BackstageController));\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport Constants from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\n\nexport default class ChannelSelect extends React.PureComponent {\n    static get propTypes() {\n        return {\n            channels: PropTypes.array.isRequired,\n            onChange: PropTypes.func,\n            value: PropTypes.string,\n            selectOpen: PropTypes.bool.isRequired,\n            selectPrivate: PropTypes.bool.isRequired,\n            selectDm: PropTypes.bool.isRequired,\n        };\n    }\n\n    static get defaultProps() {\n        return {\n            selectOpen: false,\n            selectPrivate: false,\n            selectDm: false,\n        };\n    }\n\n    render() {\n        const options = [\n            <option\n                key=''\n                value=''\n            >\n                {Utils.localizeMessage('channel_select.placeholder', '--- Select a channel ---')}\n            </option>,\n        ];\n\n        this.props.channels.forEach((channel) => {\n            const channelName = channel.display_name || channel.name;\n            if (channel.type === Constants.OPEN_CHANNEL && this.props.selectOpen) {\n                options.push(\n                    <option\n                        key={channel.id}\n                        value={channel.id}\n                    >\n                        {channelName}\n                    </option>,\n                );\n            } else if (channel.type === Constants.PRIVATE_CHANNEL && this.props.selectPrivate) {\n                options.push(\n                    <option\n                        key={channel.id}\n                        value={channel.id}\n                    >\n                        {channelName}\n                    </option>,\n                );\n            } else if (channel.type === Constants.DM_CHANNEL && this.props.selectDm) {\n                options.push(\n                    <option\n                        key={channel.id}\n                        value={channel.id}\n                    >\n                        {channelName}\n                    </option>,\n                );\n            }\n        });\n\n        return (\n            <select\n                className='form-control'\n                value={this.props.value}\n                onChange={this.props.onChange}\n                id='channelSelect'\n            >\n                {options}\n            </select>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {createSelector} from 'reselect';\n\nimport {getMyChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getCurrentUserLocale} from 'mattermost-redux/selectors/entities/i18n';\nimport {sortChannelsByTypeAndDisplayName} from 'mattermost-redux/utils/channel_utils';\n\nimport ChannelSelect from './channel_select.jsx';\n\nconst getMyChannelsSorted = createSelector(\n    getMyChannels,\n    getCurrentUserLocale,\n    (channels, locale) => {\n        return [...channels].sort(sortChannelsByTypeAndDisplayName.bind(null, locale));\n    },\n);\n\nfunction mapStateToProps(state) {\n    return {\n        channels: getMyChannelsSorted(state),\n    };\n}\n\nexport default connect(mapStateToProps)(ChannelSelect);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Tooltip} from 'react-bootstrap';\n\nimport OverlayTrigger from 'components/overlay_trigger';\n\nimport Constants from 'utils/constants';\nimport {copyToClipboard} from 'utils/utils.jsx';\n\ntype Props = {\n    value: string;\n    defaultMessage: string;\n    idMessage: string;\n};\n\nexport default class CopyText extends React.PureComponent<Props> {\n    public static defaultProps = {\n        defaultMessage: 'Copy',\n        idMessage: 'integrations.copy',\n    };\n\n    private copyText = (e: React.MouseEvent<HTMLAnchorElement, MouseEvent>): void => {\n        e.preventDefault();\n        copyToClipboard(this.props.value);\n    };\n\n    public render() {\n        if (!document.queryCommandSupported('copy')) {\n            return null;\n        }\n\n        const tooltip = (\n            <Tooltip id='copy'>\n                <FormattedMessage\n                    id={this.props.idMessage}\n                    defaultMessage={this.props.defaultMessage}\n                />\n            </Tooltip>\n        );\n\n        return (\n            <OverlayTrigger\n                delayShow={Constants.OVERLAY_TIME_DELAY}\n                placement='top'\n                overlay={tooltip}\n            >\n                <a\n                    href='#'\n                    data-testid='copyText'\n                    className='fa fa-copy ml-2'\n                    onClick={this.copyText}\n                />\n            </OverlayTrigger>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nimport ConfirmModal from './confirm_modal';\n\ntype Props = {\n    onDelete: () => void;\n}\n\ntype State = {\n    showDeleteModal: boolean;\n}\n\nexport default class DeleteModalTrigger extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        if (this.constructor === DeleteModalTrigger) {\n            throw new TypeError('Can not construct abstract class.');\n        }\n        this.state = {showDeleteModal: false};\n    }\n\n    public handleOpenModal = (e: React.SyntheticEvent) => {\n        e.preventDefault();\n\n        this.setState({showDeleteModal: true});\n    }\n\n    public handleConfirm = () => {\n        this.props.onDelete();\n    }\n\n    handleCancel = () => {\n        this.setState({showDeleteModal: false});\n    }\n\n    get triggerTitle(): JSX.Element {\n        return <div> </div>;\n    }\n\n    get modalTitle(): JSX.Element {\n        return <div> </div>;\n    }\n\n    get modalMessage(): JSX.Element {\n        return <div> </div>;\n    }\n\n    get modalConfirmButton(): JSX.Element {\n        return <div> </div>;\n    }\n\n    render() {\n        return (\n            <span>\n                <button\n                    className='color--link style--none'\n                    onClick={this.handleOpenModal}\n                >\n                    { this.triggerTitle }\n                </button>\n                <ConfirmModal\n                    show={this.state.showDeleteModal}\n                    title={this.modalTitle}\n                    message={this.modalMessage}\n                    confirmButtonText={this.modalConfirmButton}\n                    onConfirm={this.handleConfirm}\n                    onCancel={this.handleCancel}\n                />\n            </span>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {ChangeEvent, FormEvent, SyntheticEvent} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {UserProfile} from 'mattermost-redux/types/users';\nimport {CustomEmoji} from 'mattermost-redux/types/emojis';\nimport {Team} from 'mattermost-redux/types/teams';\n\nimport {ActionResult} from 'mattermost-redux/types/actions';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport {browserHistory} from 'utils/browser_history';\nimport {localizeMessage} from 'utils/utils.jsx';\n\nimport EmojiMap from 'utils/emoji_map';\n\nexport interface AddEmojiProps {\n    actions: {\n        createCustomEmoji: (term: CustomEmoji, imageData: File) => Promise<ActionResult>;\n    };\n    emojiMap: EmojiMap;\n    user: UserProfile;\n    team: Team;\n}\n\ntype EmojiCreateArgs = {\n    creator_id: string;\n    name: string;\n};\n\ntype AddEmojiState = {\n    name: string;\n    image: File | null;\n    imageUrl: string | ArrayBuffer | null;\n    saving: boolean;\n    error: React.ReactNode;\n};\n\ninterface AddErrorResponse {\n    error: Error;\n}\n\ninterface AddEmojiResponse {\n    data: CustomEmoji;\n}\n\nexport default class AddEmoji extends React.PureComponent<AddEmojiProps, AddEmojiState> {\n    constructor(props: AddEmojiProps) {\n        super(props);\n\n        this.state = {\n            name: '',\n            image: null,\n            imageUrl: '',\n            saving: false,\n            error: null,\n        };\n    }\n\n    handleFormSubmit = async (e: FormEvent<HTMLFormElement>): Promise<void> => {\n        return this.handleSubmit(e);\n    }\n\n    handleSaveButtonClick = async (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): Promise<void> => {\n        return this.handleSubmit(e);\n    }\n\n    handleSubmit = async (e: SyntheticEvent<unknown>): Promise<void> => {\n        const {actions, emojiMap, user, team} = this.props;\n        const {image, name, saving} = this.state;\n\n        e.preventDefault();\n\n        if (saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            error: null,\n        });\n\n        const emoji: EmojiCreateArgs = {\n            creator_id: user.id,\n            name: name.trim().toLowerCase(),\n        };\n\n        // trim surrounding colons if the user accidentally included them in the name\n        if (emoji.name.startsWith(':') && emoji.name.endsWith(':')) {\n            emoji.name = emoji.name.substring(1, emoji.name.length - 1);\n        }\n\n        if (!emoji.name) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameRequired'\n                        defaultMessage='A name is required for the emoji'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if ((/[^a-z0-9_-]/).test(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameInvalid'\n                        defaultMessage=\"An emoji's name can only contain lowercase letters, numbers, and the symbols '-' and '_'.\"\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (emojiMap.hasSystemEmoji(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.nameTaken'\n                        defaultMessage='This name is already in use by a system emoji. Please choose another name.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (emojiMap.has(emoji.name)) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.customNameTaken'\n                        defaultMessage='This name is already in use by a custom emoji. Please choose another name.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!image) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.imageRequired'\n                        defaultMessage='An image is required for the emoji'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const maxFileSizeBytes = 1024 * 1024;\n        if (image.size > maxFileSizeBytes) {\n            this.setState({\n                saving: false,\n                error: (\n                    <FormattedMessage\n                        id='add_emoji.imageTooLarge'\n                        defaultMessage='Unable to create emoji. Image must be less than 1 MB in size.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const response = await actions.createCustomEmoji(emoji as CustomEmoji, image);\n\n        if ('data' in response) {\n            const savedEmoji = response as AddEmojiResponse;\n            if (savedEmoji && savedEmoji.data.name === emoji.name) {\n                browserHistory.push('/' + team.name + '/emoji');\n                return;\n            }\n        }\n\n        if ('error' in response) {\n            const responseError = response as AddErrorResponse;\n            if (responseError) {\n                this.setState({\n                    saving: false,\n                    error: responseError.error.message,\n                });\n\n                return;\n            }\n        }\n\n        const genericError = (\n            <FormattedMessage\n                id='add_emoji.failedToAdd'\n                defaultMessage='Something when wrong when adding the custom emoji.'\n            />\n        );\n\n        this.setState({\n            saving: false,\n            error: (genericError),\n        });\n    };\n\n    updateName = (e: ChangeEvent<HTMLInputElement>): void => {\n        this.setState({\n            name: e.target.value,\n        });\n    };\n\n    updateImage = (e: ChangeEvent<HTMLInputElement>): void => {\n        if (e.target.files == null || e.target.files.length === 0) {\n            this.setState({\n                image: null,\n                imageUrl: '',\n            });\n\n            return;\n        }\n\n        const image = e.target.files![0];\n\n        const reader = new FileReader();\n        reader.onload = () => {\n            this.setState({\n                image,\n                imageUrl: reader.result,\n            });\n        };\n        reader.readAsDataURL(image);\n    };\n\n    render(): JSX.Element {\n        let filename = null;\n        if (this.state.image) {\n            filename = (\n                <span className='add-emoji__filename'>\n                    {this.state.image.name}\n                </span>\n            );\n        }\n\n        let preview = null;\n        if (this.state.imageUrl) {\n            preview = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='preview'\n                    >\n                        <FormattedMessage\n                            id='add_emoji.preview'\n                            defaultMessage='Preview'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8 add-emoji__preview'>\n                        <FormattedMessage\n                            id='add_emoji.preview.sentence'\n                            defaultMessage='This is a sentence with {image} in it.'\n                            values={{\n                                image: (\n                                    <span\n                                        className='emoticon'\n                                        style={{backgroundImage: 'url(' + this.state.imageUrl + ')'}}\n                                    />\n                                ),\n                            }}\n                        />\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/emoji'}>\n                        <FormattedMessage\n                            id='emoji_list.header'\n                            defaultMessage='Custom Emoji'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id='add_emoji.header'\n                        defaultMessage='Add'\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleFormSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='name'\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.name'\n                                    defaultMessage='Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='name'\n                                    type='text'\n                                    maxLength={64}\n                                    className='form-control'\n                                    value={this.state.name}\n                                    onChange={this.updateName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_emoji.name.help'\n                                        defaultMessage=\"Name your emoji. The name can be up to 64 characters, and can contain lowercase letters, numbers, and the symbols '-' and '_'.\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='image'\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.image'\n                                    defaultMessage='Image'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <div>\n                                    <div className='add-emoji__upload'>\n                                        <button className='btn btn-primary'>\n                                            <FormattedMessage\n                                                id='add_emoji.image.button'\n                                                defaultMessage='Select'\n                                            />\n                                        </button>\n                                        <input\n                                            id='select-emoji'\n                                            type='file'\n                                            accept='.jpg,.png,.gif'\n                                            multiple={false}\n                                            onChange={this.updateImage}\n                                        />\n                                    </div>\n                                    {filename}\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_emoji.image.help'\n                                            defaultMessage='Specify a .gif, .png, or .jpg file of up to 64 KB for your emoji. The dimensions can be up to 128 pixels by 128 pixels.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        {preview}\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                error={this.state.error}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={'/' + this.props.team.name + '/emoji'}\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage('add_emoji.saving', 'Saving...')}\n                                onClick={this.handleSaveButtonClick}\n                            >\n                                <FormattedMessage\n                                    id='add_emoji.save'\n                                    defaultMessage='Save'\n                                />\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {ActionCreatorsMapObject, bindActionCreators, Dispatch} from 'redux';\nimport {connect} from 'react-redux';\n\nimport {createCustomEmoji} from 'mattermost-redux/actions/emojis';\n\nimport {ActionFunc, ActionResult, GenericAction} from 'mattermost-redux/types/actions';\nimport {CustomEmoji} from 'mattermost-redux/types/emojis';\n\nimport {getEmojiMap} from 'selectors/emojis';\n\nimport {GlobalState} from 'types/store';\n\nimport AddEmoji from './add_emoji';\n\ntype Actions = {\n    createCustomEmoji: (emoji: CustomEmoji, imageData: File) => Promise<ActionResult>;\n};\n\nfunction mapStateToProps(state: GlobalState) {\n    return {\n        emojiMap: getEmojiMap(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<GenericAction>) {\n    return {\n        actions: bindActionCreators<ActionCreatorsMapObject<ActionFunc>, Actions>({\n            createCustomEmoji,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddEmoji);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport DeleteModalTrigger from 'components/delete_modal_trigger';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\n\nexport default class DeleteEmoji extends DeleteModalTrigger {\n    get triggerTitle() {\n        return (\n            <FormattedMessage\n                id='emoji_list.delete'\n                defaultMessage='Delete'\n            />\n        );\n    }\n\n    get modalTitle() {\n        return (\n            <FormattedMessage\n                id='emoji_list.delete.confirm.title'\n                defaultMessage='Delete Custom Emoji'\n            />\n        );\n    }\n\n    get modalMessage() {\n        return (\n            <div className='alert alert-warning'>\n                <WarningIcon additionalClassName='mr-1'/>\n                <FormattedMessage\n                    id='emoji_list.delete.confirm.msg'\n                    defaultMessage='This action permanently deletes the custom emoji. Are you sure you want to delete it?'\n                />\n            </div>\n        );\n    }\n\n    get modalConfirmButton() {\n        return (\n            <FormattedMessage\n                id='emoji_list.delete.confirm.button'\n                defaultMessage='Delete'\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React, {ChangeEvent, ChangeEventHandler} from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Emoji} from 'mattermost-redux/constants';\nimport {CustomEmoji} from 'mattermost-redux/types/emojis';\nimport {ServerError} from 'mattermost-redux/types/errors';\nimport {deleteCustomEmoji} from 'mattermost-redux/actions/emojis';\n\nimport LoadingScreen from 'components/loading_screen';\nimport SaveButton from 'components/save_button';\nimport EmojiListItem from 'components/emoji/emoji_list_item';\nimport NextIcon from 'components/widgets/icons/fa_next_icon';\nimport PreviousIcon from 'components/widgets/icons/fa_previous_icon';\nimport SearchIcon from 'components/widgets/icons/fa_search_icon';\nimport LocalizedInput from 'components/localized_input/localized_input';\n\nimport {t} from 'utils/i18n.jsx';\n\nconst EMOJI_PER_PAGE = 50;\nconst EMOJI_SEARCH_DELAY_MILLISECONDS = 200;\n\ninterface Props {\n\n    /**\n     * Custom emojis on the system.\n     */\n    emojiIds: string[];\n\n    /**\n     * Function to scroll list to top.\n     */\n    scrollToTop: () => void;\n    actions: {\n\n        /**\n         * Get pages of custom emojis.\n         */\n        getCustomEmojis: (page?: number, perPage?: number, sort?: string, loadUsers?: boolean) => Promise<{ data: CustomEmoji[]; error: ServerError }>;\n\n        /**\n         * Search custom emojis.\n         */\n        searchCustomEmojis: (term: string, options: any, loadUsers: boolean) => Promise<{ data: CustomEmoji[]; error: ServerError }>;\n    };\n\n}\n\ninterface State {\n    loading: boolean;\n    page: number;\n    nextLoading: boolean;\n    searchEmojis: string[];\n    missingPages: boolean;\n}\n\nexport default class EmojiList extends React.PureComponent<Props, State> {\n    private searchTimeout: NodeJS.Timeout | null;\n\n    constructor(props: Props) {\n        super(props);\n        this.searchTimeout = null;\n        this.state = {\n            loading: true,\n            page: 0,\n            nextLoading: false,\n            searchEmojis: [],\n            missingPages: true,\n        };\n    }\n\n    async componentDidMount(): Promise<void> {\n        this.props.actions.getCustomEmojis(0, EMOJI_PER_PAGE + 1, Emoji.SORT_BY_NAME, true).\n            then(({data}: { data: CustomEmoji[] }) => {\n                this.setState({loading: false});\n                if (data && data.length < EMOJI_PER_PAGE) {\n                    this.setState({missingPages: false});\n                }\n            });\n    }\n\n    nextPage = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n        if (e) {\n            e.preventDefault();\n        }\n\n        const next = this.state.page + 1;\n        this.setState({nextLoading: true});\n        this.props.actions.getCustomEmojis(next, EMOJI_PER_PAGE, Emoji.SORT_BY_NAME, true).\n            then(({data}: { data: CustomEmoji[] }) => {\n                this.setState({page: next, nextLoading: false});\n                if (data && data.length < EMOJI_PER_PAGE) {\n                    this.setState({missingPages: false});\n                }\n\n                this.props.scrollToTop();\n            });\n    };\n    previousPage = (e: React.MouseEvent<HTMLButtonElement, MouseEvent>): void => {\n        if (e) {\n            e.preventDefault();\n        }\n\n        this.setState({page: this.state.page - 1, nextLoading: false});\n        this.props.scrollToTop();\n    };\n\n    onSearchChange: ChangeEventHandler = (e: ChangeEvent): void => {\n        if (!e || !e.target) {\n            return;\n        }\n\n        const term = (e.target as HTMLInputElement).value || '';\n\n        clearTimeout(this.searchTimeout!);\n\n        this.searchTimeout = setTimeout(async () => {\n            if (term.trim() === '') {\n                this.setState({searchEmojis: [], page: 0});\n                return;\n            }\n\n            this.setState({loading: true});\n\n            const {data}: { data: CustomEmoji[] } = await this.props.actions.searchCustomEmojis(\n                term,\n                {},\n                true,\n            );\n\n            if (data) {\n                this.setState({\n                    searchEmojis: data.map((em: CustomEmoji) => em.id),\n                    loading: false,\n                });\n            } else {\n                this.setState({searchEmojis: [], loading: false});\n            }\n        }, EMOJI_SEARCH_DELAY_MILLISECONDS);\n    };\n\n    deleteFromSearch = (emojiId: string): void => {\n        if (!this.state.searchEmojis) {\n            return;\n        }\n\n        const index = this.state.searchEmojis.indexOf(emojiId);\n\n        if (index < 0) {\n            return;\n        }\n\n        const newSearchEmojis = [...this.state.searchEmojis];\n        newSearchEmojis.splice(index, 1);\n        this.setState({searchEmojis: newSearchEmojis});\n    };\n\n    render(): JSX.Element {\n        const searchEmojis = this.state.searchEmojis;\n        const emojis = [];\n        let nextButton;\n        let previousButton;\n\n        if (this.state.loading) {\n            emojis.push(\n                <tr\n                    key='loading'\n                    className='backstage-list__item backstage-list__empty'\n                >\n                    <td colSpan={4}>\n                        <LoadingScreen key='loading'/>\n                    </td>\n                </tr>,\n            );\n        } else if (\n            this.props.emojiIds.length === 0 ||\n            (searchEmojis && searchEmojis.length === 0)\n        ) {\n            emojis.push(\n                <tr\n                    key='empty'\n                    className='backstage-list__item backstage-list__empty'\n                >\n                    <td colSpan={4}>\n                        <FormattedMessage\n                            id='emoji_list.empty'\n                            defaultMessage='No custom emoji found'\n                        />\n                    </td>\n                </tr>,\n            );\n        } else if (searchEmojis) {\n            searchEmojis.forEach((emojiId: string) => {\n                emojis.push(\n                    <EmojiListItem\n                        key={'emoji_search_item' + emojiId}\n                        emojiId={emojiId}\n                        onDelete={this.deleteFromSearch}\n                        actions={{deleteCustomEmoji}}\n                    />,\n                );\n            });\n        } else {\n            const pageStart = this.state.page * EMOJI_PER_PAGE;\n            const pageEnd = pageStart + EMOJI_PER_PAGE;\n            const emojisToDisplay = this.props.emojiIds.slice(pageStart, pageEnd);\n\n            emojisToDisplay.forEach((emojiId: string) => {\n                emojis.push(\n                    <EmojiListItem\n                        key={'emoji_list_item' + emojiId}\n                        emojiId={emojiId}\n                        actions={{deleteCustomEmoji}}\n                    />,\n                );\n            });\n\n            if (this.state.missingPages) {\n                const buttonContents = (\n                    <span>\n                        <FormattedMessage\n                            id='filtered_user_list.next'\n                            defaultMessage='Next'\n                        />\n                        <NextIcon additionalClassName='ml-2'/>\n                    </span>\n                );\n\n                nextButton = (\n                    <SaveButton\n                        btnClass='btn-link'\n                        extraClasses='pull-right'\n                        onClick={this.nextPage}\n                        saving={this.state.nextLoading}\n                        disabled={this.state.nextLoading}\n                        defaultMessage={buttonContents}\n                        savingMessage={buttonContents}\n                    />\n                );\n            }\n\n            if (this.state.page > 0) {\n                previousButton = (\n                    <button\n                        className='btn btn-link'\n                        onClick={this.previousPage}\n                    >\n                        <PreviousIcon additionalClassName='mr-2'/>\n                        <FormattedMessage\n                            id='filtered_user_list.prev'\n                            defaultMessage='Previous'\n                        />\n                    </button>\n                );\n            }\n        }\n\n        return (\n            <div>\n                <div className='backstage-filters'>\n                    <div className='backstage-filter__search'>\n                        <SearchIcon/>\n                        <LocalizedInput\n                            type='search'\n                            className='form-control'\n                            placeholder={{\n                                id: t('emoji_list.search'),\n                                defaultMessage: 'Search Custom Emoji',\n                            }}\n                            onChange={this.onSearchChange}\n                            style={style.search}\n                        />\n                    </div>\n                </div>\n                <span className='backstage-list__help'>\n                    <p>\n                        <FormattedMessage\n                            id='emoji_list.help'\n                            defaultMessage=\"Custom emoji are available to everyone on your server. Type ':' followed by two characters in a message box to bring up the emoji selection menu.\"\n                        />\n                    </p>\n                    <p>\n                        <FormattedMessage\n                            id='emoji_list.help2'\n                            defaultMessage=\"Tip: If you add #, ##, or ### as the first character on a new line containing emoji, you can use larger sized emoji. To try it out, send a message such as: '# :smile:'.\"\n                        />\n                    </p>\n                </span>\n                <div className='backstage-list'>\n                    <table className='emoji-list__table'>\n                        <thead>\n                            <tr className='backstage-list__item emoji-list__table-header'>\n                                <th className='emoji-list__name'>\n                                    <FormattedMessage\n                                        id='emoji_list.name'\n                                        defaultMessage='Name'\n                                    />\n                                </th>\n                                <th className='emoji-list__image'>\n                                    <FormattedMessage\n                                        id='emoji_list.image'\n                                        defaultMessage='Image'\n                                    />\n                                </th>\n                                <th className='emoji-list__creator'>\n                                    <FormattedMessage\n                                        id='emoji_list.creator'\n                                        defaultMessage='Creator'\n                                    />\n                                </th>\n                                <th className='emoji-list_actions'>\n                                    <FormattedMessage\n                                        id='emoji_list.actions'\n                                        defaultMessage='Actions'\n                                    />\n                                </th>\n                            </tr>\n                        </thead>\n                        <tbody>{emojis}</tbody>\n                    </table>\n                </div>\n                <div className='filter-controls pt-3'>\n                    {previousButton}\n                    {nextButton}\n                </div>\n            </div>\n        );\n    }\n}\n\nconst style = {\n    search: {flexGrow: 0, flexShrink: 0},\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {ActionCreatorsMapObject, bindActionCreators, Dispatch} from 'redux';\nimport {getCustomEmojiIdsSortedByName} from 'mattermost-redux/selectors/entities/emojis';\nimport {ActionFunc, GenericAction} from 'mattermost-redux/types/actions';\nimport {getCustomEmojis, searchCustomEmojis} from 'mattermost-redux/actions/emojis';\nimport {GlobalState} from 'mattermost-redux/types/store';\nimport {CustomEmoji} from 'mattermost-redux/types/emojis';\nimport {ServerError} from 'mattermost-redux/types/errors';\n\nimport EmojiList from './emoji_list';\n\ntype Actions = {\n    getCustomEmojis: (page?: number, perPage?: number, sort?: string, loadUsers?: boolean) => Promise<{ data: CustomEmoji[]; error: ServerError }>;\n    searchCustomEmojis: (term: string, options: any, loadUsers: boolean) => Promise<{ data: CustomEmoji[]; error: ServerError }>;\n}\n\nfunction mapStateToProps(state: GlobalState) {\n    return {\n        emojiIds: getCustomEmojiIdsSortedByName(state) || [],\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<GenericAction>) {\n    return {\n        actions: bindActionCreators<ActionCreatorsMapObject<ActionFunc>, Actions>({\n            getCustomEmojis,\n            searchCustomEmojis,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiList);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport Permissions from 'mattermost-redux/constants/permissions';\nimport {Client4} from 'mattermost-redux/client';\nimport {CustomEmoji} from 'mattermost-redux/types/emojis';\nimport {ActionFunc} from 'mattermost-redux/types/actions';\n\nimport DeleteEmoji from 'components/emoji/delete_emoji_modal';\nimport AnyTeamPermissionGate from 'components/permissions_gates/any_team_permission_gate';\n\nexport type Props = {\n    emoji: CustomEmoji;\n    emojiId?: string;\n    currentUserId: string;\n    creatorDisplayName: string;\n    creatorUsername?: string;\n    onDelete?: (emojiId: string) => void;\n    actions: {\n        deleteCustomEmoji: (emojiId: string) => ActionFunc;\n    };\n}\n\nexport default class EmojiListItem extends React.PureComponent<Props> {\n    static defaultProps = {\n        emoji: {} as CustomEmoji,\n        currentUserId: '',\n        creatorDisplayName: '',\n    }\n\n    handleDelete = (): void => {\n        if (this.props.onDelete) {\n            this.props.onDelete(this.props.emoji.id);\n        }\n\n        this.props.actions.deleteCustomEmoji(this.props.emoji.id);\n    }\n\n    render(): JSX.Element {\n        const emoji = this.props.emoji;\n        const creatorUsername = this.props.creatorUsername;\n        let creatorDisplayName = this.props.creatorDisplayName;\n\n        if (creatorUsername && creatorUsername !== creatorDisplayName) {\n            creatorDisplayName += ' (@' + creatorUsername + ')';\n        }\n\n        let deleteButton: JSX.Element;\n        if (emoji.creator_id === this.props.currentUserId) {\n            deleteButton = (\n                <AnyTeamPermissionGate permissions={[Permissions.DELETE_EMOJIS]}>\n                    <DeleteEmoji onDelete={this.handleDelete}/>\n                </AnyTeamPermissionGate>\n            );\n        } else {\n            deleteButton = (\n                <AnyTeamPermissionGate permissions={[Permissions.DELETE_EMOJIS]}>\n                    <AnyTeamPermissionGate permissions={[Permissions.DELETE_OTHERS_EMOJIS]}>\n                        <DeleteEmoji onDelete={this.handleDelete}/>\n                    </AnyTeamPermissionGate>\n                </AnyTeamPermissionGate>\n            );\n        }\n\n        return (\n            <tr className='backstage-list__item'>\n                <td className='emoji-list__name'>\n                    {':' + emoji.name + ':'}\n                </td>\n                <td className='emoji-list__image'>\n                    <span\n                        className='emoticon'\n                        style={{backgroundImage: 'url(' + Client4.getCustomEmojiImageUrl(emoji.id) + ')'}}\n                    />\n                </td>\n                <td className='emoji-list__creator'>\n                    {creatorDisplayName}\n                </td>\n                <td className='emoji-list-item_actions'>\n                    {deleteButton}\n                </td>\n            </tr>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators, Dispatch} from 'redux';\n\nimport {getUser, getCurrentUserId} from 'mattermost-redux/selectors/entities/users';\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\n\nimport {deleteCustomEmoji} from 'mattermost-redux/actions/emojis';\n\nimport {GenericAction} from 'mattermost-redux/types/actions';\n\nimport {getDisplayNameByUser} from 'utils/utils';\n\nimport {GlobalState} from '../../../types/store';\n\nimport EmojiListItem, {Props} from './emoji_list_item';\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const emoji = state.entities.emojis.customEmoji[ownProps.emojiId!];\n    const creator = getUser(state, emoji.creator_id);\n\n    return {\n        emoji,\n        creatorDisplayName: getDisplayNameByUser(state, creator),\n        creatorUsername: creator ? creator.username : '',\n        currentUserId: getCurrentUserId(state),\n        currentTeam: getCurrentTeam(state),\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<GenericAction>) {\n    return {\n        actions: bindActionCreators({\n            deleteCustomEmoji,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiListItem);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport Permissions from 'mattermost-redux/constants/permissions';\n\nimport * as Utils from 'utils/utils.jsx';\nimport AnyTeamPermissionGate from 'components/permissions_gates/any_team_permission_gate';\n\nimport EmojiList from './emoji_list';\n\ntype Props = {\n    teamId: string;\n    teamName?: string;\n    teamDisplayName?: string;\n    siteName?: string;\n    scrollToTop(): void;\n    actions: {\n        loadRolesIfNeeded(roles: Iterable<string>): void;\n    };\n}\n\nexport default class EmojiPage extends React.PureComponent<Props> {\n    static defaultProps = {\n        teamName: '',\n        teamDisplayName: '',\n        siteName: '',\n    }\n\n    componentDidMount() {\n        this.updateTitle();\n        this.props.actions.loadRolesIfNeeded(['system_admin', 'team_admin', 'system_user', 'team_user']);\n    }\n\n    updateTitle = () => {\n        document.title = Utils.localizeMessage('custom_emoji.header', 'Custom Emoji') + ' - ' + this.props.teamDisplayName + ' ' + this.props.siteName;\n    }\n\n    componentDidUpdate(prevProps: Props) {\n        if (this.props.siteName !== prevProps.siteName) {\n            this.updateTitle();\n        }\n    }\n\n    render() {\n        return (\n            <div className='backstage-content emoji-list'>\n                <div className='backstage-header'>\n                    <h1>\n                        <FormattedMessage\n                            id='emoji_list.header'\n                            defaultMessage='Custom Emoji'\n                        />\n                    </h1>\n                    <AnyTeamPermissionGate permissions={[Permissions.CREATE_EMOJIS]}>\n                        <Link\n                            className='add-link'\n                            to={'/' + this.props.teamName + '/emoji/add'}\n                        >\n                            <button\n                                type='button'\n                                className='btn btn-primary'\n                            >\n                                <FormattedMessage\n                                    id='emoji_list.add'\n                                    defaultMessage='Add Custom Emoji'\n                                />\n                            </button>\n                        </Link>\n                    </AnyTeamPermissionGate>\n                </div>\n                <EmojiList scrollToTop={this.props.scrollToTop}/>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators, Dispatch} from 'redux';\n\nimport {getCurrentTeam} from 'mattermost-redux/selectors/entities/teams';\nimport {loadRolesIfNeeded} from 'mattermost-redux/actions/roles';\n\nimport {GlobalState} from 'types/store';\n\nimport EmojiPage from 'components/emoji/emoji_page';\n\nfunction mapStateToProps(state: GlobalState) {\n    const team = getCurrentTeam(state) || {};\n\n    return {\n        teamId: team.id,\n        teamName: team.name,\n        teamDisplayName: team.display_name,\n        siteName: state.entities.general.config.SiteName,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadRolesIfNeeded,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EmojiPage);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport Constants from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport LocalizedInput from 'components/localized_input/localized_input';\n\nimport {t} from 'utils/i18n.jsx';\n\nconst REQUEST_POST = 'P';\nconst REQUEST_GET = 'G';\n\nexport default class AbstractCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The header text to render, has id and defaultMessage\n        */\n        header: PropTypes.object.isRequired,\n\n        /**\n        * The footer text to render, has id and defaultMessage\n        */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n         * Any extra component/node to render\n         */\n        renderExtra: PropTypes.node.isRequired,\n\n        /**\n        * The server error text after a failed action\n        */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n        * The Command used to set the initial state\n        */\n        initialCommand: PropTypes.object,\n\n        /**\n        * The async function to run when the action button is pressed\n        */\n        action: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = this.getStateFromCommand(this.props.initialCommand || {});\n    }\n\n    getStateFromCommand = (command) => {\n        return {\n            displayName: command.display_name || '',\n            description: command.description || '',\n            trigger: command.trigger || '',\n            url: command.url || '',\n            method: command.method || REQUEST_POST,\n            username: command.username || '',\n            iconUrl: command.icon_url || '',\n            autocomplete: command.auto_complete || false,\n            autocompleteHint: command.auto_complete_hint || '',\n            autocompleteDescription: command.auto_complete_desc || '',\n            saving: false,\n            clientError: null,\n        };\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        let triggerWord = this.state.trigger.trim().toLowerCase();\n        if (triggerWord.indexOf('/') === 0) {\n            triggerWord = triggerWord.substr(1);\n        }\n\n        const command = {\n            display_name: this.state.displayName,\n            description: this.state.description,\n            trigger: triggerWord,\n            url: this.state.url.trim(),\n            method: this.state.method,\n            username: this.state.username,\n            icon_url: this.state.iconUrl,\n            auto_complete: this.state.autocomplete,\n            team_id: this.props.team.id,\n        };\n\n        if (command.auto_complete) {\n            command.auto_complete_desc = this.state.autocompleteDescription;\n            command.auto_complete_hint = this.state.autocompleteHint;\n        }\n\n        if (!command.trigger) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerRequired'\n                        defaultMessage='A trigger word is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (command.trigger.indexOf('/') === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidSlash'\n                        defaultMessage='A trigger word cannot begin with a /'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (command.trigger.indexOf(' ') !== -1) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidSpace'\n                        defaultMessage='A trigger word must not contain spaces'\n                    />\n                ),\n            });\n            return;\n        }\n\n        if (command.trigger.length < Constants.MIN_TRIGGER_LENGTH ||\n            command.trigger.length > Constants.MAX_TRIGGER_LENGTH) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.triggerInvalidLength'\n                        defaultMessage='A trigger word must contain between {min} and {max} characters'\n                        values={{\n                            min: Constants.MIN_TRIGGER_LENGTH,\n                            max: Constants.MAX_TRIGGER_LENGTH,\n                        }}\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!command.url) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_command.urlRequired'\n                        defaultMessage='A request URL is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        this.props.action(command).then(() => this.setState({saving: false}));\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateTrigger = (e) => {\n        this.setState({\n            trigger: e.target.value,\n        });\n    }\n\n    updateUrl = (e) => {\n        this.setState({\n            url: e.target.value,\n        });\n    }\n\n    updateMethod = (e) => {\n        this.setState({\n            method: e.target.value,\n        });\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateIconUrl = (e) => {\n        this.setState({\n            iconUrl: e.target.value,\n        });\n    }\n\n    updateAutocomplete = (e) => {\n        this.setState({\n            autocomplete: e.target.checked,\n        });\n    }\n\n    updateAutocompleteHint = (e) => {\n        this.setState({\n            autocompleteHint: e.target.value,\n        });\n    }\n\n    updateAutocompleteDescription = (e) => {\n        this.setState({\n            autocompleteDescription: e.target.value,\n        });\n    }\n\n    render() {\n        let autocompleteHint = null;\n        let autocompleteDescription = null;\n\n        if (this.state.autocomplete) {\n            autocompleteHint = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='autocompleteHint'\n                    >\n                        <FormattedMessage\n                            id='add_command.autocompleteHint'\n                            defaultMessage='Autocomplete Hint'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <LocalizedInput\n                            id='autocompleteHint'\n                            type='text'\n                            maxLength='1024'\n                            className='form-control'\n                            value={this.state.autocompleteHint}\n                            onChange={this.updateAutocompleteHint}\n                            placeholder={{id: t('add_command.autocompleteHint.placeholder'), defaultMessage: 'Example: [Patient Name]'}}\n                        />\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_command.autocompleteHint.help'\n                                defaultMessage='(Optional) Specify the arguments associated with your slash command. These are displayed as help on the autocomplete list.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            );\n\n            autocompleteDescription = (\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='autocompleteDescription'\n                    >\n                        <FormattedMessage\n                            id='add_command.autocompleteDescription'\n                            defaultMessage='Autocomplete Description'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <LocalizedInput\n                            id='description'\n                            type='text'\n                            maxLength='128'\n                            className='form-control'\n                            value={this.state.autocompleteDescription}\n                            onChange={this.updateAutocompleteDescription}\n                            placeholder={{id: t('add_command.autocompleteDescription.placeholder'), defaultMessage: 'Example: \"Returns search results for patient records\"'}}\n                        />\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_command.autocompleteDescription.help'\n                                defaultMessage='(Optional) Describe your slash command for the autocomplete list.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/integrations/commands'}>\n                        <FormattedMessage\n                            id='installed_command.header'\n                            defaultMessage='Slash Commands'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={this.props.header.id}\n                        defaultMessage={this.props.header.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_command.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the slash command settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_command.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='128'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.description.help'\n                                        defaultMessage='Describe your incoming webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='trigger'\n                            >\n                                <FormattedMessage\n                                    id='add_command.trigger'\n                                    defaultMessage='Command Trigger Word'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='trigger'\n                                    type='text'\n                                    maxLength={Constants.MAX_TRIGGER_LENGTH}\n                                    className='form-control'\n                                    value={this.state.trigger}\n                                    onChange={this.updateTrigger}\n                                    placeholder={{id: t('add_command.trigger.placeholder'), defaultMessage: 'Command trigger e.g. \"hello\" not including the slash'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.help'\n                                        defaultMessage='Specify a trigger word that is not a built-in command, does not contain spaces, and does not begin with the slash character.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.helpExamples'\n                                        defaultMessage='Examples: client, employee, patient, weather'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.trigger.helpReserved'\n                                        defaultMessage='Reserved: {link}'\n                                        values={{\n                                            link: (\n                                                <a\n                                                    href='https://docs.mattermost.com/help/messaging/executing-commands.html#built-in-commands'\n                                                    target='_blank'\n                                                    rel='noopener noreferrer'\n                                                >\n                                                    <FormattedMessage\n                                                        id='add_command.trigger.helpReservedLinkText'\n                                                        defaultMessage='See built-in slash commands'\n                                                    />\n                                                </a>\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='url'\n                            >\n                                <FormattedMessage\n                                    id='add_command.url'\n                                    defaultMessage='Request URL'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='url'\n                                    type='text'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.url}\n                                    onChange={this.updateUrl}\n                                    placeholder={{id: t('add_command.url.placeholder'), defaultMessage: 'Must start with http:// or https://'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.url.help'\n                                        defaultMessage='Specify the callback URL to receive the HTTP POST or GET event request when the slash command is run.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='method'\n                            >\n                                <FormattedMessage\n                                    id='add_command.method'\n                                    defaultMessage='Request Method'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    id='method'\n                                    className='form-control'\n                                    value={this.state.method}\n                                    onChange={this.updateMethod}\n                                >\n                                    <option value={REQUEST_POST}>\n                                        {Utils.localizeMessage('add_command.method.post', 'POST')}\n                                    </option>\n                                    <option value={REQUEST_GET}>\n                                        {Utils.localizeMessage('add_command.method.get', 'GET')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.method.help'\n                                        defaultMessage='Specify the type of request, either POST or GET, sent to the endpoint that Mattermost hits to reach your application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='username'\n                            >\n                                <FormattedMessage\n                                    id='add_command.username'\n                                    defaultMessage='Response Username'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='username'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.username}\n                                    onChange={this.updateUsername}\n                                    placeholder={{id: t('add_command.username.placeholder'), defaultMessage: 'Username'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.username.help'\n                                        defaultMessage='(Optional) Specify the name to use when posting responses for this slash command. Usernames can be up to 22 characters, and contain lowercase letters, numbers, and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, your Mattermost username is used.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='iconUrl'\n                            >\n                                <FormattedMessage\n                                    id='add_command.iconUrl'\n                                    defaultMessage='Response Icon'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <LocalizedInput\n                                    id='iconUrl'\n                                    type='text'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.iconUrl}\n                                    onChange={this.updateIconUrl}\n                                    placeholder={{id: t('add_command.iconUrl.placeholder'), defaultMessage: 'https://www.example.com/myicon.png'}}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.iconUrl.help'\n                                        defaultMessage='(Optional) Enter the URL of a .png or .jpg file to use as the icon when posting responses to this slash command. The file must be at least 128 pixels by 128 pixels. If left blank, your profile picture is used.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='autocomplete'\n                            >\n                                <FormattedMessage\n                                    id='add_command.autocomplete'\n                                    defaultMessage='Autocomplete'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <input\n                                    id='autocomplete'\n                                    type='checkbox'\n                                    checked={this.state.autocomplete}\n                                    onChange={this.updateAutocomplete}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_command.autocomplete.help'\n                                        defaultMessage='(Optional) Show your slash command on the autocomplete list when someone types \"/\" in the input box.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        {autocompleteHint}\n                        {autocompleteDescription}\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={'/' + this.props.team.name + '/integrations/commands'}\n                            >\n                                <FormattedMessage\n                                    id='add_command.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={Utils.localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveCommand'\n                            >\n                                <FormattedMessage\n                                    id={this.props.footer.id}\n                                    defaultMessage={this.props.footer.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {this.props.renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport ChannelSelect from 'components/channel_select';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport {localizeMessage} from 'utils/utils.jsx';\n\nexport default class AbstractIncomingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The header text to render, has id and defaultMessage\n        */\n        header: PropTypes.object.isRequired,\n\n        /**\n        * The footer text to render, has id and defaultMessage\n        */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n        * The server error text after a failed action\n        */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n        * The hook used to set the initial state\n        */\n        initialHook: PropTypes.object,\n\n        /**\n        * Whether to allow configuration of the default post username.\n        */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post icon.\n        */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n\n        /**\n        * The async function to run when the action button is pressed\n        */\n        action: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = this.getStateFromHook(this.props.initialHook || {});\n    }\n\n    getStateFromHook = (hook) => {\n        return {\n            displayName: hook.display_name || '',\n            description: hook.description || '',\n            channelId: hook.channel_id || '',\n            channelLocked: hook.channel_locked || false,\n            username: hook.username || '',\n            iconURL: hook.icon_url || '',\n            saving: false,\n            serverError: '',\n            clientError: null,\n        };\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            serverError: '',\n            clientError: '',\n        });\n\n        if (!this.state.channelId) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_incoming_webhook.channelRequired'\n                        defaultMessage='A valid channel is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const hook = {\n            channel_id: this.state.channelId,\n            channel_locked: this.state.channelLocked,\n            display_name: this.state.displayName,\n            description: this.state.description,\n            username: this.state.username,\n            icon_url: this.state.iconURL,\n        };\n\n        this.props.action(hook).then(() => this.setState({saving: false}));\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateChannelId = (e) => {\n        this.setState({\n            channelId: e.target.value,\n        });\n    }\n\n    updateChannelLocked = (e) => {\n        this.setState({\n            channelLocked: e.target.checked,\n        });\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateIconURL = (e) => {\n        this.setState({\n            iconURL: e.target.value,\n        });\n    }\n\n    render() {\n        var headerToRender = this.props.header;\n        var footerToRender = this.props.footer;\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/incoming_webhooks`}>\n                        <FormattedMessage\n                            id='installed_incoming_webhooks.header'\n                            defaultMessage='Incoming Webhooks'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the webhook settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='500'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.description.help'\n                                        defaultMessage='Describe your incoming webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelId'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.channel'\n                                    defaultMessage='Channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <ChannelSelect\n                                    id='channelId'\n                                    value={this.state.channelId}\n                                    onChange={this.updateChannelId}\n                                    selectOpen={true}\n                                    selectPrivate={true}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.channel.help'\n                                        defaultMessage='This is the default public or private channel that receives the webhook payloads.  When setting up the webhook, you must belong to the private channel.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelLocked'\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.channelLocked'\n                                    defaultMessage='Lock to this channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <input\n                                    id='channelLocked'\n                                    type='checkbox'\n                                    checked={this.state.channelLocked}\n                                    onChange={this.updateChannelLocked}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.channelLocked.help'\n                                        defaultMessage='If set, the incoming webhook can post only to the selected channel.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        { this.props.enablePostUsernameOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='username'\n                                >\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.username'\n                                        defaultMessage='Username'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='username'\n                                        type='text'\n                                        maxLength='22'\n                                        className='form-control'\n                                        value={this.state.username}\n                                        onChange={this.updateUsername}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_incoming_webhook.username.help'\n                                            defaultMessage='Specify the username this integration will post as. Usernames can be up to 22 characters, and can contain lowercase letters, numbers and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, the name specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        { this.props.enablePostIconOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='iconURL'\n                                >\n                                    <FormattedMessage\n                                        id='add_incoming_webhook.icon_url'\n                                        defaultMessage='Profile Picture'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='iconURL'\n                                        type='text'\n                                        maxLength='1024'\n                                        className='form-control'\n                                        value={this.state.iconURL}\n                                        onChange={this.updateIconURL}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_incoming_webhook.icon_url.help'\n                                            defaultMessage='Enter the URL of a .png or .jpg file for the profile picture of this integration when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/incoming_webhooks`}\n                            >\n                                <FormattedMessage\n                                    id='add_incoming_webhook.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveWebhook'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport {localizeMessage} from 'utils/utils.jsx';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\nimport SystemPermissionGate from 'components/permissions_gates/system_permission_gate';\n\nexport default class AbstractOAuthApp extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The header text to render, has id and defaultMessage\n        */\n        header: PropTypes.object.isRequired,\n\n        /**\n        * The footer text to render, has id and defaultMessage\n        */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n         * Any extra component/node to render\n         */\n        renderExtra: PropTypes.node.isRequired,\n\n        /**\n        * The server error text after a failed action\n        */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n        * The OAuthApp used to set the initial state\n        */\n        initialApp: PropTypes.object,\n\n        /**\n        * The async function to run when the action button is pressed\n        */\n        action: PropTypes.func.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.image = new Image();\n        this.image.onload = this.imageLoaded;\n        this.icon_url = React.createRef();\n        this.state = this.getStateFromApp(this.props.initialApp || {});\n    }\n\n    getStateFromApp = (app) => {\n        return {\n            name: app.name || '',\n            description: app.description || '',\n            homepage: app.homepage || '',\n            icon_url: app.icon_url || '',\n            callbackUrls: app.callback_urls ? app.callback_urls.join('\\n') : '',\n            is_trusted: app.is_trusted || false,\n            has_icon: Boolean(app.icon_url),\n            saving: false,\n            clientError: null,\n        };\n    }\n\n    imageLoaded = () => {\n        this.setState({\n            has_icon: true,\n            icon_url: this.icon_url.current.value,\n        });\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        if (!this.state.name) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.nameRequired'\n                        defaultMessage='Name for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!this.state.description) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.descriptionRequired'\n                        defaultMessage='Description for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        if (!this.state.homepage) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.homepageRequired'\n                        defaultMessage='Homepage for the OAuth 2.0 application is required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const callbackUrls = [];\n        for (let callbackUrl of this.state.callbackUrls.split('\\n')) {\n            callbackUrl = callbackUrl.trim();\n\n            if (callbackUrl.length > 0) {\n                callbackUrls.push(callbackUrl);\n            }\n        }\n\n        if (callbackUrls.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_oauth_app.callbackUrlsRequired'\n                        defaultMessage='One or more callback URLs are required.'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const app = {\n            name: this.state.name,\n            callback_urls: callbackUrls,\n            homepage: this.state.homepage,\n            description: this.state.description,\n            is_trusted: this.state.is_trusted,\n            icon_url: this.state.icon_url,\n        };\n\n        this.props.action(app).then(() => this.setState({saving: false}));\n    }\n\n    updateName = (e) => {\n        this.setState({\n            name: e.target.value,\n        });\n    }\n\n    updateTrusted = (e) => {\n        this.setState({\n            is_trusted: e.target.value === 'true',\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateHomepage = (e) => {\n        this.setState({\n            homepage: e.target.value,\n        });\n    }\n\n    updateIconUrl = (e) => {\n        this.setState({\n            has_icon: false,\n            icon_url: e.target.value,\n        });\n        this.image.src = e.target.value;\n    }\n\n    updateCallbackUrls = (e) => {\n        this.setState({\n            callbackUrls: e.target.value,\n        });\n    }\n\n    render() {\n        const headerToRender = this.props.header;\n        const footerToRender = this.props.footer;\n        const renderExtra = this.props.renderExtra;\n\n        let icon;\n        if (this.state.has_icon) {\n            icon = (\n                <div className='integration__icon'>\n                    <img\n                        alt={'integration icon'}\n                        src={this.state.icon_url}\n                    />\n                </div>\n            );\n        }\n\n        const trusted = (\n            <SystemPermissionGate permissions={[Permissions.MANAGE_SYSTEM]}>\n                <div className='form-group'>\n                    <label\n                        className='control-label col-sm-4'\n                        htmlFor='is_trusted'\n                    >\n                        <FormattedMessage\n                            id='installed_oauth_apps.trusted'\n                            defaultMessage='Is Trusted'\n                        />\n                    </label>\n                    <div className='col-md-5 col-sm-8'>\n                        <label className='radio-inline'>\n                            <input\n                                type='radio'\n                                value='true'\n                                name='is_trusted'\n                                checked={this.state.is_trusted}\n                                onChange={this.updateTrusted}\n                            />\n                            <FormattedMessage\n                                id='installed_oauth_apps.trusted.yes'\n                                defaultMessage='Yes'\n                            />\n                        </label>\n                        <label className='radio-inline'>\n                            <input\n                                type='radio'\n                                value='false'\n                                name='is_trusted'\n                                checked={!this.state.is_trusted}\n                                onChange={this.updateTrusted}\n                            />\n                            <FormattedMessage\n                                id='installed_oauth_apps.trusted.no'\n                                defaultMessage='No'\n                            />\n                        </label>\n                        <div className='form__help'>\n                            <FormattedMessage\n                                id='add_oauth_app.trusted.help'\n                                defaultMessage='If true, the OAuth 2.0 application is considered trusted by the Mattermost server and does not require the user to accept authorization. If false, a window opens to ask the user to accept or deny the authorization.'\n                            />\n                        </div>\n                    </div>\n                </div>\n            </SystemPermissionGate>\n        );\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/oauth2-apps`}>\n                        <FormattedMessage\n                            id='installed_oauth_apps.header'\n                            defaultMessage='Installed OAuth2 Apps'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    {icon}\n                    <form className='form-horizontal'>\n                        {trusted}\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='name'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.name'\n                                    defaultMessage='Display Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='name'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.name}\n                                    onChange={this.updateName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.name.help'\n                                        defaultMessage='Specify the display name, of up to 64 characters, for your OAuth 2.0 application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='512'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.description.help'\n                                        defaultMessage='Describe your OAuth 2.0 application.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='homepage'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.homepage'\n                                    defaultMessage='Homepage'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='homepage'\n                                    type='url'\n                                    maxLength='256'\n                                    className='form-control'\n                                    value={this.state.homepage}\n                                    onChange={this.updateHomepage}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.homepage.help'\n                                        defaultMessage='This is the URL for the homepage of the OAuth 2.0 application. Depending on your server configuration, use HTTP or HTTPS in the URL.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='icon_url'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.iconUrl'\n                                    defaultMessage='Icon URL'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='icon_url'\n                                    ref={this.icon_url}\n                                    type='url'\n                                    maxLength='512'\n                                    className='form-control'\n                                    value={this.state.icon_url}\n                                    onChange={this.updateIconUrl}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.icon.help'\n                                        defaultMessage='(Optional) The URL of the image used for your OAuth 2.0 application. Make sure you use HTTP or HTTPS in your URL.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='callbackUrls'\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.callbackUrls'\n                                    defaultMessage='Callback URLs (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='callbackUrls'\n                                    rows='3'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.callbackUrls}\n                                    onChange={this.updateCallbackUrls}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_oauth_app.callbackUrls.help'\n                                        defaultMessage='The redirect URIs to which the service will redirect users after accepting or denying authorization of your application, and which will handle authorization codes or access tokens. Must be a valid URL and start with http:// or https://.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/oauth2-apps`}\n                            >\n                                <FormattedMessage\n                                    id='installed_oauth_apps.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveOauthApp'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {localizeMessage} from 'utils/utils.jsx';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport ChannelSelect from 'components/channel_select';\nimport FormError from 'components/form_error';\nimport SpinnerButton from 'components/spinner_button';\n\nexport default class AbstractOutgoingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n         * The current team\n         */\n        team: PropTypes.object.isRequired,\n\n        /**\n         * The header text to render, has id and defaultMessage\n         */\n        header: PropTypes.object.isRequired,\n\n        /**\n         * The footer text to render, has id and defaultMessage\n         */\n        footer: PropTypes.object.isRequired,\n\n        /**\n        * The spinner loading text to render, has id and defaultMessage\n        */\n        loading: PropTypes.object.isRequired,\n\n        /**\n         * Any extra component/node to render\n         */\n        renderExtra: PropTypes.node.isRequired,\n\n        /**\n         * The server error text after a failed action\n         */\n        serverError: PropTypes.string.isRequired,\n\n        /**\n         * The hook used to set the initial state\n         */\n        initialHook: PropTypes.object,\n\n        /**\n         * The async function to run when the action button is pressed\n         */\n        action: PropTypes.func.isRequired,\n\n        /**\n         * Whether to allow configuration of the default post username.\n         */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n         * Whether to allow configuration of the default post icon.\n         */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = this.getStateFromHook(this.props.initialHook || {});\n    }\n\n    getStateFromHook = (hook) => {\n        let triggerWords = '';\n        if (hook.trigger_words) {\n            let i = 0;\n            for (i = 0; i < hook.trigger_words.length; i++) {\n                triggerWords += hook.trigger_words[i] + '\\n';\n            }\n        }\n\n        let callbackUrls = '';\n        if (hook.callback_urls) {\n            let i = 0;\n            for (i = 0; i < hook.callback_urls.length; i++) {\n                callbackUrls += hook.callback_urls[i] + '\\n';\n            }\n        }\n\n        return {\n            displayName: hook.display_name || '',\n            description: hook.description || '',\n            contentType: hook.content_type || 'application/x-www-form-urlencoded',\n            channelId: hook.channel_id || '',\n            triggerWords,\n            triggerWhen: hook.trigger_when || 0,\n            callbackUrls,\n            saving: false,\n            clientError: null,\n            username: hook.username || '',\n            iconURL: hook.icon_url || '',\n        };\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault();\n\n        if (this.state.saving) {\n            return;\n        }\n\n        this.setState({\n            saving: true,\n            clientError: '',\n        });\n\n        const triggerWords = [];\n        if (this.state.triggerWords) {\n            for (let triggerWord of this.state.triggerWords.split('\\n')) {\n                triggerWord = triggerWord.trim();\n\n                if (triggerWord.length > 0) {\n                    triggerWords.push(triggerWord);\n                }\n            }\n        }\n\n        if (!this.state.channelId && triggerWords.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_outgoing_webhook.triggerWordsOrChannelRequired'\n                        defaultMessage='A valid channel or a list of trigger words is required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const callbackUrls = [];\n        for (let callbackUrl of this.state.callbackUrls.split('\\n')) {\n            callbackUrl = callbackUrl.trim();\n\n            if (callbackUrl.length > 0) {\n                callbackUrls.push(callbackUrl);\n            }\n        }\n\n        if (callbackUrls.length === 0) {\n            this.setState({\n                saving: false,\n                clientError: (\n                    <FormattedMessage\n                        id='add_outgoing_webhook.callbackUrlsRequired'\n                        defaultMessage='One or more callback URLs are required'\n                    />\n                ),\n            });\n\n            return;\n        }\n\n        const hook = {\n            team_id: this.props.team.id,\n            channel_id: this.state.channelId,\n            trigger_words: triggerWords,\n            trigger_when: parseInt(this.state.triggerWhen, 10),\n            callback_urls: callbackUrls,\n            display_name: this.state.displayName,\n            content_type: this.state.contentType,\n            description: this.state.description,\n            username: this.state.username,\n            icon_url: this.state.iconURL,\n        };\n\n        this.props.action(hook).then(() => this.setState({saving: false}));\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateContentType = (e) => {\n        this.setState({\n            contentType: e.target.value,\n        });\n    }\n\n    updateChannelId = (e) => {\n        this.setState({\n            channelId: e.target.value,\n        });\n    }\n\n    updateTriggerWords = (e) => {\n        this.setState({\n            triggerWords: e.target.value,\n        });\n    }\n\n    updateTriggerWhen = (e) => {\n        this.setState({\n            triggerWhen: e.target.value,\n        });\n    }\n\n    updateCallbackUrls = (e) => {\n        this.setState({\n            callbackUrls: e.target.value,\n        });\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateIconURL = (e) => {\n        this.setState({\n            iconURL: e.target.value,\n        });\n    }\n\n    render() {\n        const contentTypeOption1 = 'application/x-www-form-urlencoded';\n        const contentTypeOption2 = 'application/json';\n\n        var headerToRender = this.props.header;\n        var footerToRender = this.props.footer;\n        var renderExtra = this.props.renderExtra;\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/outgoing_webhooks`}>\n                        <FormattedMessage\n                            id='installed_outgoing_webhooks.header'\n                            defaultMessage='Outgoing Webhooks'\n                        />\n                    </Link>\n                    <FormattedMessage\n                        id={headerToRender.id}\n                        defaultMessage={headerToRender.defaultMessage}\n                    />\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.displayName'\n                                    defaultMessage='Title'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.displayName.help'\n                                        defaultMessage='Specify a title, of up to 64 characters, for the webhook settings page.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='500'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.description.help'\n                                        defaultMessage='Describe your outgoing webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='contentType'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.content_Type'\n                                    defaultMessage='Content Type'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.contentType}\n                                    onChange={this.updateContentType}\n                                >\n                                    <option\n                                        value={contentTypeOption1}\n                                    >\n                                        {contentTypeOption1}\n                                    </option>\n                                    <option\n                                        value={contentTypeOption2}\n                                    >\n                                        {contentTypeOption2}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help1'\n                                        defaultMessage='Specify the content type by which to send the request.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help2'\n                                        defaultMessage='For the server to encode the parameters in a URL format in the request body, select application/x-www-form-urlencoded.'\n                                    />\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.contentType.help3'\n                                        defaultMessage='For the server to format the request body as JSON, select application/json.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='channelId'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.channel'\n                                    defaultMessage='Channel'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <ChannelSelect\n                                    id='channelId'\n                                    value={this.state.channelId}\n                                    onChange={this.updateChannelId}\n                                    selectOpen={true}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.channel.help'\n                                        defaultMessage='This field is optional if you specify at least one trigger word. Specify the public channel that delivers the payload to the webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='triggerWords'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.triggerWords'\n                                    defaultMessage='Trigger Words (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='triggerWords'\n                                    rows='3'\n                                    maxLength='1000'\n                                    className='form-control'\n                                    value={this.state.triggerWords}\n                                    onChange={this.updateTriggerWords}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.triggerWords.help'\n                                        defaultMessage='Specify the trigger words that send an HTTP POST request to your application.  The trigger can be for the channel, the outgoing webhook, or both. If you select only Channel, trigger words are optional. If you select both, the message must match both values.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='triggerWords'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.triggerWordsTriggerWhen'\n                                    defaultMessage='Trigger When'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.triggerWhen}\n                                    onChange={this.updateTriggerWhen}\n                                >\n                                    <option\n                                        value='0'\n                                    >\n                                        {localizeMessage('add_outgoing_webhook.triggerWordsTriggerWhenFullWord', 'First word matches a trigger word exactly')}\n                                    </option>\n                                    <option\n                                        value='1'\n                                    >\n                                        {localizeMessage('add_outgoing_webhook.triggerWordsTriggerWhenStartsWith', 'First word starts with a trigger word')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.triggerWordsTriggerWhen.help'\n                                        defaultMessage='Specify when to trigger the outgoing webhook.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='callbackUrls'\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.callbackUrls'\n                                    defaultMessage='Callback URLs (One Per Line)'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <textarea\n                                    id='callbackUrls'\n                                    rows='3'\n                                    maxLength='1000'\n                                    className='form-control'\n                                    value={this.state.callbackUrls}\n                                    onChange={this.updateCallbackUrls}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.callbackUrls.help'\n                                        defaultMessage='Specify the URL that the messages will be sent to. If the URL is private, add it as a {link}.'\n                                        values={{\n                                            link: (\n                                                <a\n                                                    href='https://about.mattermost.com/default-allow-internal-connections-settings-documentation/'\n                                                    target='_blank'\n                                                    rel='noopener noreferrer'\n                                                >\n                                                    <FormattedMessage\n                                                        id='add_outgoing_webhook.callbackUrls.helpLinkText'\n                                                        defaultMessage='trusted internal connection'\n                                                    />\n                                                </a>\n                                            ),\n                                        }}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        {this.props.enablePostUsernameOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='username'\n                                >\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.username'\n                                        defaultMessage='Username'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='username'\n                                        type='text'\n                                        maxLength='22'\n                                        className='form-control'\n                                        value={this.state.username}\n                                        onChange={this.updateUsername}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_outgoing_webhook.username.help'\n                                            defaultMessage='Specify the username this integration will post as. Usernames can be up to 22 characters, and contain lowercase letters, numbers and the symbols \\\"-\\\", \\\"_\\\", and \\\".\\\". If left blank, the name specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        {this.props.enablePostIconOverride &&\n                            <div className='form-group'>\n                                <label\n                                    className='control-label col-sm-4'\n                                    htmlFor='iconURL'\n                                >\n                                    <FormattedMessage\n                                        id='add_outgoing_webhook.icon_url'\n                                        defaultMessage='Profile Picture'\n                                    />\n                                </label>\n                                <div className='col-md-5 col-sm-8'>\n                                    <input\n                                        id='iconURL'\n                                        type='text'\n                                        maxLength='1024'\n                                        className='form-control'\n                                        value={this.state.iconURL}\n                                        onChange={this.updateIconURL}\n                                    />\n                                    <div className='form__help'>\n                                        <FormattedMessage\n                                            id='add_outgoing_webhook.icon_url.help'\n                                            defaultMessage='Enter the URL of a .png or .jpg file for this integration to use as the profile picture when posting. The file should be at least 128 pixels by 128 pixels. If left blank, the profile picture specified by the webhook creator is used.'\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        }\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.props.serverError, this.state.clientError]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/outgoing_webhooks`}\n                            >\n                                <FormattedMessage\n                                    id='add_outgoing_webhook.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.saving}\n                                spinningText={localizeMessage(this.props.loading.id, this.props.loading.defaultMessage)}\n                                onClick={this.handleSubmit}\n                                id='saveWebhook'\n                            >\n                                <FormattedMessage\n                                    id={footerToRender.id}\n                                    defaultMessage={footerToRender.defaultMessage}\n                                />\n                            </SpinnerButton>\n                            {renderExtra}\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractCommand from '../abstract_command.jsx';\n\nconst HEADER = {id: t('integrations.add'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('add_command.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('add_command.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to add new command\n            */\n            addCommand: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addCommand = async (command) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.addCommand(command);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/commands/confirm?type=commands&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractCommand\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={''}\n                action={this.addCommand}\n                serverError={this.state.serverError}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {addCommand} from 'mattermost-redux/actions/integrations';\n\nimport AddCommand from './add_command.jsx';\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            addCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(AddCommand);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractIncomingWebhook from 'components/integrations/abstract_incoming_webhook.jsx';\n\nconst HEADER = {id: t('integrations.add'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('add_incoming_webhook.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('add_incoming_webhook.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddIncomingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post username.\n        */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n        * Whether to allow configuration of the default post icon.\n        */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to add a new incoming webhook\n            */\n            createIncomingHook: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addIncomingHook = async (hook) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.createIncomingHook(hook);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=incoming_webhooks&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractIncomingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n                action={this.addIncomingHook}\n                serverError={this.state.serverError}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {createIncomingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport AddIncomingWebhook from './add_incoming_webhook.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n\n    return {\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            createIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddIncomingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractOAuthApp from '../abstract_oauth_app.jsx';\n\nconst HEADER = {id: t('add_oauth_app.header'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('installed_oauth_apps.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('installed_oauth_apps.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddOAuthApp extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object,\n\n        /**\n        * The request state for addOAuthApp action. Contains status and error\n        */\n        addOAuthAppRequest: PropTypes.object.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to add new OAuthApp\n            */\n            addOAuthApp: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addOAuthApp = async (app) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.addOAuthApp(app);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=oauth2-apps&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractOAuthApp\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={''}\n                action={this.addOAuthApp}\n                serverError={this.state.serverError}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {addOAuthApp} from 'mattermost-redux/actions/integrations';\n\nimport AddOAuthApp from './add_oauth_app.jsx';\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            addOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(null, mapDispatchToProps)(AddOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractOutgoingWebhook from 'components/integrations/abstract_outgoing_webhook.jsx';\n\nconst HEADER = {id: t('integrations.add'), defaultMessage: 'Add'};\nconst FOOTER = {id: t('add_outgoing_webhook.save'), defaultMessage: 'Save'};\nconst LOADING = {id: t('add_outgoing_webhook.saving'), defaultMessage: 'Saving...'};\n\nexport default class AddOutgoingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n         * The current team\n         */\n        team: PropTypes.object.isRequired,\n\n        actions: PropTypes.shape({\n\n            /**\n             * The function to call to add a new outgoing webhook\n             */\n            createOutgoingHook: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n         * Whether to allow configuration of the default post username.\n         */\n        enablePostUsernameOverride: PropTypes.bool.isRequired,\n\n        /**\n         * Whether to allow configuration of the default post icon.\n         */\n        enablePostIconOverride: PropTypes.bool.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            serverError: '',\n        };\n    }\n\n    addOutgoingHook = async (hook) => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.createOutgoingHook(hook);\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=outgoing_webhooks&id=${data.id}`);\n            return;\n        }\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    render() {\n        return (\n            <AbstractOutgoingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={''}\n                action={this.addOutgoingHook}\n                serverError={this.state.serverError}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {createOutgoingHook} from 'mattermost-redux/actions/integrations';\n\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport AddOutgoingWebhook from './add_outgoing_webhook.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n    return {\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            createOutgoingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\nimport {FormattedMessage} from 'react-intl';\nimport {Tooltip} from 'react-bootstrap';\n\nimport * as UserUtils from 'mattermost-redux/utils/user_utils';\nimport {General} from 'mattermost-redux/constants';\n\nimport BotDefaultIcon from 'images/bot_default_icon.png';\n\nimport {browserHistory} from 'utils/browser_history';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport OverlayTrigger from 'components/overlay_trigger';\nimport SpinnerButton from 'components/spinner_button';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message.jsx';\nimport FormError from 'components/form_error';\nimport {AcceptedProfileImageTypes, Constants, ValidationErrors} from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\nimport * as FileUtils from 'utils/file_utils.jsx';\n\nconst roleOptionSystemAdmin = 'System Admin';\nconst roleOptionMember = 'Member';\n\nexport default class AddBot extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Only used for routing since backstage is team based.\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        *  Bot to edit (if editing)\n        */\n        bot: PropTypes.object,\n\n        /**\n        *  Bot user\n        */\n        user: PropTypes.object,\n\n        /**\n        *  Roles of the bot to edit (if editing)\n        */\n        roles: PropTypes.string,\n\n        /**\n        * Maximum upload file size (for bot account profile picture)\n        */\n        maxFileSize: PropTypes.number.isRequired,\n\n        /**\n         * Editing user has the MANAGE_SYSTEM permission\n        */\n        editingUserHasManageSystem: PropTypes.bool.isRequired,\n\n        /**\n        * Bot to edit\n        */\n        actions: PropTypes.shape({\n\n            /**\n            * Creates a new bot account.\n            */\n            createBot: PropTypes.func.isRequired,\n\n            /**\n            * Patches an existing bot account.\n            */\n            patchBot: PropTypes.func.isRequired,\n\n            /**\n            * Uploads a user profile image\n            */\n            uploadProfileImage: PropTypes.func.isRequired,\n\n            /**\n            * Set profile image to default\n            */\n            setDefaultProfileImage: PropTypes.func.isRequired,\n\n            /**\n            * For creating default access token\n            */\n            createUserAccessToken: PropTypes.func.isRequired,\n\n            /**\n            * For creating setting bot to system admin or special posting permissions\n            */\n            updateUserRoles: PropTypes.func.isRequired,\n        }),\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            error: '',\n            username: '',\n            displayName: '',\n            description: '',\n            adding: false,\n            image: BotDefaultIcon,\n            role: roleOptionMember,\n            postAll: false,\n            postChannels: false,\n        };\n\n        if (this.props.bot) {\n            this.state.username = this.props.bot.username;\n            this.state.displayName = this.props.bot.display_name;\n            this.state.description = this.props.bot.description;\n            this.state.role = UserUtils.isSystemAdmin(this.props.roles || '') ? roleOptionSystemAdmin : roleOptionMember;\n            this.state.postAll = UserUtils.hasPostAllRole(this.props.roles || '');\n            this.state.postChannels = UserUtils.hasPostAllPublicRole(this.props.roles || '');\n        }\n    }\n\n    updateUsername = (e) => {\n        this.setState({\n            username: e.target.value,\n        });\n    }\n\n    updateDisplayName = (e) => {\n        this.setState({\n            displayName: e.target.value,\n        });\n    }\n\n    updateDescription = (e) => {\n        this.setState({\n            description: e.target.value,\n        });\n    }\n\n    updateRole = (e) => {\n        this.setState({\n            role: e.target.value,\n        });\n    }\n\n    updatePostAll = (e) => {\n        this.setState({\n            postAll: e.target.checked,\n        });\n    }\n\n    updatePostChannels = (e) => {\n        this.setState({\n            postChannels: e.target.checked,\n        });\n    }\n\n    updatePicture = (e) => {\n        if (e.target.files && e.target.files[0]) {\n            const pictureFile = e.target.files[0];\n            this.previewBlob = URL.createObjectURL(pictureFile);\n\n            var reader = new FileReader();\n            reader.onload = (e2) => {\n                const orientation = FileUtils.getExifOrientation(e2.target.result);\n                const orientationStyles = FileUtils.getOrientationStyles(orientation);\n\n                this.setState({\n                    image: this.previewBlob,\n                    orientationStyles,\n                });\n            };\n            reader.readAsArrayBuffer(pictureFile);\n            e.target.value = null;\n            this.setState({pictureFile});\n        } else {\n            this.setState({pictureFile: null, image: null});\n        }\n    }\n\n    setDefault = () => {\n        this.setState({pictureFile: 'default', image: BotDefaultIcon});\n    }\n\n    updateRoles = async (data) => {\n        let roles = General.SYSTEM_USER_ROLE;\n\n        if (this.state.role === roleOptionSystemAdmin) {\n            roles += ' ' + General.SYSTEM_ADMIN_ROLE;\n        } else if (this.state.postAll) {\n            roles += ' ' + General.SYSTEM_POST_ALL_ROLE;\n        } else if (this.state.postChannels) {\n            roles += ' ' + General.SYSTEM_POST_ALL_PUBLIC_ROLE;\n        }\n\n        const rolesResult = await this.props.actions.updateUserRoles(data.user_id, roles);\n        if (rolesResult) {\n            return rolesResult.error;\n        }\n\n        return null;\n    }\n\n    handleSubmit = async (e) => {\n        e.preventDefault();\n\n        if (this.state.adding) {\n            return;\n        }\n\n        if (!this.state.username || this.state.username.length < 3) {\n            this.setState({\n                error: (\n                    <FormattedMessage\n                        id='bots.manage.add.invalid_username'\n                        defaultMessage='Usernames have to begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                    />\n                ),\n            });\n            return;\n        }\n\n        if (this.state.pictureFile) {\n            if (!AcceptedProfileImageTypes.includes(this.state.pictureFile.type)) {\n                this.setState({\n                    error: (\n                        <FormattedMessage\n                            id='user.settings.general.validImage'\n                            defaultMessage='Only BMP, JPG or PNG images may be used for profile pictures'\n                        />\n                    ),\n                });\n            } else if (this.state.pictureFile.size > this.props.maxFileSize) {\n                this.setState({\n                    error: (\n                        <FormattedMessage\n                            id='user.settings.general.imageTooLarge'\n                            defaultMessage='Unable to upload profile image. File is too large.'\n                        />\n                    ),\n                });\n            }\n        }\n\n        this.setState({\n            adding: true,\n            error: '',\n        });\n\n        const bot = {\n            username: this.state.username.toLowerCase().trim(),\n            display_name: this.state.displayName,\n            description: this.state.description,\n        };\n\n        let data;\n        let error;\n        if (this.props.bot) {\n            const result = await this.props.actions.patchBot(this.props.bot.user_id, bot);\n            if (result) {\n                data = result.data;\n                error = result.error;\n            } else {\n                error = Utils.localizeMessage('bot.edit_failed', 'Failed to edit bot');\n            }\n\n            if (!error) {\n                if (this.state.pictureFile && this.state.pictureFile !== 'default') {\n                    const imageResult = await this.props.actions.uploadProfileImage(data.user_id, this.state.pictureFile);\n                    error = imageResult.error;\n                } else if (this.state.pictureFile && this.state.pictureFile === 'default') {\n                    await this.props.actions.setDefaultProfileImage(data.user_id);\n                }\n            }\n\n            if (!error && data) {\n                error = this.updateRoles(data);\n            }\n\n            if (data) {\n                browserHistory.push(`/${this.props.team.name}/integrations/bots`);\n                return;\n            }\n        } else {\n            const usernameError = Utils.isValidBotUsername(bot.username);\n            if (usernameError) {\n                let errObj;\n                if (usernameError.id === ValidationErrors.INVALID_LAST_CHARACTER) {\n                    errObj = {\n                        adding: false,\n                        error: (\n                            <FormattedMessage\n                                id='bots.manage.add.invalid_last_char'\n                                defaultMessage='Bot usernames cannot have a period as the last character'\n                            />\n                        ),\n                    };\n                } else {\n                    errObj = {\n                        adding: false,\n                        error: (\n                            <FormattedMessage\n                                id='bots.manage.add.invalid_username'\n                                defaultMessage='Usernames must begin with a lowercase letter and be 3-22 characters long. You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                            />\n                        ),\n                    };\n                }\n                this.setState(errObj);\n                return;\n            }\n\n            const result = await this.props.actions.createBot(bot);\n            if (result) {\n                data = result.data;\n                error = result.error;\n            } else {\n                error = Utils.localizeMessage('bot.create_failed', 'Failed to create bot');\n            }\n\n            let token = '';\n            if (!error) {\n                if (this.state.pictureFile && this.state.pictureFile !== 'default') {\n                    await this.props.actions.uploadProfileImage(data.user_id, this.state.pictureFile);\n                } else {\n                    await this.props.actions.setDefaultProfileImage(data.user_id);\n                }\n                const tokenResult = await this.props.actions.createUserAccessToken(data.user_id,\n                    Utils.localizeMessage('bot.token.default.description', 'Default Token'),\n                );\n\n                // On error just skip the confirmation because we have a bot without a token.\n                if (!tokenResult || tokenResult.error) {\n                    browserHistory.push(`/${this.props.team.name}/integrations/bots`);\n                    return;\n                }\n\n                token = tokenResult.data.token;\n            }\n\n            if (!error && data) {\n                error = this.updateRoles(data);\n            }\n\n            if (data) {\n                browserHistory.push(`/${this.props.team.name}/integrations/confirm?type=bots&id=${data.user_id}&token=${token}`);\n                return;\n            }\n        }\n\n        this.setState({\n            adding: false,\n        });\n\n        if (error) {\n            this.setState({\n                error: error.message,\n            });\n        }\n    }\n\n    render() {\n        let subtitle = (\n            <FormattedMessage\n                id='bots.manage.add'\n                defaultMessage='Add'\n            />\n        );\n        let buttonText = (\n            <FormattedMessage\n                id='bots.manage.add.create'\n                defaultMessage='Create Bot Account'\n            />\n        );\n        let buttonActiveText = (\n            <FormattedMessage\n                id='bots.manage.add.creating'\n                defaultMessage='Creating...'\n            />\n        );\n\n        // If we are editing\n        if (this.props.bot) {\n            subtitle = (\n                <FormattedMessage\n                    id='bots.manage.edit'\n                    defaultMessage='Edit'\n                />\n            );\n            buttonText = (\n                <FormattedMessage\n                    id='bots.manage.edit.title'\n                    defaultMessage='Update'\n                />\n            );\n            buttonActiveText = (\n                <FormattedMessage\n                    id='bots.manage.edit.editing'\n                    defaultMessage='Updating...'\n                />\n            );\n        }\n\n        let imageURL = '';\n        let removeImageIcon = (\n            <OverlayTrigger\n                delayShow={Constants.OVERLAY_TIME_DELAY}\n                placement='right'\n                overlay={(\n                    <Tooltip id='removeIcon'>\n                        <FormattedMessage\n                            id='bot.remove_profile_picture'\n                            defaultMessage='Remove Bot Icon'\n                        />\n                    </Tooltip>\n                )}\n            >\n                <a\n                    className={'bot-profile__remove'}\n                    onClick={this.setDefault}\n                >\n                    <span>{'×'}</span>\n                </a>\n            </OverlayTrigger>\n        );\n        let imageStyles = null;\n        if (this.props.bot && !this.state.pictureFile) {\n            if (this.props.user) {\n                imageURL = Utils.imageURLForUser(this.props.user.id, this.props.user.last_picture_update);\n            } else {\n                imageURL = Utils.imageURLForUser(this.props.bot.user_id);\n            }\n        } else {\n            imageURL = this.state.image;\n            imageStyles = this.state.orientationStyles;\n            if (this.state.image === BotDefaultIcon) {\n                removeImageIcon = null;\n            }\n        }\n\n        return (\n            <div className='backstage-content'>\n                <BackstageHeader>\n                    <Link to={`/${this.props.team.name}/integrations/bots`}>\n                        <FormattedMessage\n                            id='bots.manage.header'\n                            defaultMessage='Bot Accounts'\n                        />\n                    </Link>\n                    {subtitle}\n                </BackstageHeader>\n                <div className='backstage-form'>\n                    <form\n                        className='form-horizontal'\n                        onSubmit={this.handleSubmit}\n                    >\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='username'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.username'\n                                    defaultMessage='Username'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='username'\n                                    type='text'\n                                    maxLength='22'\n                                    className='form-control'\n                                    value={this.state.username}\n                                    onChange={this.updateUsername}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.username.help'\n                                        defaultMessage='You can use lowercase letters, numbers, periods, dashes, and underscores.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='boticon'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.icon'\n                                    defaultMessage='Bot Icon'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <div className={'bot-img-container'}>\n                                    <img\n                                        className={'bot-img'}\n                                        alt={'bot image'}\n                                        src={imageURL}\n                                        style={imageStyles}\n                                    />\n                                    {removeImageIcon}\n                                </div>\n                                <div\n                                    className='btn btn-sm btn-primary btn-file sel-btn'\n                                >\n                                    <FormattedMessage\n                                        id='bots.image.upload'\n                                        defaultMessage='Upload Image'\n                                    />\n                                    <input\n                                        accept='.jpg,.png,.bmp'\n                                        type='file'\n                                        onChange={this.updatePicture}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='displayName'\n                            >\n                                <FormattedMessage\n                                    id='bots.add.displayName'\n                                    defaultMessage='Display Name'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='displayName'\n                                    type='text'\n                                    maxLength='64'\n                                    className='form-control'\n                                    value={this.state.displayName}\n                                    onChange={this.updateDisplayName}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.display_name.help'\n                                        defaultMessage={'(Optional) You can choose to display your bot\\'s full name rather than its username.'}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='description'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.description'\n                                    defaultMessage='Description'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <input\n                                    id='description'\n                                    type='text'\n                                    maxLength='1024'\n                                    className='form-control'\n                                    value={this.state.description}\n                                    onChange={this.updateDescription}\n                                />\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.description.help'\n                                        defaultMessage='(Optional) Let others know what this bot does.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='role'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.role'\n                                    defaultMessage='Role'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8'>\n                                <select\n                                    className='form-control'\n                                    value={this.state.role}\n                                    disabled={!this.props.editingUserHasManageSystem}\n                                    onChange={this.updateRole}\n                                >\n                                    <option\n                                        value={roleOptionMember}\n                                    >\n                                        {Utils.localizeMessage('bot.add.role.member', 'Member')}\n                                    </option>\n                                    <option\n                                        value={roleOptionSystemAdmin}\n                                    >\n                                        {Utils.localizeMessage('bot.add.role.admin', 'System Admin')}\n                                    </option>\n                                </select>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.role.help'\n                                        defaultMessage='Choose what role the bot should have.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='row bot-profile__section'>\n                            <div className='col-md-5 col-sm-8 col-sm-offset-4'>\n                                <FormattedMarkdownMessage\n                                    id='admin.manage_roles.additionalRoles'\n                                    defaultMessage='Select additional permissions for the account. [Read more about roles and permissions](!https://about.mattermost.com/default-permissions).'\n                                />\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='postAll'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.post_all'\n                                    defaultMessage='post:all'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <div className='checkbox no-padding'>\n                                    <label htmlFor='postAll'>\n                                        <input\n                                            id='postAll'\n                                            type='checkbox'\n                                            checked={this.state.postAll || this.state.role === roleOptionSystemAdmin}\n                                            onChange={this.updatePostAll}\n                                            disabled={!this.props.editingUserHasManageSystem || this.state.role === roleOptionSystemAdmin}\n                                        />\n                                        <FormattedMessage\n                                            id='bot.add.post_all.enabled'\n                                            defaultMessage='Enabled'\n                                        />\n                                    </label>\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.post_all.help'\n                                        defaultMessage='Bot will have access to post to all Mattermost channels including direct messages.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='form-group'>\n                            <label\n                                className='control-label col-sm-4'\n                                htmlFor='postChannels'\n                            >\n                                <FormattedMessage\n                                    id='bot.add.post_channels'\n                                    defaultMessage='post:channels'\n                                />\n                            </label>\n                            <div className='col-md-5 col-sm-8 checkbox'>\n                                <div className='checkbox no-padding'>\n                                    <label htmlFor='postChannels'>\n                                        <input\n                                            id='postChannels'\n                                            type='checkbox'\n                                            checked={this.state.postChannels || this.state.role === roleOptionSystemAdmin || this.state.postAll}\n                                            onChange={this.updatePostChannels}\n                                            disabled={!this.props.editingUserHasManageSystem || this.state.role === roleOptionSystemAdmin || this.state.postAll}\n                                        />\n                                        <FormattedMessage\n                                            id='bot.add.post_channels.enabled'\n                                            defaultMessage='Enabled'\n                                        />\n                                    </label>\n                                </div>\n                                <div className='form__help'>\n                                    <FormattedMessage\n                                        id='bot.add.post_channels.help'\n                                        defaultMessage='Bot will have access to post to all Mattermost public channels.'\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        <div className='backstage-form__footer'>\n                            <FormError\n                                type='backstage'\n                                errors={[this.state.error]}\n                            />\n                            <Link\n                                className='btn btn-link btn-sm'\n                                to={`/${this.props.team.name}/integrations/bots`}\n                            >\n                                <FormattedMessage\n                                    id='bots.manage.add.cancel'\n                                    defaultMessage='Cancel'\n                                />\n                            </Link>\n                            <SpinnerButton\n                                className='btn btn-primary'\n                                type='submit'\n                                spinning={this.state.adding}\n                                spinningText={buttonActiveText}\n                                onClick={this.handleSubmit}\n                                id='saveBot'\n                            >\n                                {buttonText}\n                            </SpinnerButton>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {updateUserRoles, uploadProfileImage, setDefaultProfileImage, createUserAccessToken} from 'mattermost-redux/actions/users';\nimport {createBot, patchBot} from 'mattermost-redux/actions/bots';\nimport {getBotAccounts} from 'mattermost-redux/selectors/entities/bots';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport AddBot from './add_bot.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const botId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const bots = getBotAccounts(state);\n    const bot = bots ? bots[botId] : null;\n    const user = bot ? getUser(state, bot.user_id) : null;\n    const roles = user ? user.roles : null;\n    return {\n        maxFileSize: parseInt(config.MaxFileSize, 10),\n        bot,\n        roles,\n        editingUserHasManageSystem: haveISystemPermission(state, {permission: Permissions.MANAGE_SYSTEM}),\n        user,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            createBot,\n            patchBot,\n            uploadProfileImage,\n            setDefaultProfileImage,\n            createUserAccessToken,\n            updateUserRoles,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddBot);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {Link} from 'react-router-dom';\n\nimport {FormattedMessage} from 'react-intl';\n\nimport ConfirmModal from 'components/confirm_modal';\nimport Markdown from 'components/markdown';\nimport SaveButton from 'components/save_button';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\nimport * as Utils from 'utils/utils.jsx';\n\nexport function matchesFilter(bot, filter, owner) {\n    if (!filter) {\n        return true;\n    }\n    const username = bot.username || '';\n    const description = bot.description || '';\n    const displayName = bot.display_name || '';\n\n    let ownerUsername = 'plugin';\n    if (owner && owner.username) {\n        ownerUsername = owner.username;\n    }\n    return !(username.toLowerCase().indexOf(filter) === -1 &&\n        displayName.toLowerCase().indexOf(filter) === -1 &&\n        description.toLowerCase().indexOf(filter) === -1 &&\n        ownerUsername.toLowerCase().indexOf(filter) === -1);\n}\n\nexport default class Bot extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Bot that we are displaying\n        */\n        bot: PropTypes.object.isRequired,\n\n        /**\n        * Owner of the bot we are displaying\n        */\n        owner: PropTypes.object,\n\n        /**\n        * User of the bot we are displaying\n        */\n        user: PropTypes.object,\n\n        /**\n        * The access tokens of the bot user\n        */\n        accessTokens: PropTypes.object.isRequired,\n\n        /**\n        * String used for filtering bot items\n        */\n        filter: PropTypes.string,\n\n        actions: PropTypes.shape({\n\n            /**\n            * Disable a bot\n            */\n            disableBot: PropTypes.func.isRequired,\n\n            /**\n            * Enable a bot\n            */\n            enableBot: PropTypes.func.isRequired,\n\n            /**\n            * Access token managment\n            */\n            createUserAccessToken: PropTypes.func.isRequired,\n            revokeUserAccessToken: PropTypes.func.isRequired,\n            enableUserAccessToken: PropTypes.func.isRequired,\n            disableUserAccessToken: PropTypes.func.isRequired,\n        }),\n\n        /**\n        *  Only used for routing since backstage is team based.\n        */\n        team: PropTypes.object.isRequired,\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            confirmingId: '',\n            creatingTokenState: 'CLOSED',\n            token: {},\n            error: '',\n        };\n    }\n\n    enableBot = () => {\n        this.props.actions.enableBot(this.props.bot.user_id);\n    }\n\n    disableBot = () => {\n        this.props.actions.disableBot(this.props.bot.user_id);\n    }\n\n    enableUserAccessToken = (id) => {\n        this.props.actions.enableUserAccessToken(id);\n    }\n\n    disableUserAccessToken = (id) => {\n        this.props.actions.disableUserAccessToken(id);\n    }\n\n    confirmRevokeToken = (id) => {\n        this.setState({confirmingId: id});\n    }\n\n    revokeTokenConfirmed = () => {\n        this.props.actions.revokeUserAccessToken(this.state.confirmingId);\n        this.closeConfirm();\n    }\n\n    closeConfirm = () => {\n        this.setState({confirmingId: ''});\n    }\n\n    openCreateToken = () => {\n        this.setState({\n            creatingTokenState: 'OPEN',\n            token: {\n                description: '',\n            },\n        });\n    }\n\n    closeCreateToken = () => {\n        this.setState({\n            creatingTokenState: 'CLOSED',\n            token: {\n                description: '',\n            },\n        });\n    }\n\n    handleUpdateDescription = (e) => {\n        this.setState({\n            token: Object.assign({}, this.state.token, {description: e.target.value}),\n        });\n    }\n\n    handleCreateToken = async (e) => {\n        e.preventDefault();\n\n        if (this.state.token.description === '') {\n            this.setState({error: (\n                <FormattedMessage\n                    id='bot.token.error.description'\n                    defaultMessage='Please enter a description.'\n                />\n            )});\n            return;\n        }\n\n        const {data, error} = await this.props.actions.createUserAccessToken(this.props.bot.user_id, this.state.token.description);\n        if (data) {\n            this.setState({creatingTokenState: 'CREATED', token: data});\n        } else if (error) {\n            this.setState({error: error.message});\n        }\n    }\n\n    render() {\n        const username = this.props.bot.username || '';\n        const description = this.props.bot.description || '';\n        const displayName = this.props.bot.display_name || '';\n\n        let ownerUsername = 'plugin';\n        if (this.props.owner && this.props.owner.username) {\n            ownerUsername = this.props.owner.username;\n        }\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n        if (!matchesFilter(this.props.bot, filter, this.props.owner)) {\n            return null;\n        }\n\n        const tokenList = [];\n        Object.values(this.props.accessTokens).forEach((token) => {\n            let activeLink;\n            let disableClass = '';\n            let disabledText;\n\n            if (token.is_active) {\n                activeLink = (\n                    <a\n                        name={token.id + '_deactivate'}\n                        href='#'\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.disableUserAccessToken(token.id);\n                        }}\n                    >\n                        <FormattedMessage\n                            id='user.settings.tokens.deactivate'\n                            defaultMessage='Disable'\n                        />\n                    </a>);\n            } else {\n                disableClass = 'light';\n                disabledText = (\n                    <span className='mr-2 light'>\n                        <FormattedMessage\n                            id='user.settings.tokens.deactivatedWarning'\n                            defaultMessage='(Disabled)'\n                        />\n                    </span>\n                );\n                activeLink = (\n                    <a\n                        name={token.id + '_activate'}\n                        href='#'\n                        onClick={(e) => {\n                            e.preventDefault();\n                            this.enableUserAccessToken(token.id);\n                        }}\n                    >\n                        <FormattedMessage\n                            id='user.settings.tokens.activate'\n                            defaultMessage='Enable'\n                        />\n                    </a>\n                );\n            }\n\n            tokenList.push(\n                <div\n                    key={token.id}\n                    className='bot-list__item'\n                >\n                    <div className='item-details__row d-flex justify-content-between'>\n                        <div className={disableClass}>\n                            <div className='whitespace--nowrap overflow--ellipsis'>\n                                <b>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.tokenDesc'\n                                        defaultMessage='Token Description: '\n                                    />\n                                </b>\n                                {token.description}\n                            </div>\n                            <div className='setting-box__token-id whitespace--nowrap overflow--ellipsis'>\n                                <b>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.tokenId'\n                                        defaultMessage='Token ID: '\n                                    />\n                                </b>\n                                {token.id}\n                            </div>\n                        </div>\n                        <div>\n                            {disabledText}\n                            {activeLink}\n                            {' - '}\n                            <a\n                                name={token.id + '_delete'}\n                                href='#'\n                                onClick={(e) => {\n                                    e.preventDefault();\n                                    this.confirmRevokeToken(token.id);\n                                }}\n                            >\n                                <FormattedMessage\n                                    id='user.settings.tokens.delete'\n                                    defaultMessage='Delete'\n                                />\n                            </a>\n                        </div>\n                    </div>\n                </div>,\n            );\n        });\n\n        let options;\n        if (ownerUsername !== 'plugin') {\n            options = (\n                <div className='item-actions'>\n                    <button\n                        id='createToken'\n                        className='style--none color--link'\n                        onClick={this.openCreateToken}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.create_token'\n                            defaultMessage='Create New Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/bots/edit?id=${this.props.bot.user_id}`}>\n                        <FormattedMessage\n                            id='bots.manage.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <button\n                        className='style--none color--link'\n                        onClick={this.disableBot}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.disable'\n                            defaultMessage='Disable'\n                        />\n                    </button>\n                </div>\n            );\n        }\n        if (this.props.bot.delete_at !== 0) {\n            options = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.enableBot}\n                    >\n                        <FormattedMessage\n                            id='bot.manage.enable'\n                            defaultMessage='Enable'\n                        />\n                    </button>\n                </div>\n            );\n        }\n\n        if (this.state.creatingTokenState === 'OPEN') {\n            tokenList.push(\n                <div\n                    key={'create'}\n                    className='bot-list__item'\n                >\n                    <div key={'create'}>\n                        <form\n                            className='form-horizontal'\n                            onSubmit={this.handleCreateToken}\n                        >\n                            <div className='row'>\n                                <label className='col-sm-auto control-label'>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.name'\n                                        defaultMessage='Token Description: '\n                                    />\n                                </label>\n                                <div className='col-sm-4'>\n                                    <input\n                                        autoFocus={true}\n                                        className='form-control form-sm'\n                                        type='text'\n                                        maxLength={64}\n                                        value={this.state.token.description}\n                                        onChange={this.handleUpdateDescription}\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <div className='pt-2 pb-2'>\n                                    <FormattedMessage\n                                        id='user.settings.tokens.nameHelp'\n                                        defaultMessage='Enter a description for your token to remember what it does.'\n                                    />\n                                </div>\n                                <label\n                                    id='clientError'\n                                    className='has-error is-empty'\n                                >\n                                    {this.state.error}\n                                </label>\n                                <div className='mt-2'>\n                                    <SaveButton\n                                        btnClass='btn-sm btn-primary'\n                                        savingMessage={\n                                            <FormattedMessage\n                                                id='user.settings.tokens.save'\n                                                defaultMessage='Save'\n                                            />\n                                        }\n                                        saving={false}\n                                    />\n                                    <button\n                                        className='btn btn-sm btn-link'\n                                        onClick={this.closeCreateToken}\n                                    >\n                                        <FormattedMessage\n                                            id='user.settings.tokens.cancel'\n                                            defaultMessage='Cancel'\n                                        />\n                                    </button>\n                                </div>\n                            </div>\n                        </form>\n                    </div>\n                </div>,\n            );\n        } else if (this.state.creatingTokenState === 'CREATED') {\n            tokenList.push(\n                <div\n                    key={'created'}\n                    className='bot-list__item alert alert-warning'\n                >\n                    <div className='mb-2'>\n                        <WarningIcon additionalClassName='mr-2'/>\n                        <FormattedMessage\n                            id='user.settings.tokens.copy'\n                            defaultMessage=\"Please copy the access token below. You won't be able to see it again!\"\n                        />\n                    </div>\n                    <div className='whitespace--nowrap overflow--ellipsis'>\n                        <FormattedMessage\n                            id='user.settings.tokens.name'\n                            defaultMessage='Token Description: '\n                        />\n                        {this.state.token.description}\n                    </div>\n                    <div className='whitespace--nowrap overflow--ellipsis'>\n                        <FormattedMessage\n                            id='user.settings.tokens.id'\n                            defaultMessage='Token ID: '\n                        />\n                        {this.state.token.id}\n                    </div>\n                    <strong className='word-break--all'>\n                        <FormattedMessage\n                            id='user.settings.tokens.token'\n                            defaultMessage='Access Token: '\n                        />\n                        {this.state.token.token}\n                    </strong>\n                    <div className='mt-2'>\n                        <button\n                            className='btn btn-sm btn-primary'\n                            onClick={this.closeCreateToken}\n                        >\n                            <FormattedMessage\n                                id='bot.create_token.close'\n                                defaultMessage='Close'\n                            />\n                        </button>\n                    </div>\n                </div>,\n            );\n        }\n\n        const imageURL = Utils.imageURLForUser(this.props.user.id, this.props.user.last_picture_update);\n\n        return (\n            <div className='backstage-list__item'>\n                <div className={'bot-list-img-container'}>\n                    <img\n                        className={'bot-list-img'}\n                        alt={'bot image'}\n                        src={imageURL}\n                    />\n                </div>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName + ' (@' + username + ')'}\n                        </strong>\n                        {options}\n                    </div>\n                    <div className='bot-details__description'>\n                        <Markdown message={description}/>\n                    </div>\n                    <div className='light small'>\n                        <FormattedMessage\n                            id='bots.managed_by'\n                            defaultMessage='Managed by '\n                        />\n                        {ownerUsername}\n                    </div>\n                    <div className='bot-list is-empty'>\n                        {tokenList}\n                    </div>\n                </div>\n                <ConfirmModal\n                    title={\n                        <FormattedMessage\n                            id='bots.token.delete'\n                            defaultMessage='Delete Token'\n                        />\n                    }\n                    message={\n                        <FormattedMessage\n                            id='bots.token.confirm_text'\n                            defaultMessage='Are you sure you want to delete the token?'\n                        />\n                    }\n                    confirmButtonText={\n                        <FormattedMessage\n                            id='bots.token.confirm'\n                            defaultMessage='Delete'\n                        />\n                    }\n                    show={this.state.confirmingId !== ''}\n                    onConfirm={this.revokeTokenConfirmed}\n                    onCancel={this.closeConfirm}\n                />\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {getSiteURL} from 'utils/url';\n\nimport * as Utils from 'utils/utils.jsx';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport Constants from 'utils/constants';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport Bot, {matchesFilter} from './bot.jsx';\n\nexport default class Bots extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Map from botUserId to bot.\n        */\n        bots: PropTypes.object.isRequired,\n\n        /**\n        *  Map from botUserId to accessTokens.\n        */\n        accessTokens: PropTypes.object.isRequired,\n\n        /**\n        *  Map from botUserId to owner.\n        */\n        owners: PropTypes.object.isRequired,\n\n        /**\n        *  Map from botUserId to user.\n        */\n        users: PropTypes.object.isRequired,\n\n        createBots: PropTypes.bool,\n\n        actions: PropTypes.shape({\n\n            /**\n            * Ensure we have bot accounts\n            */\n            loadBots: PropTypes.func.isRequired,\n\n            /**\n            * Load access tokens for bot accounts\n            */\n            getUserAccessTokensForUser: PropTypes.func.isRequired,\n\n            /**\n            * Access token managment\n            */\n            createUserAccessToken: PropTypes.func.isRequired,\n            revokeUserAccessToken: PropTypes.func.isRequired,\n            enableUserAccessToken: PropTypes.func.isRequired,\n            disableUserAccessToken: PropTypes.func.isRequired,\n\n            /**\n            * Load owner of bot account\n            */\n            getUser: PropTypes.func.isRequired,\n\n            /**\n            * Disable a bot\n            */\n            disableBot: PropTypes.func.isRequired,\n\n            /**\n            * Enable a bot\n            */\n            enableBot: PropTypes.func.isRequired,\n        }),\n\n        /**\n        *  Only used for routing since backstage is team based.\n        */\n        team: PropTypes.object.isRequired,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        this.props.actions.loadBots(\n            Constants.Integrations.START_PAGE_NUM,\n            Constants.Integrations.PAGE_SIZE,\n        ).then(\n            (result) => {\n                if (result.data) {\n                    const promises = [];\n\n                    for (const bot of result.data) {\n                        // We don't need to wait for this and we need to accept failure in the case where bot.owner_id is a plugin id\n                        this.props.actions.getUser(bot.owner_id);\n\n                        // We want to wait for these.\n                        promises.push(this.props.actions.getUser(bot.user_id));\n                        promises.push(this.props.actions.getUserAccessTokensForUser(bot.user_id));\n                    }\n\n                    Promise.all(promises).then(() => {\n                        this.setState({loading: false});\n                    });\n                }\n            },\n        );\n    }\n\n    DisabledSection(props) {\n        if (!props.hasDisabled) {\n            return null;\n        }\n        const botsToDisplay = React.Children.map(props.disabledBots, (child) => {\n            return React.cloneElement(child, {filter: props.filter});\n        });\n        return (\n            <React.Fragment>\n                <div className='bot-disabled'>\n                    <FormattedMessage\n                        id='bots.disabled'\n                        defaultMessage='Disabled'\n                    />\n                </div>\n                <div className='bot-list__disabled'>\n                    {botsToDisplay}\n                </div>\n            </React.Fragment>\n        );\n    }\n\n    EnabledSection(props) {\n        const botsToDisplay = React.Children.map(props.enabledBots, (child) => {\n            return React.cloneElement(child, {filter: props.filter});\n        });\n        return (\n            <div>\n                {botsToDisplay}\n            </div>\n        );\n    }\n\n    botToJSX = (bot) => {\n        return (\n            <Bot\n                key={bot.user_id}\n                bot={bot}\n                owner={this.props.owners[bot.user_id]}\n                user={this.props.users[bot.user_id]}\n                accessTokens={this.props.accessTokens[bot.user_id] || {}}\n                actions={this.props.actions}\n                team={this.props.team}\n            />\n        );\n    };\n\n    bots = (filter) => {\n        const bots = Object.values(this.props.bots).sort((a, b) => a.username.localeCompare(b.username));\n        const match = (bot) => matchesFilter(bot, filter, this.props.owners[bot.user_id]);\n        const enabledBots = bots.filter((bot) => bot.delete_at === 0).filter(match).map(this.botToJSX);\n        const disabledBots = bots.filter((bot) => bot.delete_at > 0).filter(match).map(this.botToJSX);\n        const sections = (\n            <div key='sections'>\n                <this.EnabledSection\n                    enabledBots={enabledBots}\n                />\n                <this.DisabledSection\n                    hasDisabled={disabledBots.length > 0}\n                    disabledBots={disabledBots}\n                />\n            </div>\n        );\n\n        return [sections, enabledBots.length > 0 || disabledBots.length > 0];\n    }\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='bots.manage.header'\n                        defaultMessage='Bot Accounts'\n                    />\n                }\n                addText={this.props.createBots &&\n                    <FormattedMessage\n                        id='bots.manage.add'\n                        defaultMessage='Add Bot Account'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/bots/add'}\n                addButtonId='addBotAccount'\n                emptyText={\n                    <FormattedMessage\n                        id='bots.manage.empty'\n                        defaultMessage='No bot accounts found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='bots.manage.emptySearch'\n                        defaultMessage='No bot accounts match **{searchTerm}**'\n                    />\n                }\n                helpText={\n                    <React.Fragment>\n                        <FormattedMessage\n                            id='bots.manage.help1'\n                            defaultMessage='Use {botAccounts} to integrate with Mattermost through plugins or the API. Bot accounts are available to everyone on your server. '\n                            values={{\n                                botAccounts: (\n                                    <a\n                                        target='_blank'\n                                        rel='noopener noreferrer'\n                                        href='https://mattermost.com/pl/default-bot-accounts'\n                                    >\n                                        <FormattedMessage\n                                            id='bots.manage.bot_accounts'\n                                            defaultMessage='Bot Accounts'\n                                        />\n                                    </a>\n                                ),\n                            }}\n                        />\n                        <FormattedMarkdownMessage\n                            id='bots.manage.help2'\n                            defaultMessage={'Enable bot account creation in the [System Console]({siteURL}/admin_console/integrations/bot_accounts).'}\n                            values={{\n                                siteURL: getSiteURL(),\n                            }}\n                        />\n                    </React.Fragment>\n                }\n                searchPlaceholder={Utils.localizeMessage('bots.manage.search', 'Search Bot Accounts')}\n                loading={this.state.loading}\n            >\n                {this.bots}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {getExternalBotAccounts} from 'mattermost-redux/selectors/entities/bots';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {loadBots, disableBot, enableBot} from 'mattermost-redux/actions/bots';\nimport {createUserAccessToken, revokeUserAccessToken, enableUserAccessToken, disableUserAccessToken, getUserAccessTokensForUser, getUser} from 'mattermost-redux/actions/users';\nimport * as UserSelectors from 'mattermost-redux/selectors/entities/users';\n\nimport Bots from './bots.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const createBots = config.EnableBotAccountCreation === 'true';\n    const bots = getExternalBotAccounts(state);\n    const botValues = Object.values(bots);\n    const owners = botValues.\n        reduce((result, bot) => {\n            result[bot.user_id] = UserSelectors.getUser(state, bot.owner_id);\n            return result;\n        }, {});\n    const users = botValues.\n        reduce((result, bot) => {\n            result[bot.user_id] = UserSelectors.getUser(state, bot.user_id);\n            return result;\n        }, {});\n\n    return {\n        createBots,\n        bots,\n        accessTokens: state.entities.admin.userAccessTokensByUser,\n        owners,\n        users,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadBots,\n            getUserAccessTokensForUser,\n            createUserAccessToken,\n            revokeUserAccessToken,\n            enableUserAccessToken,\n            disableUserAccessToken,\n            getUser,\n            disableBot,\n            enableBot,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Bots);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {Route, Switch, Redirect} from 'react-router-dom';\n\nimport {Team} from 'mattermost-redux/types/teams';\n\nimport {UserProfile} from 'mattermost-redux/types/users';\n\nimport {RelationOneToOne} from 'mattermost-redux/types/utilities';\n\nimport {Command} from 'mattermost-redux/types/integrations';\n\nimport InstalledCommands from 'components/integrations/installed_commands';\nimport AddCommand from 'components/integrations/add_command';\nimport EditCommand from 'components/integrations/edit_command';\nimport ConfirmIntegration from 'components/integrations/confirm_integration';\n\ninterface IProps {\n    component: any;\n    extraProps: {\n        loading: boolean;\n        commands: Command[];\n        users?: RelationOneToOne<UserProfile, UserProfile>;\n        team?: Team;\n        user?: UserProfile;\n    };\n    path: string;\n}\n\nconst CommandRoute = ({component: Component, extraProps, ...rest}: IProps) => (\n    <Route\n        {...rest}\n        render={(props) => (\n            <Component\n                {...extraProps}\n                {...props}\n            />\n        )}\n    />\n);\n\ntype Props = {\n\n    /**\n     * The team data needed to pass into child components\n     */\n    team?: Team;\n\n    /**\n     * The user data needed to pass into child components\n     */\n    user?: UserProfile;\n\n    /**\n     * The users collection\n     */\n    users?: RelationOneToOne<UserProfile, UserProfile>;\n\n    /**\n     * Installed slash commands to display\n     */\n    commands: Command[];\n\n    /**\n     * Object from react-router\n     */\n    match: {\n        url: string;\n    };\n\n    actions: {\n\n        /**\n         * The function to call to fetch team commands\n         */\n        loadCommandsAndProfilesForTeam: (teamId?: string) => any; // TechDebt-TODO: This needs to be changed to 'Promise<void>'\n    };\n\n    /**\n     * Whether or not commands are enabled.\n     */\n    enableCommands?: boolean;\n};\n\ntype State = {\n    loading: boolean;\n};\n\nexport default class CommandsContainer extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableCommands) {\n            this.props.actions.loadCommandsAndProfilesForTeam(this.props.team?.id).then(\n                () => this.setState({loading: false}),\n            );\n        }\n    }\n\n    render() {\n        const extraProps = {\n            loading: this.state.loading,\n            commands: this.props.commands || [],\n            users: this.props.users,\n            team: this.props.team,\n            user: this.props.user,\n        };\n        return (\n            <div>\n                <Switch>\n                    <Route\n                        exact={true}\n                        path={`${this.props.match.url}/`}\n                        render={() => (<Redirect to={`${this.props.match.url}/installed`}/>)}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/installed`}\n                        component={InstalledCommands}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/add`}\n                        component={AddCommand}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/edit`}\n                        component={EditCommand}\n                    />\n                    <CommandRoute\n                        extraProps={extraProps}\n                        path={`${this.props.match.url}/confirm`}\n                        component={ConfirmIntegration}\n                    />\n                </Switch>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {AnyAction, bindActionCreators, Dispatch} from 'redux';\nimport {getCommands} from 'mattermost-redux/selectors/entities/integrations';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {GlobalState} from 'mattermost-redux/types/store';\n\nimport {loadCommandsAndProfilesForTeam} from 'actions/integration_actions';\n\nimport CommandsContainer from './commands_container';\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const enableCommands = config.EnableCommands === 'true';\n\n    return {\n        commands: Object.values(getCommands(state)),\n        users: getUsers(state),\n        enableCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<AnyAction>) {\n    return {\n        actions: bindActionCreators({\n            loadCommandsAndProfilesForTeam,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CommandsContainer);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {Constants, ErrorPageTypes} from 'utils/constants.jsx';\nimport CopyText from 'components/copy_text';\nimport BackstageHeader from 'components/backstage/components/backstage_header.jsx';\nimport {getSiteURL} from 'utils/url';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class ConfirmIntegration extends React.PureComponent {\n    static get propTypes() {\n        return {\n            team: PropTypes.object,\n            location: PropTypes.object,\n            commands: PropTypes.object,\n            oauthApps: PropTypes.object,\n            incomingHooks: PropTypes.object,\n            outgoingHooks: PropTypes.object,\n            bots: PropTypes.object,\n        };\n    }\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            type: (new URLSearchParams(this.props.location.search)).get('type'),\n            id: (new URLSearchParams(this.props.location.search)).get('id'),\n        };\n    }\n\n    componentDidMount() {\n        window.addEventListener('keypress', this.handleKeyPress);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('keypress', this.handleKeyPress);\n    }\n\n    handleKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            browserHistory.push('/' + this.props.team.name + '/integrations/' + this.state.type);\n        }\n    }\n\n    render() {\n        let headerText = null;\n        let helpText = null;\n        let tokenText = null;\n\n        const command = this.props.commands[this.state.id];\n        const incomingHook = this.props.incomingHooks[this.state.id];\n        const outgoingHook = this.props.outgoingHooks[this.state.id];\n        const oauthApp = this.props.oauthApps[this.state.id];\n        const bot = this.props.bots[this.state.id];\n\n        if (this.state.type === Constants.Integrations.COMMAND && command) {\n            const commandToken = command.token;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_commands.header'}\n                    defaultMessage='Slash Commands'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='add_command.doneHelp'\n                        defaultMessage='Your slash command is set up. The following token will be sent in the outgoing payload. Please use it to verify the request came from your Mattermost team (details at [Slash Commands](!https://docs.mattermost.com/developer/slash-commands.html)).'\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_command.token'\n                        defaultMessage='**Token**: {token}'\n                        values={{\n                            token: commandToken,\n                        }}\n                    />\n                    <CopyText\n                        value={commandToken}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.INCOMING_WEBHOOK && incomingHook) {\n            const incomingHookToken = getSiteURL() + '/hooks/' + incomingHook.id;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_incoming_webhooks.header'}\n                    defaultMessage='Incoming Webhooks'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='add_incoming_webhook.doneHelp'\n                        defaultMessage='Your incoming webhook is set up. Please send data to the following URL (details at [Incoming Webhooks](!https://docs.mattermost.com/developer/webhooks-incoming.html)).'\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_incoming_webhook.url'\n                        defaultMessage='**URL**: {url}'\n                        values={{\n                            url: '`' + incomingHookToken + '`',\n                        }}\n                    />\n                    <CopyText\n                        value={incomingHookToken}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.OUTGOING_WEBHOOK && outgoingHook) {\n            const outgoingHookToken = outgoingHook.token;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_outgoing_webhooks.header'}\n                    defaultMessage='Outgoing Webhooks'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.doneHelp'\n                        defaultMessage='Your outgoing webhook is set up. The following token will be sent in the outgoing payload. Please use it to verify that the request came from your Mattermost team (details at [Outgoing Webhooks](!https://docs.mattermost.com/developer/webhooks-outgoing.html)).'\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.token'\n                        defaultMessage='**Token**: {token}'\n                        values={{\n                            token: outgoingHookToken,\n                        }}\n                    />\n                    <CopyText\n                        value={outgoingHookToken}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.OAUTH_APP && oauthApp) {\n            const oauthAppToken = oauthApp.id;\n            const oauthAppSecret = oauthApp.client_secret;\n\n            headerText = (\n                <FormattedMessage\n                    id={'installed_oauth_apps.header'}\n                    defaultMessage='OAuth 2.0 Applications'\n                />\n            );\n\n            helpText = [];\n            helpText.push(\n                <p key='add_oauth_app.doneHelp'>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.doneHelp'\n                        defaultMessage='Your OAuth 2.0 application is set up. Please use the following Client ID and Client Secret when requesting authorization for your application (details at [oAuth 2 Applications](!https://docs.mattermost.com/developer/oauth-2-0-applications.html)).'\n                    />\n                </p>,\n            );\n            helpText.push(\n                <p key='add_oauth_app.clientId'>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.clientId'\n                        defaultMessage='**Client ID**: {id}'\n                        values={{\n                            id: oauthAppToken,\n                        }}\n                    />\n                    <CopyText\n                        idMessage='integrations.copy_client_id'\n                        defaultMessage='Copy Client Id'\n                        value={oauthAppToken}\n                    />\n                    <br/>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.clientSecret'\n                        defaultMessage='**Client Secret**: {secret}'\n                        values={{\n                            secret: oauthAppSecret,\n                        }}\n                    />\n                    <CopyText\n                        idMessage='integrations.copy_client_secret'\n                        defaultMessage='Copy Client Secret'\n                        value={oauthAppSecret}\n                    />\n                </p>,\n            );\n\n            helpText.push(\n                <p key='add_oauth_app.doneUrlHelp'>\n                    <FormattedMessage\n                        id='add_oauth_app.doneUrlHelp'\n                        defaultMessage='Here are your authorized redirect URLs.'\n                    />\n                </p>,\n            );\n\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_oauth_app.url'\n                        defaultMessage='**URL(s)**: {url}'\n                        values={{\n                            url: oauthApp.callback_urls.join(', '),\n                        }}\n                    />\n                </p>\n            );\n        } else if (this.state.type === Constants.Integrations.BOT && bot) {\n            const botToken = (new URLSearchParams(this.props.location.search)).get('token');\n\n            headerText = (\n                <FormattedMessage\n                    id='bots.manage.header'\n                    defaultMessage='Bot Accounts'\n                />\n            );\n            helpText = (\n                <p>\n                    <FormattedMarkdownMessage\n                        id='bots.manage.created.text'\n                        defaultMessage='Your bot account **{botname}** has been created successfully. Please use the following access token to connect to the bot (see [documentation](https://mattermost.com/pl/default-bot-accounts) for further details).'\n                        values={{\n                            botname: bot.display_name || bot.username,\n                        }}\n                    />\n                </p>\n            );\n            tokenText = (\n                <p className='word-break--all'>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.token'\n                        defaultMessage='**Token**: {token}'\n                        values={{\n                            token: botToken,\n                        }}\n                    />\n                    <CopyText\n                        value={botToken}\n                    />\n                    <br/>\n                    <br/>\n                    <FormattedMarkdownMessage\n                        id='add_outgoing_webhook.token.message'\n                        defaultMessage='Make sure to add this bot account to teams and channels you want it to interact in. See [documentation](https://mattermost.com/pl/default-bot-accounts) to learn more.'\n                    />\n                </p>\n            );\n        } else {\n            browserHistory.replace(`/error?type=${ErrorPageTypes.PAGE_NOT_FOUND}`);\n            return '';\n        }\n\n        return (\n            <div className='backstage-content row'>\n                <BackstageHeader>\n                    <Link to={'/' + this.props.team.name + '/integrations/' + this.state.type}>\n                        {headerText}\n                    </Link>\n                    <FormattedMessage\n                        id='integrations.add'\n                        defaultMessage='Add'\n                    />\n                </BackstageHeader>\n                <div className='backstage-form backstage-form__confirmation'>\n                    <h4\n                        className='backstage-form__title'\n                        id='formTitle'\n                    >\n                        <FormattedMessage\n                            id='integrations.successful'\n                            defaultMessage='Setup Successful'\n                        />\n                    </h4>\n                    {helpText}\n                    {tokenText}\n                    <div className='backstage-form__footer'>\n                        <Link\n                            className='btn btn-primary'\n                            type='submit'\n                            to={'/' + this.props.team.name + '/integrations/' + this.state.type}\n                            id='doneButton'\n                        >\n                            <FormattedMessage\n                                id='integrations.done'\n                                defaultMessage='Done'\n                            />\n                        </Link>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {getCommands, getOAuthApps, getIncomingHooks, getOutgoingHooks} from 'mattermost-redux/selectors/entities/integrations';\nimport {getBotAccounts} from 'mattermost-redux/selectors/entities/bots';\n\nimport ConfirmIntegration from './confirm_integration.jsx';\n\nfunction mapStateToProps(state) {\n    return {\n        commands: getCommands(state),\n        oauthApps: getOAuthApps(state),\n        incomingHooks: getIncomingHooks(state),\n        outgoingHooks: getOutgoingHooks(state),\n        bots: getBotAccounts(state),\n    };\n}\n\nexport default connect(mapStateToProps)(ConfirmIntegration);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport DeleteModalTrigger from 'components/delete_modal_trigger';\nimport WarningIcon from 'components/widgets/icons/fa_warning_icon';\n\nexport default class DeleteIntegration extends DeleteModalTrigger {\n    get triggerTitle() {\n        return (\n            <FormattedMessage\n                id='installed_integrations.delete'\n                defaultMessage='Delete'\n            />\n        );\n    }\n\n    get modalTitle() {\n        return (\n            <FormattedMessage\n                id='integrations.delete.confirm.title'\n                defaultMessage='Delete Integration'\n            />\n        );\n    }\n\n    get modalMessage() {\n        return (\n            <div className='alert alert-warning'>\n                <WarningIcon additionalClassName='mr-1'/>\n                <FormattedMessage\n                    id={this.props.messageId}\n                    defaultMessage='This action permanently deletes the integration and breaks any integrations using it. Are you sure you want to delete it?'\n                />\n            </div>\n        );\n    }\n\n    get modalConfirmButton() {\n        return (\n            <FormattedMessage\n                id='integrations.delete.confirm.button'\n                defaultMessage='Delete'\n            />\n        );\n    }\n}\n\nDeleteIntegration.propTypes = {\n    messageId: PropTypes.string.isRequired,\n    onDelete: PropTypes.func.isRequired,\n};\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport LoadingScreen from 'components/loading_screen';\nimport ConfirmModal from 'components/confirm_modal';\nimport AbstractCommand from '../abstract_command.jsx';\n\nconst HEADER = {id: t('integrations.edit'), defaultMessage: 'Edit'};\nconst FOOTER = {id: t('edit_command.update'), defaultMessage: 'Update'};\nconst LOADING = {id: t('edit_command.updating'), defaultMessage: 'Updating...'};\n\nexport default class EditCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The id of the command to edit\n        */\n        commandId: PropTypes.string.isRequired,\n\n        /**\n        * Installed slash commands to display\n        */\n        commands: PropTypes.object,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to fetch team commands\n            */\n            getCustomTeamCommands: PropTypes.func.isRequired,\n\n            /**\n            * The function to call to edit command\n            */\n            editCommand: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not commands are enabled.\n        */\n        enableCommands: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            originalCommand: null,\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableCommands) {\n            this.props.actions.getCustomTeamCommands(this.props.team.id).then(\n                () => {\n                    this.setState({\n                        originalCommand: Object.values(this.props.commands).filter((command) => command.id === this.props.commandId)[0],\n                    });\n                },\n            );\n        }\n    }\n\n    editCommand = async (command) => {\n        this.newCommand = command;\n\n        if (this.state.originalCommand.id) {\n            command.id = this.state.originalCommand.id;\n        }\n\n        if (this.state.originalCommand.url !== this.newCommand.url ||\n            this.state.originalCommand.trigger !== this.newCommand.trigger ||\n            this.state.originalCommand.method !== this.newCommand.method) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitCommand();\n        }\n    }\n\n    handleConfirmModal = () => {\n        this.setState({showConfirmModal: true});\n    }\n\n    confirmModalDismissed = () => {\n        this.setState({showConfirmModal: false});\n    }\n\n    submitCommand = async () => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.editCommand(this.newCommand);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/commands`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_command.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_command.confirm'\n                defaultMessage='Edit Slash Command'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_command.question'\n                defaultMessage='Your changes may break the existing slash command. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitCommand}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    }\n\n    render() {\n        if (!this.state.originalCommand) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractCommand\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editCommand}\n                serverError={this.state.serverError}\n                initialCommand={this.state.originalCommand}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {editCommand, getCustomTeamCommands} from 'mattermost-redux/actions/integrations';\nimport {getCommands} from 'mattermost-redux/selectors/entities/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditCommand from './edit_command.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const commandId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableCommands = config.EnableCommands === 'true';\n\n    return {\n        commandId,\n        commands: getCommands(state),\n        enableCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            getCustomTeamCommands,\n            editCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditCommand);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nimport {Team} from 'mattermost-redux/types/teams';\nimport {IncomingWebhook} from 'mattermost-redux/types/integrations';\nimport {ActionResult} from 'mattermost-redux/types/actions';\n\nimport {browserHistory} from 'utils/browser_history';\nimport {t} from 'utils/i18n';\nimport AbstractIncomingWebhook from 'components/integrations/abstract_incoming_webhook';\nimport LoadingScreen from 'components/loading_screen';\n\nconst HEADER = {id: t('integrations.edit'), defaultMessage: 'Edit'};\nconst FOOTER = {id: t('update_incoming_webhook.update'), defaultMessage: 'Update'};\nconst LOADING = {id: t('update_incoming_webhook.updating'), defaultMessage: 'Updating...'};\n\ntype Props = {\n\n    /**\n     * The current team\n     */\n    team: Team;\n\n    /**\n     * The incoming webhook to edit\n     */\n    hook?: IncomingWebhook;\n\n    /**\n     * The id of the incoming webhook to edit\n     */\n    hookId: string;\n\n    /**\n     * Whether or not incoming webhooks are enabled.\n     */\n    enableIncomingWebhooks: boolean;\n\n    /**\n     * Whether to allow configuration of the default post username.\n     */\n    enablePostUsernameOverride: boolean;\n\n    /**\n     * Whether to allow configuration of the default post icon.\n     */\n    enablePostIconOverride: boolean;\n\n    actions: {\n\n        /**\n         * The function to call to update an incoming webhook\n         */\n        updateIncomingHook: (hook: IncomingWebhook) => Promise<ActionResult>;\n\n        /**\n         * The function to call to get an incoming webhook\n         */\n        getIncomingHook: (hookId: string) => Promise<ActionResult>;\n    };\n};\n\ntype State = {\n    showConfirmModal: boolean;\n    serverError: string;\n};\n\nexport default class EditIncomingWebhook extends React.PureComponent<Props, State> {\n    private newHook?: IncomingWebhook;\n\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableIncomingWebhooks) {\n            this.props.actions.getIncomingHook(this.props.hookId);\n        }\n    }\n\n    editIncomingHook = async (hook: IncomingWebhook) => {\n        this.newHook = hook;\n\n        if (this.props.hook?.id) {\n            hook.id = this.props.hook.id;\n        }\n\n        await this.submitHook();\n    };\n\n    submitHook = async () => {\n        this.setState({serverError: ''});\n\n        if (!this.newHook) {\n            return;\n        }\n\n        const result = await this.props.actions.updateIncomingHook(this.newHook);\n\n        if ('data' in result) {\n            browserHistory.push(`/${this.props.team.name}/integrations/incoming_webhooks`);\n            return;\n        }\n\n        if ('error' in result) {\n            const {error} = result;\n            this.setState({serverError: error.message});\n        }\n    };\n\n    render() {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractIncomingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n                action={this.editIncomingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {ActionCreatorsMapObject, bindActionCreators, Dispatch} from 'redux';\nimport {getIncomingHook, updateIncomingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {GlobalState} from 'mattermost-redux/types/store';\nimport {ActionFunc, ActionResult, GenericAction} from 'mattermost-redux/types/actions';\nimport {IncomingWebhook} from 'mattermost-redux/types/integrations';\n\nimport EditIncomingWebhook from './edit_incoming_webhook';\n\ntype Props = {\n    location: Location;\n}\n\ntype Actions = {\n    updateIncomingHook: (hook: IncomingWebhook) => Promise<ActionResult>;\n    getIncomingHook: (hookId: string) => Promise<ActionResult>;\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const config = getConfig(state);\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n    const hookId = (new URLSearchParams(ownProps.location.search)).get('id') || '';\n\n    return {\n        hookId,\n        hook: state.entities.integrations.incomingHooks[hookId],\n        enableIncomingWebhooks,\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<GenericAction>) {\n    return {\n        actions: bindActionCreators<ActionCreatorsMapObject<ActionFunc>, Actions>({\n            updateIncomingHook,\n            getIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditIncomingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport {FormattedMessage} from 'react-intl';\n\nimport {browserHistory} from 'utils/browser_history';\nimport LoadingScreen from 'components/loading_screen';\nimport ConfirmModal from 'components/confirm_modal';\nimport AbstractOAuthApp from '../abstract_oauth_app.jsx';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_incoming_webhook.update', defaultMessage: 'Update'};\nconst LOADING = {id: 'update_incoming_webhook.updating', defaultMessage: 'Updating...'};\n\nexport default class EditOAuthApp extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The current team\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * The id of the OAuthApp to edit\n        */\n        oauthAppId: PropTypes.string.isRequired,\n\n        /**\n        * The OAuthApp data\n        */\n        oauthApp: PropTypes.object,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to get OAuthApp\n            */\n            getOAuthApp: PropTypes.func.isRequired,\n\n            /**\n            * The function to call to edit OAuthApp\n            */\n            editOAuthApp: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not OAuth applications are enabled.\n        */\n        enableOAuthServiceProvider: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOAuthServiceProvider) {\n            this.props.actions.getOAuthApp(this.props.oauthAppId);\n        }\n    }\n\n    editOAuthApp = async (app) => {\n        this.newApp = app;\n\n        if (this.props.oauthApp.id) {\n            app.id = this.props.oauthApp.id;\n        }\n\n        if (this.props.oauthApp.token) {\n            app.token = this.props.oauthApp.token;\n        }\n\n        const callbackUrlsSame = (this.props.oauthApp.callback_urls.length === app.callback_urls.length) &&\n            this.props.oauthApp.callback_urls.every((v, i) => v === app.callback_urls[i]);\n\n        if (callbackUrlsSame === false) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitOAuthApp();\n        }\n    }\n\n    handleConfirmModal = () => {\n        this.setState({showConfirmModal: true});\n    }\n\n    confirmModalDismissed = () => {\n        this.setState({showConfirmModal: false});\n    }\n\n    submitOAuthApp = async () => {\n        this.setState({serverError: ''});\n\n        const {data, error} = await this.props.actions.editOAuthApp(this.newApp);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/oauth2-apps`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    renderExtra = () => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_command.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_oauth_app.confirm'\n                defaultMessage='Edit OAuth 2.0 application'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_oauth_app.question'\n                defaultMessage='Your changes may break the existing OAuth 2.0 application. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitOAuthApp}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    }\n\n    render() {\n        if (!this.props.oauthApp) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractOAuthApp\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editOAuthApp}\n                serverError={this.state.serverError}\n                initialApp={this.props.oauthApp}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {getOAuthApp, editOAuthApp} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport EditOAuthApp from './edit_oauth_app.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const config = getConfig(state);\n    const oauthAppId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        oauthAppId,\n        oauthApp: state.entities.integrations.oauthApps[oauthAppId],\n        enableOAuthServiceProvider,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            getOAuthApp,\n            editOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Team} from 'mattermost-redux/types/teams';\nimport {OutgoingWebhook} from 'mattermost-redux/types/integrations';\nimport {ServerError} from 'mattermost-redux/types/errors';\n\nimport {browserHistory} from 'utils/browser_history';\nimport ConfirmModal from 'components/confirm_modal';\nimport AbstractOutgoingWebhook from 'components/integrations/abstract_outgoing_webhook.jsx';\nimport LoadingScreen from 'components/loading_screen';\n\nconst HEADER = {id: 'integrations.edit', defaultMessage: 'Edit'};\nconst FOOTER = {id: 'update_outgoing_webhook.update', defaultMessage: 'Update'};\nconst LOADING = {id: 'update_outgoing_webhook.updating', defaultMessage: 'Updating...'};\n\ninterface Props {\n\n    /**\n     * The current team\n     */\n    team: Team;\n\n    /**\n     * The outgoing webhook to edit\n     */\n    hook?: OutgoingWebhook;\n\n    /**\n     * The id of the outgoing webhook to edit\n     */\n    hookId: string;\n    actions: {\n\n        /**\n         * The function to call to update an outgoing webhook\n         */\n        updateOutgoingHook: (hook: OutgoingWebhook) => Promise<{ data: OutgoingWebhook; error: ServerError }>;\n\n        /**\n         * The function to call to get an outgoing webhook\n         */\n        getOutgoingHook: (hookId: string) => Promise<{ data: OutgoingWebhook; error: ServerError }>;\n    };\n\n    /**\n     * Whether or not outgoing webhooks are enabled.\n     */\n    enableOutgoingWebhooks?: boolean;\n\n    /**\n     * Whether to allow configuration of the default post username.\n     */\n    enablePostUsernameOverride: boolean;\n\n    /**\n     * Whether to allow configuration of the default post icon.\n     */\n    enablePostIconOverride: boolean;\n}\n\ninterface State {\n    showConfirmModal: boolean;\n    serverError: string;\n}\n\nexport default class EditOutgoingWebhook extends React.PureComponent<Props, State> {\n    private newHook: OutgoingWebhook | undefined;\n\n    constructor(props: Props) {\n        super(props);\n        this.state = {\n            showConfirmModal: false,\n            serverError: '',\n        };\n    }\n\n    componentDidMount(): void {\n        if (this.props.enableOutgoingWebhooks) {\n            this.props.actions.getOutgoingHook(this.props.hookId);\n        }\n    }\n\n    editOutgoingHook = async (hook: OutgoingWebhook): Promise<void> => {\n        this.newHook = hook;\n\n        if (this.props.hook!.id) {\n            hook.id = this.props.hook!.id;\n        }\n\n        if (this.props.hook!.token) {\n            hook.token = this.props.hook!.token;\n        }\n\n        const triggerWordsSame = (this.props.hook!.trigger_words.length === hook!.trigger_words.length) &&\n            this.props.hook!.trigger_words.every((v, i) => v === hook.trigger_words[i]);\n\n        const callbackUrlsSame = (this.props.hook!.callback_urls.length === hook!.callback_urls.length) &&\n            this.props.hook!.callback_urls.every((v, i) => v === hook.callback_urls[i]);\n\n        if (this.props.hook!.content_type !== hook.content_type ||\n            !triggerWordsSame || !callbackUrlsSame) {\n            this.handleConfirmModal();\n        } else {\n            await this.submitHook();\n        }\n    }\n\n    handleConfirmModal = (): void => {\n        this.setState({showConfirmModal: true});\n    }\n\n    confirmModalDismissed = (): void => {\n        this.setState({showConfirmModal: false});\n    }\n\n    submitHook = async (): Promise<void> => {\n        this.setState({serverError: ''});\n\n        const {data, error}: {data: OutgoingWebhook; error: ServerError} = await this.props.actions.updateOutgoingHook(this.newHook!);\n\n        if (data) {\n            browserHistory.push(`/${this.props.team.name}/integrations/outgoing_webhooks`);\n            return;\n        }\n\n        this.setState({showConfirmModal: false});\n\n        if (error) {\n            this.setState({serverError: error.message});\n        }\n    }\n\n    renderExtra = (): JSX.Element => {\n        const confirmButton = (\n            <FormattedMessage\n                id='update_outgoing_webhook.update'\n                defaultMessage='Update'\n            />\n        );\n\n        const confirmTitle = (\n            <FormattedMessage\n                id='update_outgoing_webhook.confirm'\n                defaultMessage='Edit Outgoing Webhook'\n            />\n        );\n\n        const confirmMessage = (\n            <FormattedMessage\n                id='update_outgoing_webhook.question'\n                defaultMessage='Your changes may break the existing outgoing webhook. Are you sure you would like to update it?'\n            />\n        );\n\n        return (\n            <ConfirmModal\n                title={confirmTitle}\n                message={confirmMessage}\n                confirmButtonText={confirmButton}\n                show={this.state.showConfirmModal}\n                onConfirm={this.submitHook}\n                onCancel={this.confirmModalDismissed}\n            />\n        );\n    }\n\n    render(): JSX.Element {\n        if (!this.props.hook) {\n            return <LoadingScreen/>;\n        }\n\n        return (\n            <AbstractOutgoingWebhook\n                team={this.props.team}\n                header={HEADER}\n                footer={FOOTER}\n                loading={LOADING}\n                renderExtra={this.renderExtra()}\n                action={this.editOutgoingHook}\n                serverError={this.state.serverError}\n                initialHook={this.props.hook}\n                enablePostUsernameOverride={this.props.enablePostUsernameOverride}\n                enablePostIconOverride={this.props.enablePostIconOverride}\n            />\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {ActionCreatorsMapObject, bindActionCreators, Dispatch} from 'redux';\nimport {getOutgoingHook, updateOutgoingHook} from 'mattermost-redux/actions/integrations';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {GlobalState} from 'mattermost-redux/types/store';\nimport {ActionFunc, GenericAction} from 'mattermost-redux/types/actions';\nimport {OutgoingWebhook} from 'mattermost-redux/types/integrations';\nimport {ServerError} from 'mattermost-redux/types/errors';\n\nimport EditOutgoingWebhook from './edit_outgoing_webhook';\n\ntype OwnProps = {\n    location: {\n        search: string | string[][] | Record<string, string> | URLSearchParams | undefined;\n    };\n}\n\ntype Actions = {\n    updateOutgoingHook: (hook: OutgoingWebhook) => Promise<{ data: OutgoingWebhook; error: ServerError }>;\n    getOutgoingHook: (hookId: string) => Promise<{ data: OutgoingWebhook; error: ServerError }>;\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: OwnProps) {\n    const config = getConfig(state);\n    const hookId = (new URLSearchParams(ownProps.location.search)).get('id');\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enablePostUsernameOverride = config.EnablePostUsernameOverride === 'true';\n    const enablePostIconOverride = config.EnablePostIconOverride === 'true';\n\n    return {\n        hookId: hookId!,\n        hook: state.entities.integrations.outgoingHooks[hookId!],\n        enableOutgoingWebhooks,\n        enablePostUsernameOverride,\n        enablePostIconOverride,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<GenericAction>) {\n    return {\n        actions: bindActionCreators<ActionCreatorsMapObject<ActionFunc>, Actions>({\n            updateOutgoingHook,\n            getOutgoingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport Integrations from './integrations.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const siteName = config.SiteName;\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n    const enableCommands = config.EnableCommands === 'true';\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        siteName,\n        enableIncomingWebhooks,\n        enableOutgoingWebhooks,\n        enableCommands,\n        enableOAuthServiceProvider,\n    };\n}\n\nexport default connect(mapStateToProps)(Integrations);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {t} from 'utils/i18n';\nimport CopyText from '../copy_text';\n\nimport DeleteIntegration from './delete_integration.jsx';\n\nexport function matchesFilter(command, filter) {\n    if (!filter) {\n        return true;\n    }\n\n    return command.display_name.toLowerCase().indexOf(filter) !== -1 ||\n        command.description.toLowerCase().indexOf(filter) !== -1 ||\n        command.trigger.toLowerCase().indexOf(filter) !== -1;\n}\n\nexport default class InstalledCommand extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        * Installed slash command to display\n        */\n        command: PropTypes.object.isRequired,\n\n        /**\n        * The function to call when Regenerate Token link is clicked\n        */\n        onRegenToken: PropTypes.func.isRequired,\n\n        /**\n        * The function to call when Delete link is clicked\n        */\n        onDelete: PropTypes.func.isRequired,\n\n        /**\n        * Set to filter command, comes from BackstageList\n        */\n        filter: PropTypes.string,\n\n        /**\n        * The creator user data\n        */\n        creator: PropTypes.object.isRequired,\n\n        /**\n        * Set to show edit link\n        */\n        canChange: PropTypes.bool.isRequired,\n    }\n\n    handleRegenToken = (e) => {\n        e.preventDefault();\n\n        this.props.onRegenToken(this.props.command);\n    }\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.command);\n    }\n\n    render() {\n        const command = this.props.command;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n\n        if (!matchesFilter(command, filter)) {\n            return null;\n        }\n\n        let name;\n\n        if (command.display_name) {\n            name = command.display_name;\n        } else {\n            name = (\n                <FormattedMessage\n                    id='installed_commands.unnamed_command'\n                    defaultMessage='Unnamed Slash Command'\n                />\n            );\n        }\n\n        let description = null;\n        if (command.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {command.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let trigger = '- /' + command.trigger;\n        if (command.auto_complete && command.auto_complete_hint) {\n            trigger += ' ' + command.auto_complete_hint;\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.handleRegenToken}\n                    >\n                        <FormattedMessage\n                            id='installed_integrations.regenToken'\n                            defaultMessage='Regenerate Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/commands/edit?id=${command.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegration\n                        messageId={t('installed_commands.delete.confirm')}\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        const commandToken = command.token;\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <div>\n                            <strong className='item-details__name'>\n                                {name}\n                            </strong>\n                            <span className='item-details__trigger'>\n                                {trigger}\n                            </span>\n                        </div>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMessage\n                                id='installed_integrations.token'\n                                defaultMessage='Token: {token}'\n                                values={{\n                                    token: commandToken,\n                                }}\n                            />\n                            <CopyText\n                                value={commandToken}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: command.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {deleteCommand, regenCommandToken} from 'mattermost-redux/actions/integrations';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport InstalledCommands from './installed_commands.jsx';\n\nfunction mapStateToProps(state, ownProps) {\n    const canManageOthersSlashCommands = haveITeamPermission(state, {team: ownProps.team.id, permission: Permissions.MANAGE_OTHERS_SLASH_COMMANDS});\n\n    return {\n        canManageOthersSlashCommands,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            regenCommandToken,\n            deleteCommand,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledCommands);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport * as Utils from 'utils/utils.jsx';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledCommand, {matchesFilter} from '../installed_command.jsx';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class InstalledCommands extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team object\n        */\n        team: PropTypes.object,\n\n        /**\n        * The user object\n        */\n        user: PropTypes.object,\n\n        /**\n        * The users collection\n        */\n        users: PropTypes.object,\n\n        /**\n        * Installed slash commands to display\n        */\n        commands: PropTypes.array,\n\n        /**\n        * Set whether to show the loading... animation or not\n        */\n        loading: PropTypes.bool,\n\n        /**\n        * Set to allow changes to installed slash commands\n        */\n        canManageOthersSlashCommands: PropTypes.bool,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call when Regenerate Token link is clicked\n            */\n            regenCommandToken: PropTypes.func.isRequired,\n\n            /**\n            * The function to call when Delete link is clicked\n            */\n            deleteCommand: PropTypes.func.isRequired,\n        }).isRequired,\n    }\n\n    regenCommandToken = (command) => {\n        this.props.actions.regenCommandToken(command.id);\n    }\n\n    deleteCommand = (command) => {\n        this.props.actions.deleteCommand(command.id);\n    }\n\n    commandCompare(a, b) {\n        let nameA = a.display_name;\n        if (!nameA) {\n            nameA = Utils.localizeMessage('installed_commands.unnamed_command', 'Unnamed Slash Command');\n        }\n\n        let nameB = b.display_name;\n        if (!nameB) {\n            nameB = Utils.localizeMessage('installed_commands.unnamed_command', 'Unnamed Slash Command');\n        }\n\n        return nameA.localeCompare(nameB);\n    }\n\n    render() {\n        const commands = (filter) => this.props.commands.\n            filter((command) => command.team_id === this.props.team.id).\n            filter((command) => matchesFilter(command, filter)).\n            sort(this.commandCompare).map((command) => {\n                const canChange = this.props.canManageOthersSlashCommands || this.props.user.id === command.creator_id;\n\n                return (\n                    <InstalledCommand\n                        key={command.id}\n                        team={this.props.team}\n                        command={command}\n                        onRegenToken={this.regenCommandToken}\n                        onDelete={this.deleteCommand}\n                        creator={this.props.users[command.creator_id] || {}}\n                        canChange={canChange}\n                    />\n                );\n            });\n\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_commands.header'\n                        defaultMessage='Installed Slash Commands'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_commands.add'\n                        defaultMessage='Add Slash Command'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/commands/add'}\n                addButtonId='addSlashCommand'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_commands.empty'\n                        defaultMessage='No slash commands found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_commands.emptySearch'\n                        defaultMessage='No slash commands match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_commands.help'\n                        defaultMessage='Use slash commands to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='http://docs.mattermost.com/developer/slash-commands.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_commands.help.buildYourOwn'\n                                        defaultMessage='Build Your Own'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_commands.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_commands.search', 'Search Slash Commands')}\n                loading={this.props.loading}\n            >\n                {(filter) => {\n                    const children = commands(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {getSiteURL} from 'utils/url';\nimport {t} from 'utils/i18n';\n\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegration from './delete_integration.jsx';\n\nexport function matchesFilter(incomingWebhook, channel, filter) {\n    if (!filter) {\n        return true;\n    }\n\n    if (incomingWebhook.display_name.toLowerCase().indexOf(filter) !== -1 ||\n        incomingWebhook.description.toLowerCase().indexOf(filter) !== -1) {\n        return true;\n    }\n\n    if (incomingWebhook.channel_id) {\n        if (channel && channel.name.toLowerCase().indexOf(filter) !== -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport default class InstalledIncomingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * Data used for showing webhook details\n        */\n        incomingWebhook: PropTypes.object.isRequired,\n\n        /**\n        * Function to call when webhook delete button is pressed\n        */\n        onDelete: PropTypes.func.isRequired,\n\n        /**\n        * String used for filtering webhook item\n        */\n        filter: PropTypes.string,\n\n        /**\n        * Data used for showing created by details\n        */\n        creator: PropTypes.object.isRequired,\n\n        /**\n        *  Set to show available actions on webhook\n        */\n        canChange: PropTypes.bool.isRequired,\n\n        /**\n        *  Data used in routing of webhook for modifications\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        *  Data used for filtering of webhook based on filter prop\n        */\n        channel: PropTypes.object,\n    }\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.incomingWebhook);\n    }\n\n    render() {\n        const incomingWebhook = this.props.incomingWebhook;\n        const channel = this.props.channel;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n\n        if (!matchesFilter(incomingWebhook, channel, filter)) {\n            return null;\n        }\n\n        let displayName;\n        if (incomingWebhook.display_name) {\n            displayName = incomingWebhook.display_name;\n        } else if (channel) {\n            displayName = channel.display_name;\n        } else {\n            displayName = (\n                <FormattedMessage\n                    id='installed_incoming_webhooks.unknown_channel'\n                    defaultMessage='A Private Webhook'\n                />\n            );\n        }\n\n        let description = null;\n        if (incomingWebhook.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {incomingWebhook.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <Link to={`/${this.props.team.name}/integrations/incoming_webhooks/edit?id=${incomingWebhook.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegration\n                        messageId={t('installed_incoming_webhooks.delete.confirm')}\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        const incomingWebhookId = getSiteURL() + '/hooks/' + incomingWebhook.id;\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName}\n                        </strong>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__url word-break--all'>\n                            <FormattedMessage\n                                id='installed_integrations.url'\n                                defaultMessage='URL: {url}'\n                                values={{\n                                    url: incomingWebhookId,\n                                }}\n                            />\n                            <span>\n                                <CopyText\n                                    value={incomingWebhookId}\n                                />\n                            </span>\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: incomingWebhook.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {ActionCreatorsMapObject, bindActionCreators, Dispatch} from 'redux';\nimport {removeIncomingHook} from 'mattermost-redux/actions/integrations';\n\nimport {getAllChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getIncomingHooks} from 'mattermost-redux/selectors/entities/integrations';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\nimport {GlobalState} from 'mattermost-redux/types/store';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\nimport {ActionResult, GenericAction} from 'mattermost-redux/types/actions';\n\nimport {loadIncomingHooksAndProfilesForTeam} from 'actions/integration_actions.jsx';\n\nimport InstalledIncomingWebhooks from './installed_incoming_webhooks';\n\ntype Actions = {\n    removeIncomingHook: (hookId: string) => Promise<ActionResult>;\n    loadIncomingHooksAndProfilesForTeam: (teamId: string, startPageNumber: number, pageSize: string) => Promise<ActionResult>;\n}\n\nfunction mapStateToProps(state: GlobalState) {\n    const config = getConfig(state);\n    const teamId = getCurrentTeamId(state);\n    const canManageOthersWebhooks = haveITeamPermission(state, {team: teamId, permission: Permissions.MANAGE_OTHERS_INCOMING_WEBHOOKS});\n    const incomingHooks = getIncomingHooks(state);\n    const incomingWebhooks = Object.keys(incomingHooks).\n        map((key) => incomingHooks[key]).\n        filter((incomingWebhook) => incomingWebhook.team_id === teamId);\n    const enableIncomingWebhooks = config.EnableIncomingWebhooks === 'true';\n\n    return {\n        incomingWebhooks,\n        channels: getAllChannels(state),\n        users: getUsers(state),\n        canManageOthersWebhooks,\n        enableIncomingWebhooks,\n    };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch<GenericAction>) {\n    return {\n        actions: bindActionCreators<ActionCreatorsMapObject<any>, Actions>({\n            loadIncomingHooksAndProfilesForTeam,\n            removeIncomingHook,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledIncomingWebhooks);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {Team} from 'mattermost-redux/types/teams';\nimport {Channel} from 'mattermost-redux/types/channels';\nimport {IncomingWebhook} from 'mattermost-redux/types/integrations';\nimport {ActionResult} from 'mattermost-redux/types/actions';\nimport {UserProfile} from 'mattermost-redux/types/users';\nimport {IDMappedObjects} from 'mattermost-redux/types/utilities';\n\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledIncomingWebhook, {matchesFilter} from 'components/integrations/installed_incoming_webhook.jsx';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nimport Constants from 'utils/constants';\nimport * as Utils from 'utils/utils.jsx';\n\ntype Props = {\n    team: Team;\n    user: UserProfile;\n    canManageOthersWebhooks: boolean;\n    incomingWebhooks: IncomingWebhook[];\n    channels: IDMappedObjects<Channel>;\n    users: IDMappedObjects<UserProfile>;\n    enableIncomingWebhooks: boolean;\n    actions: {\n        removeIncomingHook: (hookId: string) => Promise<ActionResult>;\n        loadIncomingHooksAndProfilesForTeam: (teamId: string, startPageNumber: number,\n            pageSize: string) => Promise<ActionResult>;\n    };\n}\n\ntype State = {\n    loading: boolean;\n}\n\nexport default class InstalledIncomingWebhooks extends React.PureComponent<Props, State> {\n    constructor(props: Props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableIncomingWebhooks) {\n            this.props.actions.loadIncomingHooksAndProfilesForTeam(\n                this.props.team.id,\n                Constants.Integrations.START_PAGE_NUM,\n                Constants.Integrations.PAGE_SIZE,\n            ).then(\n                () => this.setState({loading: false}),\n            );\n        }\n    }\n\n    deleteIncomingWebhook = (incomingWebhook: IncomingWebhook) => {\n        this.props.actions.removeIncomingHook(incomingWebhook.id);\n    }\n\n    incomingWebhookCompare = (a: IncomingWebhook, b: IncomingWebhook) => {\n        let displayNameA = a.display_name;\n        if (!displayNameA) {\n            const channelA = this.props.channels[a.channel_id];\n            if (channelA) {\n                displayNameA = channelA.display_name;\n            } else {\n                displayNameA = Utils.localizeMessage('installed_incoming_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n\n        const displayNameB = b.display_name;\n\n        return displayNameA.localeCompare(displayNameB);\n    }\n\n    incomingWebhooks = (filter: string) => this.props.incomingWebhooks.\n        sort(this.incomingWebhookCompare).\n        filter((incomingWebhook: IncomingWebhook) => matchesFilter(incomingWebhook, this.props.channels[incomingWebhook.channel_id], filter)).\n        map((incomingWebhook: IncomingWebhook) => {\n            const canChange = this.props.canManageOthersWebhooks || this.props.user.id === incomingWebhook.user_id;\n            const channel = this.props.channels[incomingWebhook.channel_id];\n            return (\n                <InstalledIncomingWebhook\n                    key={incomingWebhook.id}\n                    incomingWebhook={incomingWebhook}\n                    onDelete={this.deleteIncomingWebhook}\n                    creator={this.props.users[incomingWebhook.user_id] || {}}\n                    canChange={canChange}\n                    team={this.props.team}\n                    channel={channel}\n                />\n            );\n        });\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.header'\n                        defaultMessage='Installed Incoming Webhooks'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.add'\n                        defaultMessage='Add Incoming Webhook'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/incoming_webhooks/add'}\n                addButtonId='addIncomingWebhook'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.empty'\n                        defaultMessage='No incoming webhooks found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_incoming_webhooks.emptySearch'\n                        defaultMessage='No incoming webhooks match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_incoming_webhooks.help'\n                        defaultMessage='Use incoming webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='http://docs.mattermost.com/developer/webhooks-incoming.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_incoming_webhooks.help.buildYourOwn'\n                                        defaultMessage='Build Your Own'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_incoming_webhooks.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_incoming_webhooks.search', 'Search Incoming Webhooks')}\n                loading={this.state.loading}\n            >\n                {(filter: string) => {\n                    const children = this.incomingWebhooks(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {getUser} from 'mattermost-redux/selectors/entities/users';\nimport {GlobalState} from 'mattermost-redux/types/store';\n\nimport {getDisplayNameByUser} from 'utils/utils';\n\nimport InstalledOAuthApp, {InstalledOAuthAppProps} from './installed_oauth_app';\n\nfunction mapStateToProps(state: GlobalState, ownProps: InstalledOAuthAppProps) {\n    const oauthApp = ownProps.oauthApp || {};\n    return {\n        creatorName: getDisplayNameByUser(state, getUser(state, oauthApp.creator_id)),\n    };\n}\n\nexport default connect(mapStateToProps)(InstalledOAuthApp);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\nimport {OAuthApp} from 'mattermost-redux/types/integrations';\nimport {Team} from 'mattermost-redux/types/teams';\n\nimport * as Utils from 'utils/utils.jsx';\nimport {t} from 'utils/i18n';\nimport FormError from 'components/form_error';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message.jsx';\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegration from '../delete_integration.jsx';\n\nconst FAKE_SECRET = '***************';\n\nexport function matchesFilter(oauthApp: OAuthApp, filter?: string | null): boolean {\n    if (!filter) {\n        return true;\n    }\n\n    return oauthApp.name.toLowerCase().includes(filter);\n}\n\nexport type InstalledOAuthAppProps = {\n\n    /**\n     * The team data\n     */\n    team: Partial<Team>;\n\n    /**\n     * The oauthApp data\n     */\n    oauthApp: OAuthApp;\n\n    creatorName: string;\n\n    /**\n     * The function to call when Regenerate Secret link is clicked\n     */\n    onRegenerateSecret: (oauthAppId: string) => Promise<{ error?: { message: string } }>;\n\n    /**\n     * The function to call when Delete link is clicked\n     */\n    onDelete: (oauthApp: OAuthApp) => void;\n\n    /**\n     * Set to filter OAuthApp\n     */\n    filter?: string | null;\n}\n\nexport type InstalleOAuthAppState = {\n    clientSecret: string;\n    error?: string | null;\n}\n\nexport default class InstalledOAuthApp extends React.PureComponent<InstalledOAuthAppProps, InstalleOAuthAppState> {\n    constructor(props: InstalledOAuthAppProps) {\n        super(props);\n\n        this.state = {\n            clientSecret: FAKE_SECRET,\n        };\n    }\n\n    handleShowClientSecret = (e?: React.MouseEvent): void => {\n        if (e && e.preventDefault) {\n            e.preventDefault();\n        }\n        this.setState({clientSecret: this.props.oauthApp.client_secret});\n    }\n\n    handleHideClientSecret = (e: React.MouseEvent): void => {\n        e.preventDefault();\n        this.setState({clientSecret: FAKE_SECRET});\n    }\n\n    handleRegenerate = (e: React.MouseEvent): void => {\n        e.preventDefault();\n        this.props.onRegenerateSecret(this.props.oauthApp.id).then(\n            ({error}) => {\n                if (error) {\n                    this.setState({error: error.message});\n                } else {\n                    this.setState({error: null});\n                    this.handleShowClientSecret();\n                }\n            },\n        );\n    }\n\n    handleDelete = (): void => {\n        this.props.onDelete(this.props.oauthApp);\n    }\n\n    render(): React.ReactNode {\n        const {oauthApp, creatorName} = this.props;\n        let error;\n\n        if (this.state.error) {\n            error = (\n                <FormError\n                    error={this.state.error}\n                />\n            );\n        }\n\n        if (!matchesFilter(oauthApp, this.props.filter)) {\n            return null;\n        }\n\n        let name;\n        if (oauthApp.name) {\n            name = oauthApp.name;\n        } else {\n            name = (\n                <FormattedMessage\n                    id='installed_integrations.unnamed_oauth_app'\n                    defaultMessage='Unnamed OAuth 2.0 Application'\n                />\n            );\n        }\n\n        let description;\n        if (oauthApp.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {oauthApp.description}\n                    </span>\n                </div>\n            );\n        }\n\n        const urls = (\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.callback_urls'\n                        defaultMessage='Callback URLs: {urls}'\n                        values={{\n                            urls: oauthApp.callback_urls.join(', '),\n                        }}\n                    />\n                </span>\n            </div>\n        );\n\n        let isTrusted;\n        if (oauthApp.is_trusted) {\n            isTrusted = Utils.localizeMessage('installed_oauth_apps.trusted.yes', 'Yes');\n        } else {\n            isTrusted = Utils.localizeMessage('installed_oauth_apps.trusted.no', 'No');\n        }\n\n        let showHide;\n        let clientSecret;\n        if (this.state.clientSecret === FAKE_SECRET) {\n            showHide = (\n                <button\n                    id='showSecretButton'\n                    className='style--none color--link'\n                    onClick={this.handleShowClientSecret}\n                >\n                    <FormattedMessage\n                        id='installed_integrations.showSecret'\n                        defaultMessage='Show Secret'\n                    />\n                </button>\n            );\n            clientSecret = (\n                <span className='item-details__token'>\n                    <FormattedMessage\n                        id='installed_integrations.client_secret'\n                        defaultMessage='Client Secret: **{clientSecret}**'\n                        values={{\n                            clientSecret: this.state.clientSecret,\n                        }}\n                    />\n                </span>\n            );\n        } else {\n            showHide = (\n                <button\n                    id='hideSecretButton'\n                    className='style--none color--link'\n                    onClick={this.handleHideClientSecret}\n                >\n                    <FormattedMessage\n                        id='installed_integrations.hideSecret'\n                        defaultMessage='Hide Secret'\n                    />\n                </button>\n            );\n            clientSecret = (\n                <span className='item-details__token'>\n                    <FormattedMarkdownMessage\n                        id='installed_integrations.client_secret'\n                        defaultMessage='Client Secret: **{clientSecret}**'\n                        values={{\n                            clientSecret: this.state.clientSecret,\n                        }}\n                    />\n                    <CopyText\n                        idMessage='integrations.copy_client_secret'\n                        defaultMessage='Copy Client Secret'\n                        value={this.state.clientSecret}\n                    />\n                </span>\n            );\n        }\n\n        const regen = (\n            <button\n                id='regenerateSecretButton'\n                className='style--none color--link'\n                onClick={this.handleRegenerate}\n            >\n                <FormattedMessage\n                    id='installed_integrations.regenSecret'\n                    defaultMessage='Regenerate Secret'\n                />\n            </button>\n        );\n\n        let icon;\n        if (oauthApp.icon_url) {\n            icon = (\n                <div className='integration__icon integration-list__icon'>\n                    <img\n                        alt={'get app screenshot'}\n                        src={oauthApp.icon_url}\n                    />\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-list__item'>\n                {icon}\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {name}\n                        </strong>\n                        <div className='item-actions'>\n                            {showHide}\n                            {' - '}\n                            {regen}\n                            {' - '}\n                            <Link to={`/${this.props.team.name}/integrations/oauth2-apps/edit?id=${oauthApp.id}`}>\n                                <FormattedMessage\n                                    id='installed_integrations.edit'\n                                    defaultMessage='Edit'\n                                />\n                            </Link>\n                            {' - '}\n                            <DeleteIntegration\n                                messageId={t('installed_oauth_apps.delete.confirm')}\n                                onDelete={this.handleDelete}\n                            />\n                        </div>\n                    </div>\n                    {error}\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__url word-break--all'>\n                            <FormattedMarkdownMessage\n                                id='installed_oauth_apps.is_trusted'\n                                defaultMessage='Is Trusted: **{isTrusted}**'\n                                values={{\n                                    isTrusted,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMarkdownMessage\n                                id='installed_integrations.client_id'\n                                defaultMessage='Client ID: **{clientId}**'\n                                values={{\n                                    clientId: oauthApp.id,\n                                }}\n                            />\n                            <CopyText\n                                idMessage='integrations.copy_client_id'\n                                defaultMessage='Copy Client Id'\n                                value={oauthApp.id}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        {clientSecret}\n                    </div>\n                    {urls}\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: creatorName,\n                                    createAt: oauthApp.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport * as Actions from 'mattermost-redux/actions/integrations';\nimport {getOAuthApps} from 'mattermost-redux/selectors/entities/integrations';\nimport {haveISystemPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {loadOAuthAppsAndProfiles} from 'actions/integration_actions';\n\nimport InstalledOAuthApps from './installed_oauth_apps.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const enableOAuthServiceProvider = config.EnableOAuthServiceProvider === 'true';\n\n    return {\n        canManageOauth: haveISystemPermission(state, {permission: Permissions.MANAGE_OAUTH}),\n        oauthApps: getOAuthApps(state),\n        enableOAuthServiceProvider,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadOAuthAppsAndProfiles,\n            regenOAuthAppSecret: Actions.regenOAuthAppSecret,\n            deleteOAuthApp: Actions.deleteOAuthApp,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledOAuthApps);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {localizeMessage} from 'utils/utils.jsx';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledOAuthApp from '../installed_oauth_app';\nimport {matchesFilter} from '../installed_oauth_app/installed_oauth_app';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class InstalledOAuthApps extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * The team data\n        */\n        team: PropTypes.object,\n\n        /**\n        * The oauthApps data\n        */\n        oauthApps: PropTypes.object,\n\n        /**\n        * Set if user can manage oath\n        */\n        canManageOauth: PropTypes.bool,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call to fetch OAuth apps\n            */\n            loadOAuthAppsAndProfiles: PropTypes.func.isRequired,\n\n            /**\n            * The function to call when Regenerate Secret link is clicked\n            */\n            regenOAuthAppSecret: PropTypes.func.isRequired,\n\n            /**\n            * The function to call when Delete link is clicked\n            */\n            deleteOAuthApp: PropTypes.func.isRequired,\n        }).isRequired,\n\n        /**\n        * Whether or not OAuth applications are enabled.\n        */\n        enableOAuthServiceProvider: PropTypes.bool,\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOAuthServiceProvider) {\n            this.props.actions.loadOAuthAppsAndProfiles().then(\n                () => this.setState({loading: false}),\n            );\n        }\n    }\n\n    deleteOAuthApp = (app) => {\n        if (app && app.id) {\n            this.props.actions.deleteOAuthApp(app.id);\n        }\n    }\n\n    oauthAppCompare(a, b) {\n        let nameA = a.name;\n        if (!nameA) {\n            nameA = localizeMessage('installed_integrations.unnamed_oauth_app', 'Unnamed OAuth 2.0 Application');\n        }\n\n        let nameB = b.name;\n        if (!nameB) {\n            nameB = localizeMessage('installed_integrations.unnamed_oauth_app', 'Unnamed OAuth 2.0 Application');\n        }\n\n        return nameA.localeCompare(nameB);\n    }\n\n    oauthApps = (filter) => Object.values(this.props.oauthApps).\n        filter((app) => matchesFilter(app, filter)).\n        sort(this.oauthAppCompare).\n        map((app) => {\n            return (\n                <InstalledOAuthApp\n                    key={app.id}\n                    team={this.props.team}\n                    oauthApp={app}\n                    onRegenerateSecret={this.props.actions.regenOAuthAppSecret}\n                    onDelete={this.deleteOAuthApp}\n                />\n            );\n        });\n\n    render() {\n        const integrationsEnabled = this.props.enableOAuthServiceProvider && this.props.canManageOauth;\n        let props;\n        if (integrationsEnabled) {\n            props = {\n                addLink: '/' + this.props.team.name + '/integrations/oauth2-apps/add',\n                addText: localizeMessage('installed_oauth_apps.add', 'Add OAuth 2.0 Application'),\n                addButtonId: 'addOauthApp',\n            };\n        }\n\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_oauth_apps.header'\n                        defaultMessage='OAuth 2.0 Applications'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_oauth_apps.help'\n                        defaultMessage='Create {oauthApplications} to securely integrate bots and third-party apps with Mattermost. Visit the {appDirectory} to find available self-hosted apps.'\n                        values={{\n                            oauthApplications: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://docs.mattermost.com/developer/oauth-2-0-applications.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_oauth_apps.help.oauthApplications'\n                                        defaultMessage='OAuth 2.0 applications'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_oauth_apps.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                emptyText={\n                    <FormattedMessage\n                        id='installed_oauth_apps.empty'\n                        defaultMessage='No OAuth 2.0 Applications found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_oauth_apps.emptySearch'\n                        defaultMessage='No OAuth 2.0 Applications match {searchTerm}'\n                    />\n                }\n                searchPlaceholder={localizeMessage('installed_oauth_apps.search', 'Search OAuth 2.0 Applications')}\n                loading={this.state.loading}\n                {...props}\n            >\n                {(filter) => {\n                    const children = this.oauthApps(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\nimport {Link} from 'react-router-dom';\n\nimport {t} from 'utils/i18n';\nimport CopyText from 'components/copy_text';\n\nimport DeleteIntegration from './delete_integration.jsx';\n\nexport function matchesFilter(outgoingWebhook, channel, filter) {\n    if (!filter) {\n        return true;\n    }\n\n    const {\n        display_name: displayName,\n        description,\n        trigger_words: triggerWords,\n    } = outgoingWebhook;\n\n    if (\n        (displayName && displayName.toLowerCase().indexOf(filter) !== -1) ||\n        (description && description.toLowerCase().indexOf(filter) !== -1)\n    ) {\n        return true;\n    }\n\n    if (triggerWords) {\n        for (const triggerWord of triggerWords) {\n            if (triggerWord.toLowerCase().indexOf(filter) !== -1) {\n                return true;\n            }\n        }\n    }\n\n    if (channel && channel.name) {\n        if (channel.name.toLowerCase().indexOf(filter) !== -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nexport default class InstalledOutgoingWebhook extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        * Data used for showing webhook details\n        */\n        outgoingWebhook: PropTypes.object.isRequired,\n\n        /**\n        * Function used for webhook token regeneration\n        */\n        onRegenToken: PropTypes.func.isRequired,\n\n        /**\n        * Function to call when webhook delete button is pressed\n        */\n        onDelete: PropTypes.func.isRequired,\n\n        /**\n        * String used for filtering webhook item\n        */\n        filter: PropTypes.string,\n\n        /**\n        * Data used for showing created by details\n        */\n        creator: PropTypes.object.isRequired,\n\n        /**\n        *  Set to show available actions on webhook\n        */\n        canChange: PropTypes.bool.isRequired,\n\n        /**\n        *  Data used in routing of webhook for modifications\n        */\n        team: PropTypes.object.isRequired,\n\n        /**\n        *  Data used for filtering of webhooks based in filter prop\n        */\n        channel: PropTypes.object,\n    }\n\n    handleRegenToken = (e) => {\n        e.preventDefault();\n\n        this.props.onRegenToken(this.props.outgoingWebhook);\n    }\n\n    handleDelete = () => {\n        this.props.onDelete(this.props.outgoingWebhook);\n    }\n\n    makeDisplayName(outgoingWebhook, channel) {\n        if (outgoingWebhook.display_name) {\n            return outgoingWebhook.display_name;\n        } else if (channel) {\n            return channel.display_name;\n        }\n        return (\n            <FormattedMessage\n                id='installed_outgoing_webhooks.unknown_channel'\n                defaultMessage='A Private Webhook'\n            />\n        );\n    }\n\n    render() {\n        const outgoingWebhook = this.props.outgoingWebhook;\n        const channel = this.props.channel;\n        const filter = this.props.filter ? this.props.filter.toLowerCase() : '';\n        const triggerWordsFull = 0;\n        const triggerWordsStartsWith = 1;\n\n        if (outgoingWebhook && !matchesFilter(outgoingWebhook, channel, filter)) {\n            return null;\n        }\n\n        const displayName = this.makeDisplayName(outgoingWebhook, channel);\n\n        let description = null;\n        if (outgoingWebhook.description) {\n            description = (\n                <div className='item-details__row'>\n                    <span className='item-details__description'>\n                        {outgoingWebhook.description}\n                    </span>\n                </div>\n            );\n        }\n\n        let triggerWords = null;\n        if (outgoingWebhook.trigger_words && outgoingWebhook.trigger_words.length > 0) {\n            triggerWords = (\n                <div className='item-details__row'>\n                    <span className='item-details__trigger-words'>\n                        <FormattedMessage\n                            id='installed_integrations.triggerWords'\n                            defaultMessage='Trigger Words: {triggerWords}'\n                            values={{\n                                triggerWords: outgoingWebhook.trigger_words.join(', '),\n                            }}\n                        />\n                    </span>\n                </div>\n            );\n        }\n\n        const urls = (\n            <div className='item-details__row'>\n                <span className='item-details__url word-break--all'>\n                    <FormattedMessage\n                        id='installed_integrations.callback_urls'\n                        defaultMessage='Callback URLs: {urls}'\n                        values={{\n                            urls: outgoingWebhook.callback_urls.join(', '),\n                        }}\n                    />\n                </span>\n            </div>\n        );\n\n        let triggerWhen;\n        if (outgoingWebhook.trigger_when === triggerWordsFull) {\n            triggerWhen = (\n                <FormattedMessage\n                    id='add_outgoing_webhook.triggerWordsTriggerWhenFullWord'\n                    defaultMessage='First word matches a trigger word exactly'\n                />\n            );\n        } else if (outgoingWebhook.trigger_when === triggerWordsStartsWith) {\n            triggerWhen = (\n                <FormattedMessage\n                    id='add_outgoing_webhook.triggerWordsTriggerWhenStartsWith'\n                    defaultMessage='First word starts with a trigger word'\n                />\n            );\n        }\n\n        let actions = null;\n        if (this.props.canChange) {\n            actions = (\n                <div className='item-actions'>\n                    <button\n                        className='style--none color--link'\n                        onClick={this.handleRegenToken}\n                    >\n                        <FormattedMessage\n                            id='installed_integrations.regenToken'\n                            defaultMessage='Regen Token'\n                        />\n                    </button>\n                    {' - '}\n                    <Link to={`/${this.props.team.name}/integrations/outgoing_webhooks/edit?id=${outgoingWebhook.id}`}>\n                        <FormattedMessage\n                            id='installed_integrations.edit'\n                            defaultMessage='Edit'\n                        />\n                    </Link>\n                    {' - '}\n                    <DeleteIntegration\n                        messageId={t('installed_outgoing_webhooks.delete.confirm')}\n                        onDelete={this.handleDelete}\n                    />\n                </div>\n            );\n        }\n\n        return (\n            <div className='backstage-list__item'>\n                <div className='item-details'>\n                    <div className='item-details__row d-flex flex-column flex-md-row justify-content-between'>\n                        <strong className='item-details__name'>\n                            {displayName}\n                        </strong>\n                        {actions}\n                    </div>\n                    {description}\n                    <div className='item-details__row'>\n                        <span className='item-details__content_type'>\n                            <FormattedMessage\n                                id='installed_integrations.content_type'\n                                defaultMessage='Content-Type: {contentType}'\n                                values={{\n                                    contentType: outgoingWebhook.content_type || 'application/x-www-form-urlencoded',\n                                }}\n                            />\n                        </span>\n                    </div>\n                    {triggerWords}\n                    <div className='item-details__row'>\n                        <span className='item-details__trigger-when'>\n                            <FormattedMessage\n                                id='installed_integrations.triggerWhen'\n                                defaultMessage='Trigger When: {triggerWhen}'\n                                values={{\n                                    triggerWhen,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__token'>\n                            <FormattedMessage\n                                id='installed_integrations.token'\n                                defaultMessage='Token: {token}'\n                                values={{\n                                    token: outgoingWebhook.token,\n                                }}\n                            />\n                            <CopyText\n                                value={outgoingWebhook.token}\n                            />\n                        </span>\n                    </div>\n                    <div className='item-details__row'>\n                        <span className='item-details__creation'>\n                            <FormattedMessage\n                                id='installed_integrations.creation'\n                                defaultMessage='Created by {creator} on {createAt, date, full}'\n                                values={{\n                                    creator: this.props.creator.username,\n                                    createAt: outgoingWebhook.create_at,\n                                }}\n                            />\n                        </span>\n                    </div>\n                    {urls}\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport * as Actions from 'mattermost-redux/actions/integrations';\nimport {getOutgoingHooks} from 'mattermost-redux/selectors/entities/integrations';\nimport {getCurrentTeamId} from 'mattermost-redux/selectors/entities/teams';\nimport {getAllChannels} from 'mattermost-redux/selectors/entities/channels';\nimport {getUsers} from 'mattermost-redux/selectors/entities/users';\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {Permissions} from 'mattermost-redux/constants';\nimport {getConfig} from 'mattermost-redux/selectors/entities/general';\n\nimport {loadOutgoingHooksAndProfilesForTeam} from 'actions/integration_actions';\n\nimport InstalledOutgoingWebhook from './installed_outgoing_webhooks.jsx';\n\nfunction mapStateToProps(state) {\n    const config = getConfig(state);\n    const teamId = getCurrentTeamId(state);\n    const canManageOthersWebhooks = haveITeamPermission(state, {team: teamId, permission: Permissions.MANAGE_OTHERS_OUTGOING_WEBHOOKS});\n    const outgoingHooks = getOutgoingHooks(state);\n    const outgoingWebhooks = Object.keys(outgoingHooks).\n        map((key) => outgoingHooks[key]).\n        filter((outgoingWebhook) => outgoingWebhook.team_id === teamId);\n    const enableOutgoingWebhooks = config.EnableOutgoingWebhooks === 'true';\n\n    return {\n        outgoingWebhooks,\n        channels: getAllChannels(state),\n        users: getUsers(state),\n        teamId,\n        canManageOthersWebhooks,\n        enableOutgoingWebhooks,\n    };\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return {\n        actions: bindActionCreators({\n            loadOutgoingHooksAndProfilesForTeam,\n            removeOutgoingHook: Actions.removeOutgoingHook,\n            regenOutgoingHookToken: Actions.regenOutgoingHookToken,\n        }, dispatch),\n    };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstalledOutgoingWebhook);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport * as Utils from 'utils/utils.jsx';\nimport Constants from 'utils/constants';\nimport BackstageList from 'components/backstage/components/backstage_list.jsx';\nimport InstalledOutgoingWebhook, {matchesFilter} from 'components/integrations/installed_outgoing_webhook.jsx';\nimport FormattedMarkdownMessage from 'components/formatted_markdown_message';\n\nexport default class InstalledOutgoingWebhooks extends React.PureComponent {\n    static propTypes = {\n\n        /**\n        *  Data used in passing down as props for webhook modifications\n        */\n        team: PropTypes.object,\n\n        /**\n        * Data used for checking if webhook is created by current user\n        */\n        user: PropTypes.object,\n\n        /**\n        *  Data used for checking modification privileges\n        */\n        canManageOthersWebhooks: PropTypes.bool,\n\n        /**\n        * Data used in passing down as props for showing webhook details\n        */\n        outgoingWebhooks: PropTypes.array,\n\n        /**\n        * Data used in sorting for displaying list and as props channel details\n        */\n        channels: PropTypes.object,\n\n        /**\n        *  Data used in passing down as props for webhook -created by label\n        */\n        users: PropTypes.object,\n\n        /**\n        *  Data used in passing as argument for loading webhooks\n        */\n        teamId: PropTypes.string,\n\n        actions: PropTypes.shape({\n\n            /**\n            * The function to call for removing outgoingWebhook\n            */\n            removeOutgoingHook: PropTypes.func,\n\n            /**\n            * The function to call for outgoingWebhook List and for the status of api\n            */\n            loadOutgoingHooksAndProfilesForTeam: PropTypes.func,\n\n            /**\n            * The function to call for regeneration of webhook token\n            */\n            regenOutgoingHookToken: PropTypes.func,\n        }),\n\n        /**\n        * Whether or not outgoing webhooks are enabled.\n        */\n        enableOutgoingWebhooks: PropTypes.bool,\n    }\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: true,\n        };\n    }\n\n    componentDidMount() {\n        if (this.props.enableOutgoingWebhooks) {\n            this.props.actions.loadOutgoingHooksAndProfilesForTeam(\n                this.props.teamId,\n                Constants.Integrations.START_PAGE_NUM,\n                Constants.Integrations.PAGE_SIZE,\n            ).then(\n                () => this.setState({loading: false}),\n            );\n        }\n    }\n\n    regenOutgoingWebhookToken = (outgoingWebhook) => {\n        this.props.actions.regenOutgoingHookToken(outgoingWebhook.id);\n    }\n\n    removeOutgoingHook = (outgoingWebhook) => {\n        this.props.actions.removeOutgoingHook(outgoingWebhook.id);\n    }\n\n    outgoingWebhookCompare = (a, b) => {\n        let displayNameA = a.display_name;\n        if (!displayNameA) {\n            const channelA = this.props.channels[a.channel_id];\n            if (channelA) {\n                displayNameA = channelA.display_name;\n            } else {\n                displayNameA = Utils.localizeMessage('installed_outgoing_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n\n        let displayNameB = b.display_name;\n        if (!displayNameB) {\n            const channelB = this.props.channels[b.channel_id];\n            if (channelB) {\n                displayNameB = channelB.display_name;\n            } else {\n                displayNameB = Utils.localizeMessage('installed_outgoing_webhooks.unknown_channel', 'A Private Webhook');\n            }\n        }\n        return displayNameA.localeCompare(displayNameB);\n    }\n\n    outgoingWebhooks = (filter) => this.props.outgoingWebhooks.\n        sort(this.outgoingWebhookCompare).\n        filter((outgoingWebhook) => matchesFilter(outgoingWebhook, this.props.channels[outgoingWebhook.channel_id], filter)).\n        map((outgoingWebhook) => {\n            const canChange = this.props.canManageOthersWebhooks || this.props.user.id === outgoingWebhook.creator_id;\n            const channel = this.props.channels[outgoingWebhook.channel_id];\n            return (\n                <InstalledOutgoingWebhook\n                    key={outgoingWebhook.id}\n                    outgoingWebhook={outgoingWebhook}\n                    onRegenToken={this.regenOutgoingWebhookToken}\n                    onDelete={this.removeOutgoingHook}\n                    creator={this.props.users[outgoingWebhook.creator_id] || {}}\n                    canChange={canChange}\n                    team={this.props.team}\n                    channel={channel}\n                />\n            );\n        });\n\n    render() {\n        return (\n            <BackstageList\n                header={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.header'\n                        defaultMessage='Installed Outgoing Webhooks'\n                    />\n                }\n                addText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.add'\n                        defaultMessage='Add Outgoing Webhook'\n                    />\n                }\n                addLink={'/' + this.props.team.name + '/integrations/outgoing_webhooks/add'}\n                addButtonId='addOutgoingWebhook'\n                emptyText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.empty'\n                        defaultMessage='No outgoing webhooks found'\n                    />\n                }\n                emptyTextSearch={\n                    <FormattedMarkdownMessage\n                        id='installed_outgoing_webhooks.emptySearch'\n                        defaultMessage='No outgoing webhooks match {searchTerm}'\n                    />\n                }\n                helpText={\n                    <FormattedMessage\n                        id='installed_outgoing_webhooks.help'\n                        defaultMessage='Use outgoing webhooks to connect external tools to Mattermost. {buildYourOwn} or visit the {appDirectory} to find self-hosted, third-party apps and integrations.'\n                        values={{\n                            buildYourOwn: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='http://docs.mattermost.com/developer/webhooks-outgoing.html'\n                                >\n                                    <FormattedMessage\n                                        id='installed_outgoing_webhooks.help.buildYourOwn'\n                                        defaultMessage='Build your own'\n                                    />\n                                </a>\n                            ),\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='installed_outgoing_webhooks.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                }\n                searchPlaceholder={Utils.localizeMessage('installed_outgoing_webhooks.search', 'Search Outgoing Webhooks')}\n                loading={this.state.loading}\n            >\n                {(filter) => {\n                    const children = this.outgoingWebhooks(filter);\n                    return [children, children.length > 0];\n                }}\n            </BackstageList>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Link} from 'react-router-dom';\n\nexport default class IntegrationOption extends React.PureComponent {\n    static get propTypes() {\n        return {\n            image: PropTypes.string.isRequired,\n            title: PropTypes.node.isRequired,\n            description: PropTypes.node.isRequired,\n            link: PropTypes.string.isRequired,\n        };\n    }\n\n    render() {\n        const {image, title, description, link} = this.props;\n\n        return (\n            <Link\n                to={link}\n                className='integration-option'\n            >\n                <img\n                    alt={'integration image'}\n                    className='integration-option__image'\n                    src={image}\n                />\n                <div className='integration-option__title'>\n                    {title}\n                </div>\n                <div className='integration-option__description'>\n                    {description}\n                </div>\n            </Link>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {FormattedMessage} from 'react-intl';\n\nimport {Permissions} from 'mattermost-redux/constants';\n\nimport BotAccountsIcon from 'images/bot_default_icon.png';\n\nimport * as Utils from 'utils/utils.jsx';\nimport IncomingWebhookIcon from 'images/incoming_webhook.jpg';\nimport OAuthIcon from 'images/oauth_icon.png';\nimport OutgoingWebhookIcon from 'images/outgoing_webhook.jpg';\nimport SlashCommandIcon from 'images/slash_command_icon.jpg';\n\nimport SystemPermissionGate from 'components/permissions_gates/system_permission_gate';\nimport TeamPermissionGate from 'components/permissions_gates/team_permission_gate';\n\nimport IntegrationOption from './integration_option.jsx';\n\nexport default class Integrations extends React.PureComponent {\n    static get propTypes() {\n        return {\n            team: PropTypes.object,\n            user: PropTypes.object,\n            siteName: PropTypes.string,\n            enableIncomingWebhooks: PropTypes.bool,\n            enableOutgoingWebhooks: PropTypes.bool,\n            enableCommands: PropTypes.bool,\n            enableOAuthServiceProvider: PropTypes.bool,\n        };\n    }\n\n    componentDidMount() {\n        this.updateTitle();\n    }\n\n    updateTitle = () => {\n        const currentSiteName = this.props.siteName || '';\n        document.title = Utils.localizeMessage('admin.sidebar.integrations', 'Integrations') + ' - ' + this.props.team.display_name + ' ' + currentSiteName;\n    }\n\n    render() {\n        const options = [];\n\n        if (this.props.enableIncomingWebhooks) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_INCOMING_WEBHOOKS]}\n                    key='incomingWebhookPermission'\n                >\n                    <IntegrationOption\n                        key='incomingWebhook'\n                        image={IncomingWebhookIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.incomingWebhook.title'\n                                defaultMessage='Incoming Webhooks'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.incomingWebhook.description'\n                                defaultMessage='Incoming webhooks allow external integrations to send messages'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/incoming_webhooks'}\n                    />\n                </TeamPermissionGate>,\n            );\n        }\n\n        if (this.props.enableOutgoingWebhooks) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_OUTGOING_WEBHOOKS]}\n                    key='outgoingWebhookPermission'\n                >\n                    <IntegrationOption\n                        key='outgoingWebhook'\n                        image={OutgoingWebhookIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.outgoingWebhook.title'\n                                defaultMessage='Outgoing Webhooks'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.outgoingWebhook.description'\n                                defaultMessage='Outgoing webhooks allow external integrations to receive and respond to messages'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/outgoing_webhooks'}\n                    />\n                </TeamPermissionGate>,\n            );\n        }\n\n        if (this.props.enableCommands) {\n            options.push(\n                <TeamPermissionGate\n                    teamId={this.props.team.id}\n                    permissions={[Permissions.MANAGE_SLASH_COMMANDS]}\n                    key='commandPermission'\n                >\n                    <IntegrationOption\n                        key='command'\n                        image={SlashCommandIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.command.title'\n                                defaultMessage='Slash Commands'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.command.description'\n                                defaultMessage='Slash commands send events to an external integration'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/commands'}\n                    />\n                </TeamPermissionGate>,\n            );\n        }\n\n        if (this.props.enableOAuthServiceProvider) {\n            options.push(\n                <SystemPermissionGate\n                    permissions={[Permissions.MANAGE_OAUTH]}\n                    key='oauth2AppsPermission'\n                >\n                    <IntegrationOption\n                        key='oauth2Apps'\n                        image={OAuthIcon}\n                        title={\n                            <FormattedMessage\n                                id='integrations.oauthApps.title'\n                                defaultMessage='OAuth 2.0 Applications'\n                            />\n                        }\n                        description={\n                            <FormattedMessage\n                                id='integrations.oauthApps.description'\n                                defaultMessage='Auth 2.0 allows external applications to make authorized requests to the Mattermost API'\n                            />\n                        }\n                        link={'/' + this.props.team.name + '/integrations/oauth2-apps'}\n                    />\n                </SystemPermissionGate>,\n            );\n        }\n\n        options.push(\n            <SystemPermissionGate\n                permissions={['manage_bots']}\n                key='botsPermissions'\n            >\n                <IntegrationOption\n                    image={BotAccountsIcon}\n                    title={\n                        <FormattedMessage\n                            id='bots.manage.header'\n                            defaultMessage='Bot Accounts'\n                        />\n                    }\n                    description={\n                        <FormattedMessage\n                            id='bots.manage.description'\n                            defaultMessage='Use bot accounts to integrate with Mattermost through plugins or the API'\n                        />\n                    }\n                    link={'/' + this.props.team.name + '/integrations/bots'}\n                />\n            </SystemPermissionGate>,\n        );\n\n        return (\n            <div className='backstage-content row'>\n                <div className='backstage-header'>\n                    <h1>\n                        <FormattedMessage\n                            id='integrations.header'\n                            defaultMessage='Integrations'\n                        />\n                    </h1>\n                </div>\n                <div className='backstage-list__help'>\n                    <FormattedMessage\n                        id='integrations.help'\n                        defaultMessage='Visit the {appDirectory} to find self-hosted, third-party apps and integrations for Mattermost.'\n                        values={{\n                            appDirectory: (\n                                <a\n                                    target='_blank'\n                                    rel='noopener noreferrer'\n                                    href='https://about.mattermost.com/default-app-directory/'\n                                >\n                                    <FormattedMessage\n                                        id='integrations.help.appDirectory'\n                                        defaultMessage='App Directory'\n                                    />\n                                </a>\n                            ),\n                        }}\n                    />\n                </div>\n                <div className='integrations-list d-flex flex-wrap'>\n                    {options}\n                </div>\n            </div>\n        );\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nexport type Props = {\n\n    /**\n     * Permissions enough to pass the gate (binary OR)\n     */\n    permissions: string[];\n\n    /**\n     * Has permission\n     */\n    hasPermission: boolean;\n\n    /**\n     * Invert the permission (used for else)\n     */\n    invert: boolean;\n\n    /**\n     * Content protected by the permissions gate\n     */\n    children: React.ReactNode;\n}\n\nexport default class AnyTeamPermissionGate extends React.PureComponent<Props> {\n    static defaultProps = {\n        invert: false,\n    }\n\n    render() {\n        if (this.props.hasPermission !== this.props.invert) {\n            return this.props.children;\n        }\n        return null;\n    }\n}\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport {connect} from 'react-redux';\n\nimport {haveITeamPermission} from 'mattermost-redux/selectors/entities/roles';\nimport {getMyTeams} from 'mattermost-redux/selectors/entities/teams';\nimport {GlobalState} from 'mattermost-redux/types/store';\n\nimport AnyTeamPermissionGate from './any_team_permission_gate';\n\ntype Props = {\n    permissions: string[];\n}\n\nfunction mapStateToProps(state: GlobalState, ownProps: Props) {\n    const teams = getMyTeams(state);\n    for (const team of teams) {\n        for (const permission of ownProps.permissions) {\n            if (haveITeamPermission(state, {team: team.id, permission})) {\n                return {hasPermission: true};\n            }\n        }\n    }\n\n    return {hasPermission: false};\n}\n\nexport default connect(mapStateToProps)(AnyTeamPermissionGate);\n","// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\n\nimport React from 'react';\n\nimport LocalizedIcon from 'components/localized_icon';\nimport {t} from 'utils/i18n';\n\nexport default function SearchIcon() {\n    return (\n        <LocalizedIcon\n            className='fa fa-search'\n            title={{id: t('generic_icons.search'), defaultMessage: 'Search Icon'}}\n        />\n    );\n}\n","export default __webpack_public_path__ + \"files/f6e98d6b5fccaa0c93bd8091b05295ad.png\";","export default __webpack_public_path__ + \"files/357ed0208b2f0eab27a2b67d4b5f129c.jpg\";","export default __webpack_public_path__ + \"files/445dd2ab20befc4a78c9e77bc9fd260f.png\";","export default __webpack_public_path__ + \"files/4651fd92bdc643485b9edc86e79e02e7.jpg\";","export default __webpack_public_path__ + \"files/8a9816ae9c0cd846ae780433ccb979f0.jpg\";","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar client_1 = require(\"../client\");\nvar action_types_1 = require(\"../action_types\");\nvar helpers_1 = require(\"./helpers\");\nvar BOTS_PER_PAGE_DEFAULT = 20;\nfunction createBot(bot) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.createBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            bot,\n        ],\n    });\n}\nexports.createBot = createBot;\nfunction patchBot(botUserId, botPatch) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.patchBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n            botPatch,\n        ],\n    });\n}\nexports.patchBot = patchBot;\nfunction loadBot(botUserId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.getBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\nexports.loadBot = loadBot;\nfunction loadBots(page, perPage) {\n    if (page === void 0) { page = 0; }\n    if (perPage === void 0) { perPage = BOTS_PER_PAGE_DEFAULT; }\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.getBotsIncludeDeleted,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNTS,\n        params: [\n            page,\n            perPage,\n        ],\n    });\n}\nexports.loadBots = loadBots;\nfunction disableBot(botUserId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.disableBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\nexports.disableBot = disableBot;\nfunction enableBot(botUserId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.enableBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n        ],\n    });\n}\nexports.enableBot = enableBot;\nfunction assignBot(botUserId, newOwnerId) {\n    return helpers_1.bindClientFunc({\n        clientFunc: client_1.Client4.assignBot,\n        onSuccess: action_types_1.BotTypes.RECEIVED_BOT_ACCOUNT,\n        params: [\n            botUserId,\n            newOwnerId,\n        ],\n    });\n}\nexports.assignBot = assignBot;\n//# sourceMappingURL=bots.js.map","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar reselect_1 = require(\"reselect\");\nvar common_1 = require(\"./common\");\nexports.ExternalBotAccountNames = ['mattermost-advisor'];\nfunction getBotAccounts(state) {\n    return state.entities.bots.accounts;\n}\nexports.getBotAccounts = getBotAccounts;\nexports.getExternalBotAccounts = reselect_1.createSelector(getBotAccounts, common_1.getUsers, function (botAccounts, userProfiles) {\n    var nextState = {};\n    Object.values(botAccounts).forEach(function (botAccount) {\n        var botUser = userProfiles[botAccount.user_id];\n        if (botUser && !exports.ExternalBotAccountNames.includes(botUser.username)) {\n            nextState[botAccount.user_id] = botAccount;\n        }\n    });\n    return nextState;\n});\n//# sourceMappingURL=bots.js.map","\"use strict\";\n// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.\n// See LICENSE.txt for license information.\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar reselect_1 = require(\"reselect\");\nvar teams_1 = require(\"./teams\");\nfunction getIncomingHooks(state) {\n    return state.entities.integrations.incomingHooks;\n}\nexports.getIncomingHooks = getIncomingHooks;\nfunction getOutgoingHooks(state) {\n    return state.entities.integrations.outgoingHooks;\n}\nexports.getOutgoingHooks = getOutgoingHooks;\nfunction getCommands(state) {\n    return state.entities.integrations.commands;\n}\nexports.getCommands = getCommands;\nfunction getOAuthApps(state) {\n    return state.entities.integrations.oauthApps;\n}\nexports.getOAuthApps = getOAuthApps;\nfunction getSystemCommands(state) {\n    return state.entities.integrations.systemCommands;\n}\nexports.getSystemCommands = getSystemCommands;\n/**\n * get outgoing hooks in current team\n */\nexports.getOutgoingHooksInCurrentTeam = reselect_1.createSelector(teams_1.getCurrentTeamId, getOutgoingHooks, function (teamId, hooks) {\n    return Object.values(hooks).filter(function (o) { return o.team_id === teamId; });\n});\nexports.getAllCommands = reselect_1.createSelector(getCommands, getSystemCommands, function (commands, systemCommands) {\n    return tslib_1.__assign(tslib_1.__assign({}, commands), systemCommands);\n});\nexports.getAutocompleteCommandsList = reselect_1.createSelector(exports.getAllCommands, teams_1.getCurrentTeamId, function (commands, currentTeamId) {\n    return Object.values(commands).filter(function (command) {\n        return command && (!command.team_id || command.team_id === currentTeamId) && command.auto_complete;\n    }).sort(function (a, b) { return a.display_name.localeCompare(b.display_name); });\n});\n//# sourceMappingURL=integrations.js.map"],"sourceRoot":""}