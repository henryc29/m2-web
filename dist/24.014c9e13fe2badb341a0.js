(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1304:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r(5),s=r.n(a),i=r(1506);function n(){const{formatMessage:e}=Object(i.a)();return s.a.createElement("i",{className:"fa fa-1x fa-angle-left",title:e({id:"generic_icons.logout",defaultMessage:"Logout Icon"})})}},2313:function(e,t,r){"use strict";r.r(t);var a=r(264),s=r(7),i=r(16),n=r(13),c=r(95),o=(r(56),r(126),r(183),r(33),r(515),r(125)),l=r.n(o),m=r(5),d=r.n(m),u=r(1336),g=r(1262),f=r(1129),h=r(48),v=r(1144),p=r(1225),E=r(1145),T=r(1169),S=r(1304),O=r(1201),b=r(93),_=r(1474),R=r(37),y=r(0);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends d.a.PureComponent{constructor(e){super(e),M(this,"formattedText",void 0),M(this,"getTermsOfService",async()=>{this.setState({customTermsOfServiceId:"",customTermsOfServiceText:"",loading:!0});const{data:e}=await this.props.actions.getTermsOfService();e?this.setState({customTermsOfServiceId:e.id,customTermsOfServiceText:e.text,loading:!1}):v.e("/login?extra=".concat(y.l.GET_TERMS_ERROR))}),M(this,"handleLogoutClick",e=>{e.preventDefault(),v.e("/login")}),M(this,"handleAcceptTerms",()=>{this.setState({loadingAgree:!0,serverError:null}),this.registerUserAction(!0,()=>{const e=new URLSearchParams(this.props.location.search).get("redirect_to");e&&e.match(/^\/([^/]|$)/)?b.a.push(e):v.f()})}),M(this,"handleRejectTerms",()=>{this.setState({loadingDisagree:!0,serverError:null}),this.registerUserAction(!1,()=>{v.e("/login?extra=".concat(y.l.TERMS_REJECTED))})}),M(this,"registerUserAction",async(e,t)=>{const{data:r}=await this.props.actions.updateMyTermsOfServiceStatus(this.state.customTermsOfServiceId,e);r?t(r):this.setState({loadingAgree:!1,loadingDisagree:!1,serverError:d.a.createElement(f.a,{id:"terms_of_service.api_error",defaultMessage:"Unable to complete the request. If this issue persists, contact your System Administrator."})})}),this.state={customTermsOfServiceId:"",customTermsOfServiceText:"",loading:!0,loadingAgree:!1,loadingDisagree:!1,serverError:null},this.formattedText=Object(h.memoizeResult)(t=>Object(R.f)(t,{},e.emojiMap))}componentDidMount(){this.props.termsEnabled?this.getTermsOfService():v.f()}render(){if(this.state.loading)return d.a.createElement(E.a,null);let e="terms-of-service__markdown";return this.state.serverError?e+=" terms-of-service-error__height--fill":e+=" terms-of-service__height--fill",d.a.createElement("div",null,d.a.createElement(p.a,null),d.a.createElement("div",{className:"signup-header"},d.a.createElement("a",{href:"#",onClick:this.handleLogoutClick},d.a.createElement(S.a,null),d.a.createElement(f.a,{id:"web.header.logout",defaultMessage:"Logout"}))),d.a.createElement("div",null,d.a.createElement("div",{className:"signup-team__container terms-of-service__container"},d.a.createElement("div",{className:e},d.a.createElement("div",{className:"medium-center","data-testid":"termsOfService"},Object(_.a)(this.formattedText(this.state.customTermsOfServiceText),!1,{mentions:!1}))),d.a.createElement("div",{className:"terms-of-service__footer medium-center"},d.a.createElement(u.a,{className:"terms-of-service__button-group"},d.a.createElement(g.a,{bsStyle:"primary",disabled:this.state.loadingAgree||this.state.loadingDisagree,id:"acceptTerms",onClick:this.handleAcceptTerms,type:"submit"},this.state.loadingAgree&&d.a.createElement(T.a,null),d.a.createElement(f.a,{id:"terms_of_service.agreeButton",defaultMessage:"I Agree"})),d.a.createElement(g.a,{bsStyle:"link",disabled:this.state.loadingAgree||this.state.loadingDisagree,id:"rejectTerms",onClick:this.handleRejectTerms,type:"reset"},this.state.loadingDisagree&&d.a.createElement(T.a,null),d.a.createElement(f.a,{id:"terms_of_service.disagreeButton",defaultMessage:"I Disagree"}))),Boolean(this.state.serverError)&&d.a.createElement("div",{className:"terms-of-service__server-error alert alert-warning"},d.a.createElement(O.a,null)," ",this.state.serverError)))))}}M(j,"propTypes",{location:l.a.shape({search:l.a.string.isRequired}).isRequired,termsEnabled:l.a.bool.isRequired,actions:l.a.shape({getTermsOfService:l.a.func.isRequired,updateMyTermsOfServiceStatus:l.a.func.isRequired}).isRequired,emojiMap:l.a.any.isRequired});t.default=Object(a.connect)((function(e){return{termsEnabled:"true"===Object(n.getConfig)(e).EnableCustomTermsOfService,emojiMap:Object(c.a)(e)}}),(function(e){return{actions:Object(s.bindActionCreators)({getTermsOfService:i.getTermsOfService,updateMyTermsOfServiceStatus:i.updateMyTermsOfServiceStatus},e)}}))(j)}}]);
//# sourceMappingURL=24.014c9e13fe2badb341a0.js.map