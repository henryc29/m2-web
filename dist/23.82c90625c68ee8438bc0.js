(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1272:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(5),r=a.n(n);class s extends r.a.PureComponent{render(){return r.a.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},r.a.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},r.a.createElement("g",{transform:"translate(-285.000000, -933.000000)",id:"All-Team-Members"},r.a.createElement("g",{transform:"translate(245.000000, 698.000000)"},r.a.createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},r.a.createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},r.a.createElement("g",{id:"row-checkbox---Public-Channels",transform:"translate(12.000000, 35.000000)"},r.a.createElement("g",{id:"Stacked-Group",transform:"translate(0.000000, 5.000000)"},r.a.createElement("g",{id:"data-table/1st/row-checkbox-label-base"},r.a.createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},r.a.createElement("path",{d:"M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z",id:"checkbox---checked"})))))))))))}}},2306:function(e,t,a){"use strict";a.r(t);var n=a(264),r=a(17),s=a(13),i=a(20),o=(a(66),a(125)),l=a.n(o),c=a(5),p=a.n(c),d=a(1129),m=a.p+"files/34c82b247a366d047105491d979556bf.png",g=a.p+"files/9b0519e1f5fbf82b0548515994fd49d4.png",h=a.p+"files/af9b6341b25687bd266ae48515c11e04.svg",u=a(1134),f=a(1272),b=a(1259),w=a(0),E=a(12),k=a(15);function L(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class _ extends c.PureComponent{constructor(e){super(e),L(this,"clearLandingPreferenceIfNotChecked",()=>{this.state.navigating||b.a.clearLandingPreference(this.props.siteUrl)}),L(this,"checkLandingPreferenceBrowser",()=>{const e=b.a.getLandingPreference(this.props.siteUrl);return e&&e===w.w.BROWSER}),L(this,"checkLandingPreferenceApp",()=>{const e=b.a.getLandingPreference(this.props.siteUrl);return e&&e===w.w.MATTERMOSTAPP}),L(this,"handleChecked",()=>{this.state.rememberChecked&&b.a.clearLandingPreference(this.props.siteUrl),this.setState({rememberChecked:!this.state.rememberChecked})}),L(this,"setPreference",(e,t)=>{if(this.state.rememberChecked)switch(e){case w.w.MATTERMOSTAPP:b.a.setLandingPreferenceToMattermostApp(this.props.siteUrl);break;case w.w.BROWSER:b.a.setLandingPreferenceToBrowser(this.props.siteUrl)}else t&&b.a.clearLandingPreference(this.props.siteUrl)}),L(this,"openMattermostApp",()=>{this.setPreference(w.w.MATTERMOSTAPP),this.setState({redirectPage:!0}),window.location.href=this.state.nativeLocation}),L(this,"openInBrowser",()=>{this.setPreference(w.w.BROWSER),window.location.href=this.state.location}),L(this,"renderSystemDialogMessage",()=>k.p()?p.a.createElement(d.a,{id:"get_app.systemDialogMessageMobile",defaultMessage:"View in App"}):p.a.createElement(d.a,{id:"get_app.systemDialogMessage",defaultMessage:"View in Desktop App"})),L(this,"renderGoNativeAppMessage",()=>p.a.createElement("a",{href:E.fb()?"#":this.state.nativeLocation,onMouseDown:()=>{this.setPreference(w.w.MATTERMOSTAPP,!0)},onClick:()=>{if(this.setState({redirectPage:!0,navigating:!0}),E.fb()){if(k.c()){const e=setTimeout(()=>{window.location.replace(this.getDownloadLink())},2e3);window.addEventListener("blur",()=>{clearTimeout(e)})}window.location.replace(this.state.nativeLocation)}},className:"btn btn-primary btn-lg get-app__download"},this.renderSystemDialogMessage())),L(this,"getDownloadLink",()=>k.m()?this.props.iosAppLink:k.c()?this.props.androidAppLink:this.props.desktopAppLink),L(this,"handleBrandImageError",()=>{this.setState({brandImageError:!0})}),L(this,"renderCheckboxIcon",()=>this.state.rememberChecked?p.a.createElement(f.a,null):null),L(this,"renderGraphic",()=>k.p()?p.a.createElement("img",{src:g}):p.a.createElement("img",{src:m})),L(this,"renderDownloadLinkText",()=>k.p()?p.a.createElement(d.a,{id:"get_app.dontHaveTheMobileApp",defaultMessage:"Don't have the Mobile App?"}):p.a.createElement(d.a,{id:"get_app.dontHaveTheDesktopApp",defaultMessage:"Don't have the Desktop App?"})),L(this,"renderDownloadLinkSection",()=>{const e=this.getDownloadLink();return this.state.redirectPage?p.a.createElement("div",{className:"get-app__download-link"},p.a.createElement(u.b,{id:"get_app.openLinkInBrowser",defaultMessage:"Or, [open this link in your browser.](!{link})",values:{link:this.state.location}})):e?p.a.createElement("div",{className:"get-app__download-link"},this.renderDownloadLinkText()," ",p.a.createElement("br",null),p.a.createElement("a",{href:e},p.a.createElement(d.a,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))):null}),L(this,"renderDialogHeader",()=>{const e=this.getDownloadLink(),t=k.p();let a=p.a.createElement(d.a,{id:"get_app.openingLink",defaultMessage:"Opening link in Mattermost..."});if(this.props.enableCustomBrand&&(a=p.a.createElement(d.a,{id:"get_app.openingLinkWhiteLabel",defaultMessage:"Opening link in the Desktop App..."})),this.state.redirectPage)return p.a.createElement("div",{className:"get-app__launching"},a,p.a.createElement("div",{className:"get-app__alternative".concat(this.state.redirectPage?" redirect-page":"")},p.a.createElement(d.a,{id:"get_app.redirectedInMoments",defaultMessage:"You will be redirected in a few moments."}),p.a.createElement("br",null),this.renderDownloadLinkText()," ",p.a.createElement("br",{className:"mobile-only"}),p.a.createElement("a",{href:e},p.a.createElement(d.a,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))));let n=p.a.createElement(d.a,{id:"get_app.ifNothingPrompts",defaultMessage:"You can view {siteName} in the desktop app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" Mattermost"}});return t&&(n=p.a.createElement(d.a,{id:"get_app.ifNothingPromptsMobile",defaultMessage:"You can view {siteName} in the mobile app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" Mattermost"}})),p.a.createElement("div",{className:"get-app__launching"},p.a.createElement(d.a,{id:"get_app.launching",defaultMessage:"Where would you like to view this?"}),p.a.createElement("div",{className:"get-app__alternative"},n))}),L(this,"renderDialogBody",()=>this.state.redirectPage?p.a.createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),this.renderDownloadLinkSection()):p.a.createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),p.a.createElement("div",{className:"get-app__buttons"},p.a.createElement("div",{className:"get-app__status"},this.renderGoNativeAppMessage()),p.a.createElement("div",{className:"get-app__status"},p.a.createElement("a",{href:this.state.location,onMouseDown:()=>{this.setPreference(w.w.BROWSER,!0)},onClick:()=>{this.setState({navigating:!0})},className:"btn btn-default btn-lg get-app__continue"},p.a.createElement(d.a,{id:"get_app.continueToBrowser",defaultMessage:"View in Browser"})))),p.a.createElement("div",{className:"get-app__preference"},p.a.createElement("button",{className:"get-app__checkbox ".concat(this.state.rememberChecked?"checked":""),onClick:this.handleChecked},this.renderCheckboxIcon()),p.a.createElement(d.a,{id:"get_app.rememberMyPreference",defaultMessage:"Remember my preference"})),this.renderDownloadLinkSection())),L(this,"renderHeader",()=>{let e=p.a.createElement("div",{className:"get-app__header"},p.a.createElement("img",{src:h,className:"get-app__logo"}));if(this.props.enableCustomBrand&&this.props.brandImageUrl){let t;this.props.brandImageUrl&&!this.state.brandImageError&&(t=p.a.createElement("img",{src:this.props.brandImageUrl,onError:this.handleBrandImageError,className:"get-app__custom-logo"})),e=p.a.createElement("div",{className:"get-app__header"},t,p.a.createElement("div",{className:"get-app__custom-site-name"},p.a.createElement("span",null,this.props.siteName)))}return e});const t=window.location.href.replace("/landing#","");this.state={rememberChecked:!1,redirectPage:!1,location:t,nativeLocation:t.replace(/^(https|http)/,"mattermost"),brandImageError:!1,navigating:!1},E.fb()&&!b.a.hasSeenLandingPage()&&b.a.setLandingPageSeen(!0)}componentDidMount(){E.d(this.props.defaultTheme),this.checkLandingPreferenceApp()&&this.openMattermostApp(),window.addEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}componentWillUnmount(){window.removeEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}render(){const e=k.p();return this.checkLandingPreferenceBrowser()?(this.openInBrowser(),null):p.a.createElement("div",{className:"get-app"},this.renderHeader(),p.a.createElement("div",{className:"get-app__dialog"},p.a.createElement("div",{className:"get-app__graphic ".concat(e?"mobile":"")},this.renderGraphic()),this.renderDialogBody()))}}L(_,"propTypes",{defaultTheme:l.a.any.isRequired,desktopAppLink:l.a.string,iosAppLink:l.a.string,androidAppLink:l.a.string,siteUrl:l.a.string,siteName:l.a.string,brandImageUrl:l.a.string,enableCustomBrand:l.a.bool.isRequired});t.default=Object(n.connect)((function(e){const t=Object(s.getConfig)(e);return{desktopAppLink:t.AppDownloadLink,iosAppLink:t.IosAppDownloadLink,androidAppLink:t.AndroidAppDownloadLink,defaultTheme:Object(i.getTheme)(e),siteUrl:t.SiteURL,siteName:t.SiteName,brandImageUrl:r.Client4.getBrandImageUrl("0"),enableCustomBrand:"true"===t.EnableCustomBrand}}))(_)}}]);
//# sourceMappingURL=23.82c90625c68ee8438bc0.js.map