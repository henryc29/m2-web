(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1163:function(e,a,t){"use strict";t.d(a,"a",(function(){return p}));t(94);var n=t(125),i=t.n(n),s=t(5),o=t.n(s),l=t(1129),r=t(1127);function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class p extends o.a.PureComponent{render(){return o.a.createElement("div",{id:"back_button",className:"signup-header"},o.a.createElement(r.Link,{onClick:this.props.onClick,to:this.props.url},o.a.createElement(l.a,{id:"generic_icons.back",defaultMessage:"Back Icon"},e=>o.a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e.toString()})),o.a.createElement(l.a,{id:"web.header.back",defaultMessage:"Back"})))}}c(p,"propTypes",{url:i.a.string,onClick:i.a.func}),c(p,"defaultProps",{url:"/"})},1166:function(e,a,t){"use strict";a.a=t.p+"files/ab8aa80cba445eb0fb75e6611c292567.png"},2315:function(e,a,t){"use strict";t.r(a);t(183),t(33),t(515);var n=t(264),i=t(7),s=t(13),o=t(8),l=t(184),r=t(114),c=t(86),p=t(1237),u=(t(56),t(94),t(125)),d=t.n(u),m=t(5),g=t.n(m),h=t(1129),b=t(1127),f=t(17),E=t(93),v=t(1144),L=t(1166),S=t(1225),I=t(1163),_=t(1156),w=t(1170),N=t(1145),O=t(0),U=t(11);function k(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}class A extends g.a.PureComponent{constructor(e){super(e),k(this,"addUserToTeamFromInvite",async(e,a)=>{const{data:t,error:n}=await this.props.actions.addUserToTeamFromInvite(e,a);t?E.a.push("/"+t.name+"/channels/".concat(O.l.DEFAULT_CHANNEL)):n&&this.handleInvalidInvite(n)}),k(this,"getInviteInfo",async e=>{const{data:a,error:t}=await this.props.actions.getTeamInviteInfo(e);a?this.setState({serverError:"",loading:!1}):t&&this.handleInvalidInvite(t)}),k(this,"handleInvalidInvite",e=>{let a;a="store.sql_user.save.max_accounts.app_error"===e.server_error_id||"api.team.add_user_to_team_from_invite.guest.app_error"===e.server_error_id?e.message:g.a.createElement(h.a,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."}),this.setState({noOpenServerError:!0,loading:!1,serverError:a})}),k(this,"renderSignupControls",()=>{let e=[];if(this.props.enableSignUpWithEmail&&e.push(g.a.createElement(b.Link,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},g.a.createElement("span",null,g.a.createElement(w.a,{className:"icon fa fa-envelope",component:"span",title:{id:Object(U.b)("signup.email.icon"),defaultMessage:"Email Icon"}}),g.a.createElement(h.a,{id:"signup.email",defaultMessage:"Email and Password"})))),this.props.enableSignUpWithGitLab&&e.push(g.a.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:f.Client4.getOAuthRoute()+"/gitlab/signup"+window.location.search},g.a.createElement("span",null,g.a.createElement("span",{className:"icon"}),g.a.createElement("span",null,g.a.createElement(h.a,{id:"signup.gitlab",defaultMessage:"GitLab Single Sign-On"}))))),this.props.isLicensed&&this.props.enableSignUpWithGoogle&&e.push(g.a.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:f.Client4.getOAuthRoute()+"/google/signup"+window.location.search},g.a.createElement("span",null,g.a.createElement("span",{className:"icon"}),g.a.createElement("span",null,g.a.createElement(h.a,{id:"signup.google",defaultMessage:"Google Account"}))))),this.props.isLicensed&&this.props.enableSignUpWithOffice365&&e.push(g.a.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:f.Client4.getOAuthRoute()+"/office365/signup"+window.location.search},g.a.createElement("span",null,g.a.createElement("span",{className:"icon"}),g.a.createElement("span",null,g.a.createElement(h.a,{id:"signup.office365",defaultMessage:"Office 365"}))))),this.props.isLicensed&&this.props.enableSignUpWithOpenId){const a={};this.props.openidButtonColor&&(a.backgroundColor=this.props.openidButtonColor);let t=g.a.createElement(h.a,{id:"login.openid",defaultMessage:"Open Id"});this.props.openidButtonText&&(t=this.props.openidButtonText),e.push(g.a.createElement("a",{id:"OpenIdButton",className:"btn btn-custom-login btn--full openid",style:a,key:"openid",href:f.Client4.getOAuthRoute()+"/openid/signup"+window.location.search},g.a.createElement("span",null,g.a.createElement("span",null,t))))}if(this.props.isLicensed&&this.props.enableLDAP){const a=new URLSearchParams(this.props.location.search);a.append("extra","create_ldap");const t="?"+a.toString();let n=g.a.createElement(h.a,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"});this.props.ldapLoginFieldName&&(n=this.props.ldapLoginFieldName),e.push(g.a.createElement(b.Link,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/login"+t},g.a.createElement("span",null,g.a.createElement(w.a,{className:"icon fa fa-folder-open fa--margin-top",component:"span",title:{id:Object(U.b)("signup.ldap.icon"),defaultMessage:"AD/LDAP Icon"}}),g.a.createElement("span",null,n))))}if(this.props.isLicensed&&this.props.enableSAML){let a="";a=window.location.search?"&action=signup":"?action=signup",e.push(g.a.createElement(b.Link,{className:"btn btn-custom-login btn--full saml",key:"saml",to:"/login/sso/saml"+window.location.search+a},g.a.createElement("span",null,g.a.createElement(w.a,{className:"icon fa fa-lock fa--margin-top",component:"span",title:{id:Object(U.b)("signup.saml.icon"),defaultMessage:"SAML Icon"}}),g.a.createElement("span",null,this.props.samlLoginButtonText))))}if(0===e.length){const a=g.a.createElement(h.a,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});e=g.a.createElement(_.a,{error:a,margin:!0})}else if(1===e.length){if(this.props.enableSignUpWithEmail)return E.a.push("/signup_email"+window.location.search);if(this.props.isLicensed&&this.props.enableLDAP)return E.a.push("/login"+window.location.search)}return e});let a=!1,t="",n=!1,i=!1;if(this.props.location.search){const s=new URLSearchParams(this.props.location.search);let o=s.get("t");null==o&&(o="");let l=s.get("id");null==l&&(l=""),l?a=!0:this.props.loggedIn?l||this.props.enableOpenServer||this.props.noAccounts||(n=!0,t=g.a.createElement(h.a,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."})):i=e.usedBefore}this.state={loading:a,serverError:t,noOpenServerError:n,usedBefore:i}}componentDidMount(){if(this.props.actions.removeGlobalItem("team"),this.props.location.search){const e=new URLSearchParams(this.props.location.search),a=e.get("t")||"",t=e.get("id")||"",n=this.props.loggedIn;(t||a)&&n?this.addUserToTeamFromInvite(a,t):t?this.getInviteInfo(t):n&&v.f()}}render(){if(this.state.loading)return g.a.createElement(N.a,null);if(this.state.usedBefore)return g.a.createElement("div",null,g.a.createElement(h.a,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));let e,a=null;return this.state.serverError&&(a=g.a.createElement("div",{className:"form-group has-error"},g.a.createElement("label",{className:"control-label"},this.state.serverError))),e=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),g.a.createElement("div",null,g.a.createElement(S.a,null),g.a.createElement(I.a,null),g.a.createElement("div",{className:"col-sm-12"},g.a.createElement("div",{className:"signup-team__container"},g.a.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:L.a}),g.a.createElement("div",{className:"signup__content"},g.a.createElement("h1",null,this.props.siteName),g.a.createElement("h4",{className:"color--light"},g.a.createElement(h.a,{id:"web.root.signup_info"})),g.a.createElement("div",{className:"mt-8"},g.a.createElement("h5",null,g.a.createElement("strong",null,g.a.createElement(h.a,{id:"signup.title",defaultMessage:"Create an account with:"})))),e,a),g.a.createElement("span",{className:"color--light"},g.a.createElement(h.a,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",g.a.createElement(b.Link,{to:"/login"+this.props.location.search},g.a.createElement(h.a,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))))))}}k(A,"propTypes",{location:d.a.object,loggedIn:d.a.bool.isRequired,isLicensed:d.a.bool.isRequired,enableOpenServer:d.a.bool.isRequired,noAccounts:d.a.bool.isRequired,enableSignUpWithEmail:d.a.bool.isRequired,enableSignUpWithGitLab:d.a.bool.isRequired,enableSignUpWithGoogle:d.a.bool.isRequired,enableSignUpWithOffice365:d.a.bool.isRequired,enableSignUpWithOpenId:d.a.bool.isRequired,enableLDAP:d.a.bool.isRequired,enableSAML:d.a.bool.isRequired,samlLoginButtonText:d.a.string,siteName:d.a.string,usedBefore:d.a.string,ldapLoginFieldName:d.a.string.isRequired,openidButtonText:d.a.string,openidButtonColor:d.a.string,actions:d.a.shape({removeGlobalItem:d.a.func.isRequired,getTeamInviteInfo:d.a.func.isRequired,addUserToTeamFromInvite:d.a.func.isRequired}).isRequired});a.default=Object(n.connect)((function(e,a){const t=Object(s.getLicense)(e),n=Object(s.getConfig)(e),i=t&&"true"===t.IsLicensed,l="true"===n.EnableOpenServer,c="true"===n.NoAccounts,p="true"===n.EnableSignUpWithEmail,u="true"===n.EnableSignUpWithGitLab,d="true"===n.EnableSignUpWithGoogle,m="true"===n.EnableSignUpWithOffice365,g="true"===n.EnableLdap,h="true"===n.EnableSaml,b=n.SamlLoginButtonText,f=n.LdapLoginFieldName,E=n.SiteName;let v;if(a.location.search){let t=new URLSearchParams(a.location.search).get("t");null==t&&(t=""),v=Object(r.a)(e,t,null)}return{loggedIn:Boolean(Object(o.getCurrentUserId)(e)),isLicensed:i,enableOpenServer:l,noAccounts:c,enableSignUpWithEmail:p,enableSignUpWithGitLab:u,enableSignUpWithGoogle:d,enableSignUpWithOffice365:m,enableLDAP:g,enableSAML:h,samlLoginButtonText:b,ldapLoginFieldName:f,siteName:E,usedBefore:v}}),(function(e){return{actions:Object(i.bindActionCreators)({removeGlobalItem:c.c,getTeamInviteInfo:l.getTeamInviteInfo,addUserToTeamFromInvite:p.b},e)}}))(A)}}]);
//# sourceMappingURL=20.17aeb16743f0f736d926.js.map